import{B as b,aa as v,a as V,I as m,C as y,D as C,H as n,P as l,G as S,a9 as I,u as r,$ as c,X as f}from"./vue-BMJJ5Kg4.js";import{v as $,b as N,G as R,ae as L,_ as x}from"./index-DRv2sWQF.js";import{b as u}from"./validate-CzjpH8Rv.js";import{F as i}from"./index-Dy1MJO1N.js";import"./index-DONpsK3B.js";import"./baTable-57jWdOQZ.js";import"./index-CqVz8jMs.js";const B={class:"user-views"},U={class:"change-password"},k=b({__name:"changePassword",setup(q){const{t:s}=$.useI18n(),P=N(),w=v("formRef"),e=V({formSubmitLoading:!1,form:{oldPassword:"",newPassword:"",confirmPassword:""},rules:{oldPassword:[u({name:"required",title:s("user.account.changePassword.Old password")})],newPassword:[u({name:"required",title:s("user.account.changePassword.New password")}),u({name:"password"})],confirmPassword:[u({name:"required",title:s("user.account.changePassword.Confirm new password")}),u({name:"password"}),{validator:(d,o,a)=>{(e.form.newPassword||e.form.confirmPassword)&&(e.form.newPassword==e.form.confirmPassword?a():a(new Error(s("user.account.changePassword.The duplicate password does not match the new password")))),a()},trigger:"blur"}]}}),p=()=>{var d;(d=w.value)==null||d.validate(o=>{o&&(e.formSubmitLoading=!0,L(e.form).then(a=>{e.formSubmitLoading=!1,a.code==1&&P.logout()}).catch(()=>{e.formSubmitLoading=!1}))})};return(d,o)=>{const a=m("el-button"),g=m("el-form-item"),h=m("el-form"),_=m("el-card");return C(),y("div",B,[n(_,{class:"user-views-card",shadow:"hover",header:r(s)("user.account.changePassword.Change Password")},{default:l(()=>[S("div",U,[n(h,{model:e.form,rules:e.rules,"label-position":"top",ref_key:"formRef",ref:w,onKeyup:o[5]||(o[5]=I(t=>p(),["enter"]))},{default:l(()=>[n(i,{label:r(s)("user.account.changePassword.Old password"),type:"password",modelValue:e.form.oldPassword,"onUpdate:modelValue":o[0]||(o[0]=t=>e.form.oldPassword=t),prop:"oldPassword","input-attr":{showPassword:!0},placeholder:r(s)("user.account.changePassword.Please enter your current password")},null,8,["label","modelValue","placeholder"]),n(i,{label:r(s)("user.account.changePassword.New password"),type:"password",modelValue:e.form.newPassword,"onUpdate:modelValue":o[1]||(o[1]=t=>e.form.newPassword=t),prop:"newPassword","input-attr":{showPassword:!0},placeholder:r(s)("Please input field",{field:r(s)("user.account.changePassword.New password")})},null,8,["label","modelValue","placeholder"]),n(i,{label:r(s)("user.account.changePassword.Confirm new password"),type:"password",modelValue:e.form.confirmPassword,"onUpdate:modelValue":o[2]||(o[2]=t=>e.form.confirmPassword=t),prop:"confirmPassword","input-attr":{showPassword:!0},placeholder:r(s)("Please input field",{field:r(s)("user.account.changePassword.Confirm new password")})},null,8,["label","modelValue","placeholder"]),n(g,{class:"submit-buttons"},{default:l(()=>[n(a,{onClick:o[3]||(o[3]=t=>r(R)(r(w)))},{default:l(()=>[c(f(d.$t("Reset")),1)]),_:1}),n(a,{type:"primary",loading:e.formSubmitLoading,onClick:o[4]||(o[4]=t=>p())},{default:l(()=>[c(f(d.$t("Save")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])])]),_:1},8,["header"])])}}}),j=x(k,[["__scopeId","data-v-9cc2dcfb"]]);export{j as default};
