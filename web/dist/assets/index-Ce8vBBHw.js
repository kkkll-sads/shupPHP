import{b as k}from"./baTable-CpxZN4RR.js";import{a5 as y,c as T}from"./index-BR6nH71S.js";import{T as F,a as D}from"./index-B5mnDXNW.js";import{B as E,b as I,I as d,C,D as p,O as u,U as m,H as t,u as _,P as l,$ as o,X as r,a1 as b,at as N}from"./vue-DnSQgQf0.js";import"./index-DGD6GkL-.js";const V={class:"default-main ba-table-box"},K=E({name:"collection/consignment",__name:"index",setup(A){const a=I({visible:!1,data:null}),f=async i=>{var n,c;try{const e=await T({url:"/admin/collection.Consignment/detail",method:"get",params:{id:i.id}});e.code===1?(a.value.data=e.data.data,a.value.visible=!0):b.error(e.msg||"获取详情失败")}catch(e){console.error("获取详情失败:",e),b.error((e==null?void 0:e.msg)||((c=(n=e==null?void 0:e.response)==null?void 0:n.data)==null?void 0:c.msg)||"获取详情失败")}},g=i=>({1:"warning",2:"success",3:"info",4:"danger"})[i]||"info",s=new k(new y("/admin/collection.Consignment/"),{pk:"id",column:[{type:"selection",align:"center",operator:!1},{label:"ID",prop:"id",align:"center",width:70,operator:"RANGE",sortable:"custom"},{label:"用户名",prop:"username",align:"center",operator:"LIKE",operatorPlaceholder:"模糊查询"},{label:"手机号",prop:"user_mobile",align:"center",operator:"LIKE",operatorPlaceholder:"模糊查询"},{label:"藏品标题",prop:"item_title",align:"center",operator:"LIKE",operatorPlaceholder:"模糊查询",width:200},{label:"资产包",prop:"package_name",align:"center",operator:"LIKE",operatorPlaceholder:"模糊查询",width:150},{label:"寄售价格",prop:"price",align:"center",operator:"RANGE",render:"customTemplate",customTemplate:i=>`¥${parseFloat(i.price).toFixed(2)}`,width:100},{label:"原价",prop:"original_price",align:"center",operator:"RANGE",render:"customTemplate",customTemplate:i=>`¥${parseFloat(i.original_price).toFixed(2)}`,width:100},{label:"手续费",prop:"service_fee",align:"center",render:"customTemplate",customTemplate:i=>`¥${parseFloat(i.service_fee).toFixed(2)}`,width:90},{label:"使用券",prop:"coupon_used",align:"center",render:"tag",replaceValue:{0:"否",1:"是"},custom:{0:"info",1:"success"},width:80},{label:"状态",prop:"status",align:"center",operator:"=",render:"tag",replaceValue:{1:"寄售中",2:"已售出",3:"流拍",4:"已取消"},custom:{1:"warning",2:"success",3:"info",4:"danger"},width:90},{label:"创建时间",prop:"create_time",align:"center",render:"datetime",operator:"RANGE",sortable:"custom",width:160},{label:"成交时间",prop:"sold_time",align:"center",render:"datetime",operator:"RANGE",sortable:"custom",width:160},{label:"操作",align:"center",width:100,render:"buttons",buttons:(i=>[{name:"detail",text:"详情",type:"primary",icon:"fa fa-info-circle",render:"basicButton",click:()=>f(i)}]),operator:!1}],dblClickNotEditColumn:["all"]},{defaultItems:{}});return s.mount(),s.getData(),N("baTable",s),(i,n)=>{const c=d("el-alert"),e=d("el-descriptions-item"),v=d("el-tag"),h=d("el-descriptions"),w=d("el-dialog");return p(),C("div",V,[_(s).table.remark?(p(),u(c,{key:0,class:"ba-table-alert",title:_(s).table.remark,type:"info","show-icon":""},null,8,["title"])):m("",!0),t(F,{buttons:["refresh","comSearch","quickSearch","columnDisplay"],"quick-search-placeholder":"快速搜索：ID/资产包名称"}),t(D),t(w,{modelValue:a.value.visible,"onUpdate:modelValue":n[0]||(n[0]=x=>a.value.visible=x),title:"寄售详情",width:"800px","close-on-click-modal":!1},{default:l(()=>[a.value.data?(p(),u(h,{key:0,column:2,border:""},{default:l(()=>[t(e,{label:"寄售ID"},{default:l(()=>[o(r(a.value.data.id),1)]),_:1}),t(e,{label:"状态"},{default:l(()=>[t(v,{type:g(a.value.data.status)},{default:l(()=>[o(r(a.value.data.status_text),1)]),_:1},8,["type"])]),_:1}),t(e,{label:"用户名"},{default:l(()=>[o(r(a.value.data.username),1)]),_:1}),t(e,{label:"手机号"},{default:l(()=>[o(r(a.value.data.user_mobile),1)]),_:1}),t(e,{label:"藏品标题",span:2},{default:l(()=>[o(r(a.value.data.item_title),1)]),_:1}),t(e,{label:"场次ID"},{default:l(()=>[o(r(a.value.data.session_id||"无"),1)]),_:1}),t(e,{label:"价格分区ID"},{default:l(()=>[o(r(a.value.data.zone_id||"无"),1)]),_:1}),t(e,{label:"资产包ID"},{default:l(()=>[o(r(a.value.data.package_id||"无"),1)]),_:1}),t(e,{label:"资产包名称"},{default:l(()=>[o(r(a.value.data.package_name_display||"无"),1)]),_:1}),t(e,{label:"寄售价格"},{default:l(()=>[o("¥"+r(parseFloat(a.value.data.price).toFixed(2)),1)]),_:1}),t(e,{label:"原价"},{default:l(()=>[o("¥"+r(parseFloat(a.value.data.original_price).toFixed(2)),1)]),_:1}),t(e,{label:"手续费"},{default:l(()=>[o("¥"+r(parseFloat(a.value.data.service_fee).toFixed(2)),1)]),_:1}),t(e,{label:"使用寄售券"},{default:l(()=>[o(r(a.value.data.coupon_used?"是":"否"),1)]),_:1}),t(e,{label:"成交价格"},{default:l(()=>[o(r(a.value.data.sold_price>0?"¥"+parseFloat(a.value.data.sold_price).toFixed(2):"-"),1)]),_:1}),t(e,{label:"成交时间"},{default:l(()=>[o(r(a.value.data.sold_time_text||"-"),1)]),_:1}),t(e,{label:"创建时间"},{default:l(()=>[o(r(a.value.data.create_time_text),1)]),_:1}),t(e,{label:"更新时间"},{default:l(()=>[o(r(a.value.data.update_time_text),1)]),_:1})]),_:1})):m("",!0)]),_:1},8,["modelValue"])])}}});export{K as default};
