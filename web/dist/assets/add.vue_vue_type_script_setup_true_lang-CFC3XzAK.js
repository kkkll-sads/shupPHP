import{B as Ae,a as q,C as _e,D as d,O as m,U as g,u as n,a9 as S,a8 as N,aa as Me,I as _,Z as F,P as v,H as b,G as Ee,F as De,_ as Ie,$ as O,X as z}from"./vue-_nkvHh4F.js";import{F as f}from"./index-B-1L-T0t.js";import{c as Pe,b as h}from"./validate-BKCUlVTv.js";import{c as R,j as Ue,e as Se,v as qe}from"./index-DNBbsmjl.js";import{i as M}from"./index-Cl6ixW7i.js";const k="/admin/routine.Config/",B=new Map([["index",k+"index"],["add",k+"add"],["edit",k+"edit"],["del",k+"del"],["sendTestMail",k+"sendTestMail"]]);function $e(){return R({url:B.get("index"),method:"get"})}function Re(c,y){return R({url:B.get(c),method:"post",data:y},{showSuccessMessage:!0})}function je(c){return R({url:B.get("del"),method:"DELETE",params:{ids:c}},{showSuccessMessage:!0})}function Ge(c,y){return R({url:B.get("sendTestMail"),method:"POST",data:Object.assign({},c,{testMail:y})},{showSuccessMessage:!0})}const Be=Ae({__name:"createData",props:{dataTitle:{default:Ue.global.t("utils.Var")},modelValue:{default:()=>({name:"",title:"",type:"",tip:"",rule:[],extend:"",dict:"",inputExtend:""})},options:{},excludeInputTypes:{default:()=>[]},excludeValidatorRule:{default:()=>[]}},emits:["update:modelValue"],setup(c,{emit:y}){var w,V,u,E,D,C,I,P,U,A,r,$,j,G,L,H,X,Z,J,Q,Y,ee,te,le,ae,oe,ie,ne,ue,se,de,re;const{t:i}=Ue.global,t=c,x=["radio","checkbox","select","selects"],e=q({name:{show:((V=(w=t.options)==null?void 0:w.name)==null?void 0:V.show)!==!1,value:t.modelValue.name,title:((E=(u=t.options)==null?void 0:u.name)==null?void 0:E.title)??t.dataTitle+i("utils.Name")},title:{show:((C=(D=t.options)==null?void 0:D.title)==null?void 0:C.show)!==!1,value:t.modelValue.title,title:((P=(I=t.options)==null?void 0:I.title)==null?void 0:P.title)??t.dataTitle+i("utils.Title")},type:{show:((A=(U=t.options)==null?void 0:U.type)==null?void 0:A.show)!==!1,value:t.modelValue.type,title:(($=(r=t.options)==null?void 0:r.type)==null?void 0:$.title)??t.dataTitle+i("utils.type")},tip:{show:((G=(j=t.options)==null?void 0:j.tip)==null?void 0:G.show)!==!1,value:t.modelValue.tip,title:((H=(L=t.options)==null?void 0:L.tip)==null?void 0:H.title)??i("utils.Tip")},rule:{show:((Z=(X=t.options)==null?void 0:X.rule)==null?void 0:Z.show)!==!1,value:t.modelValue.rule,title:((Q=(J=t.options)==null?void 0:J.rule)==null?void 0:Q.title)??i("utils.Rule")},extend:{show:((ee=(Y=t.options)==null?void 0:Y.extend)==null?void 0:ee.show)!==!1,value:t.modelValue.extend,title:((le=(te=t.options)==null?void 0:te.extend)==null?void 0:le.title)??"FormItem "+i("utils.Extend")},dict:{show:((oe=(ae=t.options)==null?void 0:ae.dict)==null?void 0:oe.show)!==!1,value:t.modelValue.dict,title:((ne=(ie=t.options)==null?void 0:ie.dict)==null?void 0:ne.title)??i("utils.Dict")},inputExtend:{show:((se=(ue=t.options)==null?void 0:ue.inputExtend)==null?void 0:se.show)!==!1,value:t.modelValue.inputExtend,title:((re=(de=t.options)==null?void 0:de.inputExtend)==null?void 0:re.title)??"Input "+i("utils.Extend")}}),o=q({validators:{},inputTypes:{}}),T=y,l=()=>{T("update:modelValue",{name:e.name.value??"",title:e.title.value??"",type:e.type.value??"",tip:e.tip.value??"",rule:e.rule.value??[],extend:e.extend.value??"",dict:x.includes(e.type.value??"")?e.dict.value??"":"",inputExtend:e.inputExtend.value??""})};return(()=>{let K={};for(const p in M)t.excludeInputTypes.includes(M[p])||(K[M[p]]=M[p]);o.inputTypes=K;let a={};for(const p in Pe)t.excludeValidatorRule.includes(p)||(a[p]=Pe[p]);o.validators=a,l()})(),(K,a)=>{var p,pe,me,fe,ce,ge,ye,Ve,ve,be,he,xe,we,Ce,ke,Te;return d(),_e("div",null,[e.name.show?(d(),m(f,{key:0,label:e.name.title,type:"string",modelValue:e.name.value,"onUpdate:modelValue":a[0]||(a[0]=s=>e.name.value=s),placeholder:n(i)("Please input field",{field:e.name.title}),"input-attr":{onChange:l,...(pe=(p=t.options)==null?void 0:p.name)==null?void 0:pe.inputAttr},prop:"name"},null,8,["label","modelValue","placeholder","input-attr"])):g("",!0),e.title.show?(d(),m(f,{key:1,label:e.title.title,type:"string",modelValue:e.title.value,"onUpdate:modelValue":a[1]||(a[1]=s=>e.title.value=s),placeholder:n(i)("Please input field",{field:e.title.title}),"input-attr":{onChange:l,...(fe=(me=t.options)==null?void 0:me.title)==null?void 0:fe.inputAttr},prop:"title"},null,8,["label","modelValue","placeholder","input-attr"])):g("",!0),e.type.show?(d(),m(f,{key:2,label:e.type.title,type:"select",modelValue:e.type.value,"onUpdate:modelValue":a[2]||(a[2]=s=>e.type.value=s),placeholder:n(i)("Please select field",{field:e.type.title}),"input-attr":{onChange:l,content:o.inputTypes,...(ge=(ce=t.options)==null?void 0:ce.type)==null?void 0:ge.inputAttr},prop:"type"},null,8,["label","modelValue","placeholder","input-attr"])):g("",!0),e.dict.show&&x.includes(e.type.value)?(d(),m(f,{key:3,label:e.dict.title,type:"textarea",modelValue:e.dict.value,"onUpdate:modelValue":a[3]||(a[3]=s=>e.dict.value=s),"input-attr":{rows:3,placeholder:n(i)("utils.One line at a time, without quotation marks, for example: key1=value1"),onChange:l,...(Ve=(ye=t.options)==null?void 0:ye.dict)==null?void 0:Ve.inputAttr},prop:"dict",onKeyup:a[4]||(a[4]=S(N(()=>{},["stop"]),["enter"]))},null,8,["label","modelValue","input-attr"])):g("",!0),e.tip.show?(d(),m(f,{key:4,label:e.tip.title,type:"string",modelValue:e.tip.value,"onUpdate:modelValue":a[5]||(a[5]=s=>e.tip.value=s),placeholder:n(i)("Please input field",{field:e.tip.title}),"input-attr":{onChange:l,...(be=(ve=t.options)==null?void 0:ve.tip)==null?void 0:be.inputAttr},prop:"tip"},null,8,["label","modelValue","placeholder","input-attr"])):g("",!0),e.rule.show?(d(),m(f,{key:5,label:e.rule.title,type:"selects",modelValue:e.rule.value,"onUpdate:modelValue":a[6]||(a[6]=s=>e.rule.value=s),placeholder:n(i)("Please select field",{field:e.rule.title}),"input-attr":{onChange:l,content:o.validators,...(xe=(he=t.options)==null?void 0:he.rule)==null?void 0:xe.inputAttr},prop:"rule"},null,8,["label","modelValue","placeholder","input-attr"])):g("",!0),e.extend.show?(d(),m(f,{key:6,label:e.extend.title,type:"textarea",modelValue:e.extend.value,"onUpdate:modelValue":a[7]||(a[7]=s=>e.extend.value=s),"input-attr":{onChange:l,placeholder:n(i)("utils.One attribute per line without quotation marks(formitem)"),...(Ce=(we=t.options)==null?void 0:we.extend)==null?void 0:Ce.inputAttr},prop:"extend",onKeyup:a[8]||(a[8]=S(N(()=>{},["stop"]),["enter"]))},null,8,["label","modelValue","input-attr"])):g("",!0),e.inputExtend.show?(d(),m(f,{key:7,label:e.inputExtend.title,type:"textarea",modelValue:e.inputExtend.value,"onUpdate:modelValue":a[9]||(a[9]=s=>e.inputExtend.value=s),"input-attr":{onChange:l,placeholder:n(i)("utils.Extended properties of Input, one line without quotation marks, such as: size=large"),...(Te=(ke=t.options)==null?void 0:ke.inputExtend)==null?void 0:Te.inputAttr},prop:"inputExtend",onKeyup:a[10]||(a[10]=S(N(()=>{},["stop"]),["enter"]))},null,8,["label","modelValue","input-attr"])):g("",!0)])}}}),Ke={class:"title"},Le=Ae({__name:"add",props:{modelValue:{type:Boolean,default:!1},configGroup:{default:()=>({})}},emits:["update:modelValue"],setup(c,{emit:y}){const i=Se(),t=c,x=y,e=()=>{x("update:modelValue",!1)},{t:o}=qe.useI18n(),T=Me("formRef"),l=q({inputTypes:{},labelWidth:180,submitLoading:!1,addConfig:{group:"",weigh:0,content:""},formItemData:{dict:`key1=value1
key2=value2`}}),W=q({group:[h({name:"required",trigger:"change",message:o("Please select field",{field:o("routine.config.Variable group")})})],name:[h({name:"required",title:o("routine.config.Variable name")}),h({name:"varName",message:o("Please enter the correct field",{field:o("routine.config.Variable name")})})],title:[h({name:"required",title:o("routine.config.Variable title")})],type:[h({name:"required",trigger:"change",message:o("Please select field",{field:o("routine.config.Variable type")})})],weigh:[h({name:"integer",title:o("routine.config.number")})]}),w=()=>{var V;(V=T.value)==null||V.validate(u=>{u&&(l.addConfig.content=l.formItemData.dict,delete l.formItemData.dict,Re("add",{...l.addConfig,...l.formItemData}).then(()=>{x("update:modelValue",!1)}))})};return(V,u)=>{const E=_("el-form"),D=_("el-scrollbar"),C=_("el-button"),I=_("el-dialog"),P=F("drag"),U=F("zoom"),A=F("blur");return d(),m(I,{class:"ba-operate-dialog","close-on-click-modal":!1,"model-value":t.modelValue,onClose:e},{header:v(()=>[Ie((d(),_e("div",Ke,[O(z(n(o)("routine.config.Add configuration item")),1)])),[[P,[".ba-operate-dialog",".el-dialog__header"]],[U,".ba-operate-dialog"]])]),footer:v(()=>[Ee("div",{style:De("width: calc(100% - "+l.labelWidth/1.8+"px)")},[b(C,{onClick:e},{default:v(()=>[O(z(n(o)("Cancel")),1)]),_:1}),Ie((d(),m(C,{loading:l.submitLoading,onClick:u[4]||(u[4]=r=>w()),type:"primary"},{default:v(()=>[O(z(n(o)("Add")),1)]),_:1},8,["loading"])),[[A]])],4)]),default:v(()=>[b(D,{class:"ba-table-form-scrollbar"},{default:v(()=>[Ee("div",{class:"ba-operate-form ba-add-form",style:De(n(i).layout.shrink?"":"width: calc(100% - "+l.labelWidth/2+"px)")},[b(E,{ref_key:"formRef",ref:T,onKeyup:u[3]||(u[3]=S(r=>w(),["enter"])),rules:W,model:{...l.addConfig,...l.formItemData},"label-position":n(i).layout.shrink?"top":"right","label-width":160},{default:v(()=>[b(f,{label:n(o)("routine.config.Variable group"),type:"select",modelValue:l.addConfig.group,"onUpdate:modelValue":u[0]||(u[0]=r=>l.addConfig.group=r),prop:"group","input-attr":{content:V.configGroup},placeholder:n(o)("Please select field",{field:n(o)("routine.config.Variable group")})},null,8,["label","modelValue","input-attr","placeholder"]),b(Be,{modelValue:l.formItemData,"onUpdate:modelValue":u[1]||(u[1]=r=>l.formItemData=r)},null,8,["modelValue"]),b(f,{label:n(o)("Weigh"),type:"number",modelValue:l.addConfig.weigh,"onUpdate:modelValue":u[2]||(u[2]=r=>l.addConfig.weigh=r),prop:"weigh"},null,8,["label","modelValue"])]),_:1},8,["rules","model","label-position"])],4)]),_:1})]),_:1},8,["model-value"])}}});export{Le as _,Ge as a,je as d,$e as i,Re as p};
