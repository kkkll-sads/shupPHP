import{v as V}from"./index-DRv2sWQF.js";import{B as N,am as I,b as j,a as E,w as B,I as u,O as F,D as A,P as n,H as d,G as y,$ as x,X as _,u as s}from"./vue-BMJJ5Kg4.js";const M={class:"title"},O={class:"dialog-footer"},q=N({__name:"popupForm",setup(S){const{t:m}=V.useI18n(),o=I("baTable"),p=j(),t=E({id:"",direct_people:1,draw_count:1,remark:""}),f=e=>(r,l,i)=>{if(l==null||l===""){i(new Error(`请输入${e}`));return}const c=Number(l);if(!Number.isInteger(c)||c<=0){i(new Error(`${e}必须为大于0的整数`));return}i()},g={direct_people:[{required:!0,message:"直推人数不能为空",trigger:"blur"},{validator:f("直推人数"),trigger:"blur"}],draw_count:[{required:!0,message:"抽奖次数不能为空",trigger:"blur"},{validator:f("抽奖次数"),trigger:"blur"}]};B(()=>{var e;return(e=o==null?void 0:o.form)==null?void 0:e.items},e=>{e&&typeof e=="object"&&Object.assign(t,{id:e.id??"",direct_people:e.direct_people??1,draw_count:e.draw_count??1,remark:e.remark??""})},{deep:!0});const b=e=>{const r=Number(e);return!Number.isFinite(r)||r<=0?1:Math.floor(r)},w=()=>{var e;(e=p.value)==null||e.resetFields(),o==null||o.toggleForm("")},C=()=>{var e;o&&((e=p.value)==null||e.validate(r=>{if(!r)return;const l={...t,direct_people:b(t.direct_people),draw_count:b(t.draw_count)};o.form.items&&Object.assign(o.form.items,l),o.onSubmit(p.value)}))};return(e,r)=>{const l=u("el-input"),i=u("el-form-item"),c=u("el-form"),v=u("el-button"),h=u("el-dialog");return A(),F(h,{class:"ba-edit-dialog","close-on-click-modal":!1,"destroy-on-close":!0,"model-value":s(o)&&s(o).form&&["Add","Edit"].includes(s(o).form.operate),onClose:w,width:"460px"},{header:n(()=>{var a,k;return[y("div",M,_(((k=(a=s(o))==null?void 0:a.form)==null?void 0:k.operate)==="Add"?s(m)("Add"):s(m)("Edit")),1)]}),footer:n(()=>[y("span",O,[d(v,{onClick:w},{default:n(()=>[x(_(s(m)("Cancel")),1)]),_:1}),d(v,{type:"primary",onClick:C},{default:n(()=>[x(_(s(m)("Confirm")),1)]),_:1})])]),default:n(()=>[d(c,{model:t,"label-width":"120px",ref_key:"formRef",ref:p},{default:n(()=>[d(i,{label:"直推人数",prop:"direct_people",rules:g.direct_people},{default:n(()=>[d(l,{modelValue:t.direct_people,"onUpdate:modelValue":r[0]||(r[0]=a=>t.direct_people=a),modelModifiers:{number:!0},placeholder:"请输入直推人数",type:"number"},null,8,["modelValue"])]),_:1},8,["rules"]),d(i,{label:"抽奖次数",prop:"draw_count",rules:g.draw_count},{default:n(()=>[d(l,{modelValue:t.draw_count,"onUpdate:modelValue":r[1]||(r[1]=a=>t.draw_count=a),modelModifiers:{number:!0},placeholder:"请输入抽奖次数",type:"number"},null,8,["modelValue"])]),_:1},8,["rules"]),d(i,{label:"备注",prop:"remark"},{default:n(()=>[d(l,{modelValue:t.remark,"onUpdate:modelValue":r[2]||(r[2]=a=>t.remark=a),type:"textarea",placeholder:"请输入备注",rows:3,maxlength:"255","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["model-value"])}}});export{q as _};
