import{v as B,T as b,_ as S}from"./index-BHof7fb5.js";import{s as a,f as z,g as D,h as F}from"./index-BeMDbhJu.js";import{B as M,aX as w,I as _,C as c,D as s,H as i,u as e,P as d,G as u,O as v,X as m,$ as h}from"./vue-BMJJ5Kg4.js";import"./index-KGgu4aSr.js";import"./terminal-CKfb3N9x.js";const N={key:0},T={class:"available-system-version"},$={class:"available-system-version-text"},j={key:1},A={key:0},E={key:0,class:"renewal-text"},L={key:1},O={key:2},X={class:"renewal"},G={class:"renewal-text"},H=M({__name:"commonSelectVersion",setup(P){const{t}=B.useI18n(),k=w(o=>(o=o.replace(/^v/,""),o=o.split(".").map(l=>l.padStart(2,"0")).join(""),parseInt(o))),g=o=>{const l=a.installedModule.find(r=>r.uid==a.common.uid);return!!(l&&(o=o.replace(/^v/,""),l.version=l.version.replace(/^v/,""),o==l.version))},p=w(o=>k(a.sysVersion)>parseInt(o)),x=(o,l,r)=>{a.dialog.common=!0,a.common.dialogTitle=t("module.Install"),D("download"),a.dialog.baAccount=!1,a.dialog.buy=!1,a.dialog.goodsInfo=!1,F(o,l,r,a.common.update)};return(o,l)=>{const r=_("el-table-column"),f=_("Icon"),y=_("el-button"),C=_("el-tooltip"),I=_("el-table");return s(),c("div",null,[i(I,{data:e(a).common.versions,class:"w100",stripe:""},{default:d(()=>[i(r,{property:"version",align:"center",label:e(t)("module.Version")},null,8,["label"]),i(r,{property:"short_describe","show-overflow-tooltip":!0,align:"center",label:e(t)("module.Description")},null,8,["label"]),i(r,{property:"available_system_version_text",align:"center",label:e(t)("module.Available system version")},{default:d(n=>[n.row.available_system_version&&e(a).sysVersion?(s(),c("div",N,[u("div",T,[e(p)(n.row.available_system_version)?(s(),v(f,{key:0,name:"el-icon-CircleCheckFilled",color:"var(--el-color-success)",size:"14"})):(s(),v(f,{key:1,name:"el-icon-CircleCloseFilled",size:"14",color:"var(--el-color-danger)"})),u("div",$,m(n.row.available_system_version_text),1)])])):(s(),c("div",j,"-"))]),_:1},8,["label"]),i(r,{property:"createtime_text",align:"center",label:e(t)("Create time")},null,8,["label"]),i(r,{label:e(t)("module.Install"),align:"center","min-width":140},{default:d(n=>[n.row.downloadable?(s(),c("div",A,[g(n.row.version)?(s(),c("div",E,m(e(t)("module.Current installed version")),1)):e(p)(n.row.available_system_version)?(s(),c("div",O,[i(y,{type:"primary",onClick:V=>x(n.row.uid,n.row.order_id,n.row.version)},{default:d(()=>[h(m(e(t)("module.Click to install")),1)]),_:2},1032,["onClick"])])):(s(),c("div",L,m(e(t)("module.Insufficient system version")),1))])):(s(),v(C,{key:1,effect:"dark",content:e(t)("module.Order expiration time",{expiration_time:e(b)(n.row.order_expiration_time),create_time:e(b)(n.row.createtime)}),placement:"top"},{default:d(()=>[u("div",X,[u("div",G,m(e(t)("module.Versions released beyond the authorization period")),1),i(y,{onClick:l[0]||(l[0]=V=>e(z)(!0)),type:"danger"},{default:d(()=>[h(m(e(t)("module.Renewal")),1)]),_:1})])]),_:2},1032,["content"]))]),_:1},8,["label"])]),_:1},8,["data"])])}}}),U=S(H,[["__scopeId","data-v-5678fe15"]]);export{U as default};
