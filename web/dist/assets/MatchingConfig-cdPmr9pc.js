import{B as y,b as u,a as B,I as n,Z as D,C as M,D as h,H as a,P as o,_ as q,O as S,G as r,$ as _,u as U,aK as E,a1 as b}from"./vue-BMJJ5Kg4.js";import{c as v,_ as N}from"./index-DRv2sWQF.js";const T={class:"matching-config"},z={class:"card-header"},G={class:"card-actions"},I=y({__name:"MatchingConfig",setup(O){const l=u(!1),m=u(!1),t=B({matching_profit_rate:.5,matching_profit_balance:.5,matching_profit_score:.5,matching_tie_breaker:"time"}),c=()=>{l.value=!0,v({url:"/admin/content.DrawCountConfig/matchingSettlementConfig",method:"GET"}).then(f=>{const e=f.data||{};t.matching_profit_rate=e.matching_profit_rate??.5,t.matching_profit_balance=e.matching_profit_balance??.5,t.matching_profit_score=e.matching_profit_score??.5,t.matching_tie_breaker=e.matching_tie_breaker??"time"}).finally(()=>{l.value=!1})},C=()=>{if(t.matching_profit_rate<0||t.matching_profit_rate>1){b.error("中签利润占比必须在 0-1 之间");return}if(Math.abs(t.matching_profit_balance+t.matching_profit_score-1)>1e-4){b.error("利润分配比例之和必须等于 1");return}m.value=!0,v({url:"/admin/content.DrawCountConfig/matchingSettlementConfig",method:"POST",data:{matching_profit_rate:t.matching_profit_rate,matching_profit_balance:t.matching_profit_balance,matching_profit_score:t.matching_profit_score,matching_tie_breaker:t.matching_tie_breaker}},{showSuccessMessage:!0}).then(()=>{c()}).finally(()=>{m.value=!1})};return c(),(f,e)=>{const p=n("el-button"),d=n("el-input-number"),s=n("el-form-item"),g=n("el-radio"),V=n("el-radio-group"),x=n("el-form"),k=n("el-card"),w=D("loading");return h(),M("div",T,[a(k,{class:"config-card",shadow:"hover"},{header:o(()=>[r("div",z,[e[6]||(e[6]=r("span",{class:"card-title"},"撮合配置",-1)),r("div",G,[a(p,{size:"small",onClick:c,loading:l.value,icon:U(E)},{default:o(()=>e[4]||(e[4]=[_("刷新")])),_:1},8,["loading","icon"]),a(p,{size:"small",type:"primary",onClick:C,loading:m.value},{default:o(()=>e[5]||(e[5]=[_("保存")])),_:1},8,["loading"])])])]),default:o(()=>[q((h(),S(x,{model:t,"label-width":"220px"},{default:o(()=>[a(s,{label:"中签利润占比（相对于价格）",required:""},{default:o(()=>[a(d,{modelValue:t.matching_profit_rate,"onUpdate:modelValue":e[0]||(e[0]=i=>t.matching_profit_rate=i),min:0,max:1,step:.01,precision:2,style:{width:"200px"}},null,8,["modelValue"]),e[7]||(e[7]=r("span",{class:"form-tip"},"例如 0.5 表示利润为价格的 50%",-1))]),_:1}),a(s,{label:"利润分配：可调度收益比例",required:""},{default:o(()=>[a(d,{modelValue:t.matching_profit_balance,"onUpdate:modelValue":e[1]||(e[1]=i=>t.matching_profit_balance=i),min:0,max:1,step:.01,precision:2,style:{width:"200px"}},null,8,["modelValue"])]),_:1}),a(s,{label:"利润分配：消费金比例",required:""},{default:o(()=>[a(d,{modelValue:t.matching_profit_score,"onUpdate:modelValue":e[2]||(e[2]=i=>t.matching_profit_score=i),min:0,max:1,step:.01,precision:2,style:{width:"200px"}},null,8,["modelValue"])]),_:1}),a(s,{label:"权重相同时平局处理方式",required:""},{default:o(()=>[a(V,{modelValue:t.matching_tie_breaker,"onUpdate:modelValue":e[3]||(e[3]=i=>t.matching_tie_breaker=i)},{default:o(()=>[a(g,{label:"time"},{default:o(()=>e[8]||(e[8]=[_("按时间（早到先得）")])),_:1}),a(g,{label:"random"},{default:o(()=>e[9]||(e[9]=[_("随机")])),_:1})]),_:1},8,["modelValue"]),e[10]||(e[10]=r("div",{class:"form-tip"},"当候选权重全部相同时，选择按时间优先或随机",-1))]),_:1})]),_:1},8,["model"])),[[w,l.value]])]),_:1})])}}}),H=N(I,[["__scopeId","data-v-121da650"]]);export{H as default};
