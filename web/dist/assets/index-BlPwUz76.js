import{v as p,a5 as u}from"./index-BR6nH71S.js";import{b as d,d as m}from"./baTable-CpxZN4RR.js";import{T as b,a as f}from"./index-B5mnDXNW.js";import{_ as h}from"./popupForm.vue_vue_type_script_setup_true_lang-CiRV-ANj.js";import{B as g,I as _,C as E,D as l,O as B,U as T,H as t,u as r,ai as k,at as w}from"./vue-DnSQgQf0.js";import"./index-DGD6GkL-.js";const I={class:"default-main ba-table-box"},L=g({name:"collection/tradeReservation",__name:"index",setup(x){const{t:n}=p.useI18n(),e=new d(new u("/admin/collection.TradeReservation/"),{column:[{type:"selection",align:"center",operator:!1},{label:"ID",prop:"id",align:"center",operator:"=",operatorPlaceholder:"ID",width:70},{label:"用户ID",prop:"user_id",align:"center",operator:"=",width:100},{label:"用户名",prop:"user.username",align:"center",operator:"LIKE",render:"tags"},{label:"手机号",prop:"user.mobile",align:"center",operator:"LIKE"},{label:"专场",prop:"session.title",align:"center",operator:"LIKE"},{label:"价格分区",prop:"zone.name",align:"center",operator:"LIKE"},{label:"冻结金额",prop:"freeze_amount",align:"center",operator:"BETWEEN"},{label:"消耗算力",prop:"power_used",align:"center",operator:"BETWEEN"},{label:"权重",prop:"weight",align:"center",operator:"BETWEEN"},{label:"状态",prop:"status",align:"center",render:"tag",custom:{0:"info",1:"success",2:"danger",3:"warning"},replaceValue:{0:"待处理",1:"已中签",2:"未中签",3:"已取消"}},{label:"创建时间",prop:"create_time",align:"center",render:"datetime",sortable:"custom",operator:"RANGE",width:160},{label:"操作",prop:"operate",align:"center",width:100,render:"buttons",buttons:["delete"]}],dblClickNotEditColumn:["all"]},{defaultItems:{status:0}}),s={render:"tipButton",name:"cancel",text:"取消预约",type:"danger",icon:"fa fa-ban",title:"取消预约并退款",display:a=>a.status===0,class:"table-row-cancel",click:a=>{k.confirm("确定要取消该预约吗？冻结资金将自动退回。","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{e.api.postData("cancel",{ids:[a.id]}).then(c=>{e.onTableHeaderAction("refresh",{})})}).catch(()=>{})}},o=m(["delete"]);return o.push(s),e.table.column[e.table.column.length-1].buttons=o,e.mount(),e.getData(),w("baTable",e),(a,c)=>{const i=_("el-alert");return l(),E("div",I,[r(e).table.remark?(l(),B(i,{key:0,class:"ba-table-alert",title:r(e).table.remark,type:"info","show-icon":""},null,8,["title"])):T("",!0),t(b,{buttons:["refresh","comSearch","quickSearch","columnDisplay"],"quick-search-placeholder":r(n)("Quick search placeholder",{fields:"ID"})},null,8,["quick-search-placeholder"]),t(f),t(h)])}}});export{L as default};
