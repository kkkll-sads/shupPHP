import{B as T,am as $,b as j,w as K,I as s,Z as y,O as g,D as u,P as a,_ as w,G as n,F as R,u as e,a0 as W,U as F,a9 as A,H as r,$ as V,X as v,C as G}from"./vue-BMJJ5Kg4.js";import{v as H,e as O}from"./index-BHof7fb5.js";import{F as p}from"./index-BuGVnaur.js";const P={class:"title"},X={class:"dialog-footer"},Q=T({__name:"popupForm",setup(Z){const o=$("baTable"),{t:d}=H.useI18n(),k=O(),c=j();K(()=>{var m;return(m=o.form.items)==null?void 0:m.is_physical},m=>{m==="1"&&o.form.items&&(o.form.items.is_card_product="0"),m==="0"&&o.form.items&&!o.form.items.is_card_product&&(o.form.items.is_card_product="0")});const q={name:[{required:!0,message:"商品名称不能为空",trigger:"blur"}],price:[{required:!0,message:"商品价格不能为空",trigger:"change"}],score_price:[{required:!0,message:"积分价格不能为空",trigger:"change"}],stock:[{required:!0,message:"库存数量不能为空",trigger:"change"}],purchase_type:[{required:!0,message:"购买方式不能为空",trigger:"change"}],is_physical:[{required:!0,message:"商品类型不能为空",trigger:"change"}],status:[{required:!0,message:"状态不能为空",trigger:"change"}]};return(m,t)=>{const _=s("el-input"),i=s("el-form-item"),f=s("el-input-number"),z=s("el-alert"),B=s("el-form"),D=s("el-scrollbar"),U=s("el-button"),S=s("el-dialog"),E=y("drag"),I=y("zoom"),N=y("loading");return u(),g(S,{class:"ba-operate-dialog","close-on-click-modal":!1,"destroy-on-close":!0,"model-value":["Add","Edit"].includes(e(o).form.operate),onClose:e(o).toggleForm},{header:a(()=>[w((u(),G("div",P,[V(v(e(o).form.operate?e(d)(String(e(o).form.operate)):""),1)])),[[E,[".ba-operate-dialog",".el-dialog__header"]],[I,".ba-operate-dialog"]])]),footer:a(()=>[n("div",X,[r(U,{onClick:e(o).toggleForm},{default:a(()=>[V(v(e(d)("Cancel")),1)]),_:1},8,["onClick"]),r(U,{type:"primary",onClick:t[14]||(t[14]=b=>e(o).onSubmit(c.value))},{default:a(()=>[V(v(e(d)("Confirm")),1)]),_:1})])]),default:a(()=>[w((u(),g(D,{class:"ba-table-form-scrollbar"},{default:a(()=>{var b,x,C,h;return[n("div",{class:W(["ba-operate-form","ba-"+e(o).form.operate+"-form"]),style:R((x=(b=e(k))==null?void 0:b.layout)!=null&&x.shrink?"":"width: calc(100% - "+(e(o).form.labelWidth||160)/2+"px)")},[e(o).form.loading?F("",!0):(u(),g(B,{key:0,ref_key:"formRef",ref:c,onKeyup:t[13]||(t[13]=A(l=>e(o).onSubmit(c.value),["enter"])),model:e(o).form.items,"label-position":(h=(C=e(k))==null?void 0:C.layout)!=null&&h.shrink?"top":"right","label-width":(e(o).form.labelWidth||160)+"px",rules:q},{default:a(()=>[r(i,{prop:"name",label:"商品名称"},{default:a(()=>[r(_,{modelValue:e(o).form.items.name,"onUpdate:modelValue":t[0]||(t[0]=l=>e(o).form.items.name=l),type:"string",placeholder:"请输入商品名称"},null,8,["modelValue"])]),_:1}),r(p,{label:"商品缩略图",type:"image",modelValue:e(o).form.items.thumbnail,"onUpdate:modelValue":t[1]||(t[1]=l=>e(o).form.items.thumbnail=l),prop:"thumbnail","input-attr":{returnFullUrl:!0,limit:1}},null,8,["modelValue"]),r(p,{label:"商品图片",type:"image",modelValue:e(o).form.items.images,"onUpdate:modelValue":t[2]||(t[2]=l=>e(o).form.items.images=l),prop:"images","input-attr":{returnFullUrl:!0,limit:9}},null,8,["modelValue"]),r(i,{prop:"description",label:"商品描述"},{default:a(()=>[r(_,{modelValue:e(o).form.items.description,"onUpdate:modelValue":t[3]||(t[3]=l=>e(o).form.items.description=l),type:"textarea",rows:4,placeholder:"请输入商品详细描述"},null,8,["modelValue"])]),_:1}),r(i,{prop:"category",label:"商品分类"},{default:a(()=>[r(_,{modelValue:e(o).form.items.category,"onUpdate:modelValue":t[4]||(t[4]=l=>e(o).form.items.category=l),type:"string",placeholder:"请输入商品分类"},null,8,["modelValue"])]),_:1}),r(i,{prop:"price",label:"商品价格（余额）"},{default:a(()=>[r(f,{modelValue:e(o).form.items.price,"onUpdate:modelValue":t[5]||(t[5]=l=>e(o).form.items.price=l),min:0,step:.01,precision:2,"controls-position":"right",placeholder:"请输入商品价格"},null,8,["modelValue"]),t[15]||(t[15]=n("span",{style:{"margin-left":"10px",color:"#999"}},"元",-1))]),_:1}),r(i,{prop:"score_price",label:"积分价格"},{default:a(()=>[r(f,{modelValue:e(o).form.items.score_price,"onUpdate:modelValue":t[6]||(t[6]=l=>e(o).form.items.score_price=l),min:0,"controls-position":"right",placeholder:"请输入积分价格"},null,8,["modelValue"]),t[16]||(t[16]=n("span",{style:{"margin-left":"10px",color:"#999"}},"积分",-1))]),_:1}),r(i,{prop:"stock",label:"库存数量"},{default:a(()=>[r(f,{modelValue:e(o).form.items.stock,"onUpdate:modelValue":t[7]||(t[7]=l=>e(o).form.items.stock=l),min:0,"controls-position":"right",placeholder:"请输入库存数量"},null,8,["modelValue"])]),_:1}),r(p,{label:"购买方式",modelValue:e(o).form.items.purchase_type,"onUpdate:modelValue":t[8]||(t[8]=l=>e(o).form.items.purchase_type=l),type:"radio",prop:"purchase_type","input-attr":{border:!0,content:{money:"余额购买",score:"积分兑换",both:"两者都可"}}},null,8,["modelValue"]),r(p,{label:"商品类型",modelValue:e(o).form.items.is_physical,"onUpdate:modelValue":t[9]||(t[9]=l=>e(o).form.items.is_physical=l),type:"radio",prop:"is_physical","input-attr":{border:!0,content:{1:"实物商品",0:"虚拟商品"}}},null,8,["modelValue"]),e(o).form.items.is_physical==="0"?(u(),g(p,{key:0,label:"是否卡密商品",modelValue:e(o).form.items.is_card_product,"onUpdate:modelValue":t[10]||(t[10]=l=>e(o).form.items.is_card_product=l),type:"radio",prop:"is_card_product","input-attr":{border:!0,content:{0:"否",1:"是"}}},{append:a(()=>[r(z,{type:"info",closable:!1,style:{"margin-top":"5px"}},{title:a(()=>t[17]||(t[17]=[n("span",{style:{"font-size":"12px"}},"卡密商品：管理员填写备注后订单自动标记为已发货",-1)])),_:1})]),_:1},8,["modelValue"])):F("",!0),r(p,{label:"状态",modelValue:e(o).form.items.status,"onUpdate:modelValue":t[11]||(t[11]=l=>e(o).form.items.status=l),type:"radio",prop:"status","input-attr":{border:!0,content:{1:e(d)("Enable"),0:e(d)("Disable")}}},null,8,["modelValue","input-attr"]),r(i,{prop:"sort",label:"排序"},{default:a(()=>[r(f,{modelValue:e(o).form.items.sort,"onUpdate:modelValue":t[12]||(t[12]=l=>e(o).form.items.sort=l),min:0,max:9999,"controls-position":"right",placeholder:"请输入排序值"},null,8,["modelValue"]),t[18]||(t[18]=n("span",{style:{"margin-left":"10px",color:"#999"}},"数值越大越靠前",-1))]),_:1})]),_:1},8,["model","label-position","label-width"]))],6)]}),_:1})),[[N,e(o).form.loading]])]),_:1},8,["model-value","onClose"])}}});export{Q as _};
