import{B as N,aa as R,am as S,a as T,I as s,Z as m,O as p,D as i,P as l,_ as c,G as u,F as V,u as o,a0 as U,U as W,a9 as Z,H as r,$ as d,X as w,C as h}from"./vue-_nkvHh4F.js";import{b as x}from"./validate-BKCUlVTv.js";import{e as q,_ as K}from"./index-DNBbsmjl.js";const P={class:"title"},j=N({__name:"popupForm",setup(G){const g=q(),f=R("formRef"),t=S("baTable"),C=T({code:[x({name:"required",title:"邀请码"}),{validator:(_,e,n)=>e?/^[a-zA-Z0-9]+$/.test(e)?n():n(new Error("邀请码格式不正确，仅允许字母和数字")):n(new Error("请输入邀请码")),trigger:"blur"}],status:[x({name:"required",title:"状态"})]}),k=_=>{const e=_.replace(/[^a-zA-Z0-9]/g,"");t.form.items&&(t.form.items.code=e)};return(_,e)=>{const n=s("el-input"),b=s("el-form-item"),v=s("el-radio"),z=s("el-radio-group"),I=s("el-form"),B=s("el-scrollbar"),y=s("el-button"),D=s("el-dialog"),F=m("drag"),$=m("zoom"),A=m("loading"),E=m("blur");return i(),p(D,{class:"ba-operate-dialog","close-on-click-modal":!1,"destroy-on-close":!0,"model-value":["Add","Edit"].includes(o(t).form.operate),onClose:o(t).toggleForm},{header:l(()=>[c((i(),h("div",P,[d(w(o(t).form.operate==="Add"?"添加":"编辑"),1)])),[[F,[".ba-operate-dialog",".el-dialog__header"]],[$,".ba-operate-dialog"]])]),footer:l(()=>[u("div",{style:V("width: calc(100% - "+o(t).form.labelWidth/1.8+"px)")},[r(y,{onClick:e[4]||(e[4]=a=>o(t).toggleForm(""))},{default:l(()=>e[10]||(e[10]=[d("取消")])),_:1}),c((i(),p(y,{loading:o(t).form.submitLoading,onClick:e[5]||(e[5]=a=>o(t).onSubmit(o(f))),type:"primary"},{default:l(()=>[d(w(o(t).form.operateIds&&o(t).form.operateIds.length>1?"保存并编辑下一条":"保存"),1)]),_:1},8,["loading"])),[[E]])],4)]),default:l(()=>[c((i(),p(B,{class:"ba-table-form-scrollbar"},{default:l(()=>[u("div",{class:U(["ba-operate-form","ba-"+o(t).form.operate+"-form"]),style:V(o(g).layout.shrink?"":"width: calc(100% - "+o(t).form.labelWidth/2+"px)")},[o(t).form.loading?W("",!0):(i(),p(I,{key:0,ref_key:"formRef",ref:f,onKeyup:e[3]||(e[3]=Z(a=>o(t).onSubmit(o(f)),["enter"])),model:o(t).form.items,"label-position":o(g).layout.shrink?"top":"right","label-width":o(t).form.labelWidth+"px",rules:C},{default:l(()=>[r(b,{prop:"code",label:"邀请码"},{default:l(()=>[r(n,{modelValue:o(t).form.items.code,"onUpdate:modelValue":e[0]||(e[0]=a=>o(t).form.items.code=a),type:"text",maxlength:"20",placeholder:"请输入邀请码",onInput:k},null,8,["modelValue"]),e[6]||(e[6]=u("div",{class:"form-tip"},"仅允许字母和数字",-1))]),_:1}),r(b,{prop:"status",label:"状态"},{default:l(()=>[r(z,{modelValue:o(t).form.items.status,"onUpdate:modelValue":e[1]||(e[1]=a=>o(t).form.items.status=a)},{default:l(()=>[r(v,{label:1,border:""},{default:l(()=>e[7]||(e[7]=[d("启用")])),_:1}),r(v,{label:0,border:""},{default:l(()=>e[8]||(e[8]=[d("禁用")])),_:1})]),_:1},8,["modelValue"]),e[9]||(e[9]=u("div",{class:"form-tip"},"禁用状态的邀请码将无法注册",-1))]),_:1}),r(b,{prop:"remark",label:"备注"},{default:l(()=>[r(n,{modelValue:o(t).form.items.remark,"onUpdate:modelValue":e[2]||(e[2]=a=>o(t).form.items.remark=a),type:"textarea",rows:3,placeholder:"请输入备注信息（可选）",maxlength:"255","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","label-position","label-width","rules"]))],6)]),_:1})),[[A,o(t).form.loading]])]),_:1},8,["model-value","onClose"])}}}),X=K(j,[["__scopeId","data-v-47999e0f"]]);export{X as default};
