import{B as N,b as x,a as S,l as E,I as r,Z as M,C as R,D as m,H as l,P as t,_ as T,O as w,U as h,G as s,X as o,u as U,aK as q,$ as C,a1 as y}from"./vue-BMJJ5Kg4.js";import{c as V,_ as z}from"./index-DRv2sWQF.js";const F={class:"power-weight-config"},G={class:"card-header"},I={class:"card-actions"},O={class:"rate-display"},A={class:"rate-text"},H={class:"rate-formula"},K={class:"example-box"},L={class:"example-item"},X={class:"example-value"},Z={class:"example-item"},$={class:"example-value"},j={class:"example-item"},J={class:"example-value"},Q={class:"example-item",style:{"margin-top":"10px","padding-top":"10px","border-top":"1px solid var(--el-border-color-light)"}},Y={class:"example-value"},ee={class:"example-item"},se={class:"example-value"},ae=N({__name:"PowerWeightConfig",setup(te){const d=x(!1),u=x(!1),a=S({power_base:0,weight_base:0}),i=E(()=>a.power_base>0&&a.weight_base>0?a.weight_base/a.power_base:0),_=()=>{d.value=!0,V({url:"/admin/content.DrawCountConfig/powerWeightRateConfig",method:"GET"}).then(n=>{a.power_base=n.data.power_base??0,a.weight_base=n.data.weight_base??0}).finally(()=>{d.value=!1})},k=()=>{if(a.power_base<=0){y.error("基准算力必须大于0");return}if(a.weight_base<=0){y.error("基准权重必须大于0");return}u.value=!0,V({url:"/admin/content.DrawCountConfig/powerWeightRateConfig",method:"POST",data:{power_base:a.power_base,weight_base:a.weight_base}},{showSuccessMessage:!0}).then(()=>{_()}).finally(()=>{u.value=!1})},c=n=>{if(i.value<=0)return"0";const e=n*i.value;return Math.floor(e).toString()},g=n=>i.value<=0?"0.00":(n/i.value).toFixed(2);return _(),(n,e)=>{const b=r("el-button"),D=r("el-alert"),p=r("el-form-item"),v=r("el-input-number"),B=r("el-form"),P=r("el-card"),W=M("loading");return m(),R("div",F,[l(P,{class:"config-card",shadow:"hover"},{header:t(()=>[s("div",G,[e[4]||(e[4]=s("span",{class:"card-title"},"算力权重比例配置",-1)),s("div",I,[l(b,{size:"small",onClick:_,loading:d.value,icon:U(q)},{default:t(()=>e[2]||(e[2]=[C("刷新")])),_:1},8,["loading","icon"]),l(b,{size:"small",type:"primary",onClick:k,loading:u.value},{default:t(()=>e[3]||(e[3]=[C("保存")])),_:1},8,["loading"])])])]),default:t(()=>[T((m(),w(B,{model:a,"label-width":"180px"},{default:t(()=>[l(p,{label:"配置说明"},{default:t(()=>[l(D,{type:"info",closable:!1,"show-icon":""},{default:t(()=>e[5]||(e[5]=[s("div",null,"设置算力与权重的兑换比例",-1),s("div",{class:"alert-tip"},"分别设置基准算力和基准权重，系统会自动计算比例",-1),s("div",{class:"alert-tip"},"例如：设置 1算力 = 20权重，或 20算力 = 30权重，系统会自动计算比例",-1),s("div",{class:"alert-tip"},"此配置用于竞价购买时的权重计算，必须配置后才能使用竞价购买功能",-1)])),_:1})]),_:1}),l(p,{label:"基准算力",required:""},{default:t(()=>[l(v,{modelValue:a.power_base,"onUpdate:modelValue":e[0]||(e[0]=f=>a.power_base=f),min:.01,max:1e4,step:.1,precision:2,style:{width:"200px"}},null,8,["modelValue"]),e[6]||(e[6]=s("span",{class:"form-tip"},"设置基准算力值",-1))]),_:1}),l(p,{label:"基准权重",required:""},{default:t(()=>[l(v,{modelValue:a.weight_base,"onUpdate:modelValue":e[1]||(e[1]=f=>a.weight_base=f),min:1,max:1e6,step:1,precision:0,style:{width:"200px"}},null,8,["modelValue"]),e[7]||(e[7]=s("span",{class:"form-tip"},"设置基准权重值",-1))]),_:1}),a.power_base>0&&a.weight_base>0?(m(),w(p,{key:0,label:"计算出的比例"},{default:t(()=>[s("div",O,[s("span",A,o(a.power_base)+" 算力 = "+o(a.weight_base)+" 权重",1),s("span",H,"（1算力 = "+o(i.value.toFixed(2))+"权重）",1)])]),_:1})):h("",!0),i.value>0?(m(),w(p,{key:1,label:"换算示例"},{default:t(()=>[s("div",K,[s("div",L,[e[8]||(e[8]=s("span",{class:"example-label"},"1 算力",-1)),e[9]||(e[9]=s("span",{class:"example-arrow"},"→",-1)),s("span",X,o(c(1))+" 权重",1)]),s("div",Z,[e[10]||(e[10]=s("span",{class:"example-label"},"5 算力",-1)),e[11]||(e[11]=s("span",{class:"example-arrow"},"→",-1)),s("span",$,o(c(5))+" 权重",1)]),s("div",j,[e[12]||(e[12]=s("span",{class:"example-label"},"10 算力",-1)),e[13]||(e[13]=s("span",{class:"example-arrow"},"→",-1)),s("span",J,o(c(10))+" 权重",1)]),s("div",Q,[e[14]||(e[14]=s("span",{class:"example-label"},"100 权重",-1)),e[15]||(e[15]=s("span",{class:"example-arrow"},"→",-1)),s("span",Y,o(g(100))+" 算力",1)]),s("div",ee,[e[16]||(e[16]=s("span",{class:"example-label"},"200 权重",-1)),e[17]||(e[17]=s("span",{class:"example-arrow"},"→",-1)),s("span",se,o(g(200))+" 算力",1)])])]),_:1})):h("",!0)]),_:1},8,["model"])),[[W,d.value]])]),_:1})])}}}),ne=z(ae,[["__scopeId","data-v-cb50a322"]]);export{ne as default};
