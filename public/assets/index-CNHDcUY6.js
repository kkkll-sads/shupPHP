import{B as _,N as h,a as I,as as g,w as k,I as c,Z as w,C as D,D as t,O as i,U as p,H as s,u as l,P as u,_ as E,p as v,G as N,X as y,aZ as T,at as C}from"./vue-BMJJ5Kg4.js";import{u as P,P as S,a as x}from"./popupForm-q8Mjql_A.js";import{a5 as A}from"./index-BHof7fb5.js";import{T as B,a as G}from"./index-CY3WncDq.js";import{b as R}from"./baTable-C5P52-5P.js";import"./index-BuGVnaur.js";import"./validate-Dn7fuoi2.js";import"./index-1f7Hqibh.js";const L={class:"default-main ba-table-box"},q={class:"table-header-operate-text"},z=_({name:"user/scoreLog",__name:"index",setup(K){const m=h().query.user_id??"",r=I({userInfo:{}}),e=new R(new A(P),{column:[{type:"selection",align:"center",operator:!1},{label:"ID",prop:"id",align:"center",operator:"=",operatorPlaceholder:"ID",width:70},{label:"用户ID",prop:"user_id",align:"center",width:70},{label:"用户名",prop:"user.username",align:"center",operator:"LIKE",operatorPlaceholder:"模糊查询"},{label:"用户昵称",prop:"user.nickname",align:"center",operator:"LIKE",operatorPlaceholder:"模糊查询"},{label:"变动积分",prop:"score",align:"center",operator:"RANGE",sortable:"custom"},{label:"变动前",prop:"before",align:"center",operator:"RANGE",sortable:"custom"},{label:"变动后",prop:"after",align:"center",operator:"RANGE",sortable:"custom"},{label:"备注",prop:"memo",align:"center",operator:"LIKE",operatorPlaceholder:"模糊查询",showOverflowTooltip:!0},{label:"创建时间",prop:"create_time",align:"center",render:"datetime",sortable:"custom",operator:"RANGE",width:160}],dblClickNotEditColumn:["all"]},{defaultItems:{user_id:m,memo:""}});e.after.onSubmit=()=>{o(e.comSearch.form.user_id)},e.mount(),e.getData(),C("baTable",e);const o=g(a=>{a&&T(a)>0?x(a).then(n=>{r.userInfo=n.data.user}):r.userInfo={}},300);return o(e.comSearch.form.user_id),k(()=>e.comSearch.form.user_id,a=>{e.form.defaultItems.user_id=a,o(a)}),(a,n)=>{const d=c("el-alert"),b=c("el-button"),f=w("blur");return t(),D("div",L,[l(e).table.remark?(t(),i(d,{key:0,class:"ba-table-alert",title:l(e).table.remark,type:"info","show-icon":""},null,8,["title"])):p("",!0),s(B,{buttons:["refresh","add","comSearch","quickSearch","columnDisplay"],"quick-search-placeholder":"快速搜索：用户名/用户昵称"},{default:u(()=>[l(v)(r.userInfo)?p("",!0):E((t(),i(b,{key:0,class:"table-header-operate"},{default:u(()=>[N("span",q,y(r.userInfo.username+"(ID:"+r.userInfo.id+") 积分:"+r.userInfo.score),1)]),_:1})),[[f]])]),_:1}),s(G),s(S)])}}});export{z as default};
