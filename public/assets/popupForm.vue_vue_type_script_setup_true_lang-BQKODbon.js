import{B as T,am as q,aa as D,a as E,w as N,I as a,Z as n,O as d,D as m,P as l,_ as f,G as v,F as C,u as o,a0 as R,U as W,a9 as $,H as s,$ as _,X as c,C as j}from"./vue-_nkvHh4F.js";import{e as K,v as P}from"./index-DNBbsmjl.js";import{F as p}from"./index-B-1L-T0t.js";const X={class:"title"},L=T({__name:"popupForm",setup(Z){const g=K(),{t:r}=P.useI18n(),e=q("baTable"),u=D("formRef"),V=E({user_id:[{required:!0,message:"请选择用户",trigger:"change"}],session_id:[{required:!0,message:"请选择场次",trigger:"change"}],zone_id:[{required:!0,message:"请选择价格分区",trigger:"change"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]}),y=()=>{e.form.items.expire_time===null||e.form.items.expire_time===void 0||e.form.items.expire_time===""?e.form.items.expire_time=0:e.form.items.expire_time=parseInt(e.form.items.expire_time),e.onSubmit(u.value)};return N(()=>e.form.operate,b=>{if(b==="Edit"&&e.form.items.expire_time){const t=e.form.items.expire_time;typeof t=="string"&&(e.form.items.expire_time=parseInt(t)),e.form.items.expire_time===0&&(e.form.items.expire_time=null)}}),(b,t)=>{const k=a("el-date-picker"),h=a("el-form-item"),z=a("el-form"),w=a("el-scrollbar"),x=a("el-button"),S=a("el-dialog"),U=n("drag"),F=n("zoom"),I=n("loading"),B=n("blur");return m(),d(S,{class:"ba-operate-dialog","close-on-click-modal":!1,"model-value":["Add","Edit"].includes(o(e).form.operate),onClose:o(e).toggleForm},{header:l(()=>[f((m(),j("div",X,[_(c(o(e).form.operate?o(r)(o(e).form.operate):""),1)])),[[U,[".ba-operate-dialog",".el-dialog__header"]],[F,".ba-operate-dialog"]])]),footer:l(()=>[v("div",{style:C("width: calc(100% - "+o(e).form.labelWidth/1.8+"px)")},[s(x,{onClick:t[6]||(t[6]=i=>o(e).toggleForm(""))},{default:l(()=>[_(c(o(r)("Cancel")),1)]),_:1}),f((m(),d(x,{loading:o(e).form.submitLoading,onClick:y,type:"primary"},{default:l(()=>[_(c(o(r)("Save")),1)]),_:1},8,["loading"])),[[B]])],4)]),default:l(()=>[f((m(),d(w,{class:"ba-table-form-scrollbar"},{default:l(()=>[v("div",{class:R(["ba-operate-form","ba-"+o(e).form.operate+"-form"]),style:C(o(g).layout.shrink?"":"width: calc(100% - "+o(e).form.labelWidth/2+"px)")},[o(e).form.loading?W("",!0):(m(),d(z,{key:0,ref_key:"formRef",ref:u,onKeyup:t[5]||(t[5]=$(i=>o(e).onSubmit(o(u)),["enter"])),model:o(e).form.items,"label-position":o(g).layout.shrink?"top":"right","label-width":o(e).form.labelWidth+"px",rules:V},{default:l(()=>[s(p,{type:"remoteSelect",label:o(r)("user.consignmentCoupon.user_id"),modelValue:o(e).form.items.user_id,"onUpdate:modelValue":t[0]||(t[0]=i=>o(e).form.items.user_id=i),prop:"user_id","input-attr":{pk:"user.id",field:"user.username",remoteUrl:"/admin/user.User/index",placeholder:"请选择用户"}},null,8,["label","modelValue"]),s(p,{type:"remoteSelect",label:o(r)("user.consignmentCoupon.session_id"),modelValue:o(e).form.items.session_id,"onUpdate:modelValue":t[1]||(t[1]=i=>o(e).form.items.session_id=i),prop:"session_id","input-attr":{pk:"collection_session.id",field:"collection_session.title",remoteUrl:"/admin/CollectionSession/index",placeholder:"请选择场次"}},null,8,["label","modelValue"]),s(p,{type:"remoteSelect",label:o(r)("user.consignmentCoupon.zone_id"),modelValue:o(e).form.items.zone_id,"onUpdate:modelValue":t[2]||(t[2]=i=>o(e).form.items.zone_id=i),prop:"zone_id","input-attr":{pk:"price_zone_config.id",field:"price_zone_config.name",remoteUrl:"/admin/PriceZoneConfig/index",placeholder:"请选择价格分区"}},null,8,["label","modelValue"]),s(p,{label:o(r)("user.consignmentCoupon.status"),modelValue:o(e).form.items.status,"onUpdate:modelValue":t[3]||(t[3]=i=>o(e).form.items.status=i),type:"radio","input-attr":{border:!0,content:{0:"已使用",1:"可用"}}},null,8,["label","modelValue"]),s(h,{label:o(r)("user.consignmentCoupon.expire_time"),prop:"expire_time"},{default:l(()=>[s(k,{class:"w100",modelValue:o(e).form.items.expire_time,"onUpdate:modelValue":t[4]||(t[4]=i=>o(e).form.items.expire_time=i),type:"datetime",placeholder:"请选择过期时间","value-format":"X"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","label-position","label-width","rules"]))],6)]),_:1})),[[I,o(e).form.loading]])]),_:1},8,["model-value","onClose"])}}});export{L as _};
