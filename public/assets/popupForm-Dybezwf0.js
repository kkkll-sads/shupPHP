import{B as P,aa as z,am as N,a as R,w as Y,I as i,Z as y,O as u,D as n,P as m,_,G as E,F as x,u as e,a0 as K,U as s,a9 as g,H as r,a8 as C,$ as w,X as c,C as M}from"./vue-BMJJ5Kg4.js";import{b as f,r as W}from"./validate-CzjpH8Rv.js";import{F as b}from"./index-Dy1MJO1N.js";import{e as G,_ as j}from"./index-DRv2sWQF.js";import"./index-DONpsK3B.js";import"./baTable-57jWdOQZ.js";import"./index-CqVz8jMs.js";const H={class:"title"},L=P({__name:"popupForm",setup(O){const v=G(),V=z("formRef"),o=N("baTable"),k=R({username:[f({name:"required",title:"用户名"}),f({name:"account"})],nickname:[f({name:"required",title:"昵称"})],group_id:[f({name:"required",message:"请选择分组"})],email:[f({name:"email",title:"邮箱"})],mobile:[f({name:"mobile"})],password:[{validator:(p,l,a)=>{if(o.form.operate=="Add"){if(!l)return a(new Error("请输入登录密码"))}else if(!l)return a();return W(l)?a():a(new Error("请输入格式正确的密码"))},trigger:"blur"}],pay_password:[{validator:(p,l,a)=>l?/^\d{6}$/.test(l)?a():a(new Error("支付密码必须为6位数字")):a(),trigger:"blur"}]}),D=p=>{const l=p.replace(/\D/g,"");o.form.items&&(o.form.items.pay_password=l)};return Y(()=>o.form.operate,p=>{k.password[0].required=p=="Add"}),(p,l)=>{const a=i("el-input"),d=i("el-form-item"),F=i("el-date-picker"),I=i("el-form"),$=i("el-scrollbar"),U=i("el-button"),q=i("el-dialog"),B=y("drag"),T=y("zoom"),S=y("loading"),A=y("blur");return n(),u(q,{class:"ba-operate-dialog","close-on-click-modal":!1,"destroy-on-close":!0,"model-value":["Add","Edit"].includes(e(o).form.operate),onClose:e(o).toggleForm},{header:m(()=>[_((n(),M("div",H,[w(c(e(o).form.operate==="Add"?"新增":e(o).form.operate==="Edit"?"编辑":""),1)])),[[B,[".ba-operate-dialog",".el-dialog__header"]],[T,".ba-operate-dialog"]])]),footer:m(()=>[E("div",{style:x("width: calc(100% - "+e(o).form.labelWidth/1.8+"px)")},[r(U,{onClick:l[30]||(l[30]=t=>e(o).toggleForm(""))},{default:m(()=>l[32]||(l[32]=[w("取消")])),_:1}),_((n(),u(U,{loading:e(o).form.submitLoading,onClick:l[31]||(l[31]=t=>e(o).onSubmit(e(V))),type:"primary"},{default:m(()=>[w(c(e(o).form.operateIds&&e(o).form.operateIds.length>1?"保存并编辑下一条":"保存"),1)]),_:1},8,["loading"])),[[A]])],4)]),default:m(()=>[_((n(),u($,{class:"ba-table-form-scrollbar"},{default:m(()=>[E("div",{class:K(["ba-operate-form","ba-"+e(o).form.operate+"-form"]),style:x(e(v).layout.shrink?"":"width: calc(100% - "+e(o).form.labelWidth/2+"px)")},[e(o).form.loading?s("",!0):(n(),u(I,{key:0,ref_key:"formRef",ref:V,onKeyup:l[29]||(l[29]=g(t=>e(o).onSubmit(e(V)),["enter"])),model:e(o).form.items,"label-position":e(v).layout.shrink?"top":"right","label-width":e(o).form.labelWidth+"px",rules:k},{default:m(()=>[r(d,{prop:"username",label:"用户名"},{default:m(()=>[r(a,{modelValue:e(o).form.items.username,"onUpdate:modelValue":l[0]||(l[0]=t=>e(o).form.items.username=t),type:"string",placeholder:"请输入用户名（登录账户名）"},null,8,["modelValue"])]),_:1}),r(d,{prop:"nickname",label:"昵称"},{default:m(()=>[r(a,{modelValue:e(o).form.items.nickname,"onUpdate:modelValue":l[1]||(l[1]=t=>e(o).form.items.nickname=t),type:"string",placeholder:"请输入昵称"},null,8,["modelValue"])]),_:1}),r(b,{type:"remoteSelect",label:"分组",modelValue:e(o).form.items.group_id,"onUpdate:modelValue":l[2]||(l[2]=t=>e(o).form.items.group_id=t),prop:"group_id",placeholder:"请选择分组","input-attr":{params:{isTree:!0,search:[{field:"status",val:"1",operator:"eq"}]},field:"name",remoteUrl:"/admin/user.Group/index"}},null,8,["modelValue"]),r(b,{label:"头像",type:"image",modelValue:e(o).form.items.avatar,"onUpdate:modelValue":l[3]||(l[3]=t=>e(o).form.items.avatar=t)},null,8,["modelValue"]),r(d,{prop:"email",label:"邮箱"},{default:m(()=>[r(a,{modelValue:e(o).form.items.email,"onUpdate:modelValue":l[4]||(l[4]=t=>e(o).form.items.email=t),type:"string",placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),r(d,{prop:"mobile",label:"手机号"},{default:m(()=>[r(a,{modelValue:e(o).form.items.mobile,"onUpdate:modelValue":l[5]||(l[5]=t=>e(o).form.items.mobile=t),type:"string",placeholder:"请输入手机号"},null,8,["modelValue"])]),_:1}),e(o).form.operate=="Edit"?(n(),u(d,{key:0,label:"邀请码"},{default:m(()=>{var t;return[r(a,{"model-value":((t=e(o).form.items.inviteCode)==null?void 0:t.code)||"",type:"text",readonly:"",disabled:"",placeholder:"邀请码"},null,8,["model-value"])]}),_:1})):s("",!0),s("",!0),r(d,{label:"生日"},{default:m(()=>[r(F,{class:"w100","value-format":"YYYY-MM-DD",modelValue:e(o).form.items.birthday,"onUpdate:modelValue":l[7]||(l[7]=t=>e(o).form.items.birthday=t),type:"date",placeholder:"请选择生日"},null,8,["modelValue"])]),_:1}),e(o).form.operate=="Edit"?(n(),u(d,{key:2,label:"总余额"},{default:m(()=>[r(a,{modelValue:e(o).form.items.money,"onUpdate:modelValue":l[8]||(l[8]=t=>e(o).form.items.money=t),type:"number",step:"0.01",min:"0",placeholder:"请输入总余额"},null,8,["modelValue"])]),_:1})):s("",!0),e(o).form.operate=="Edit"?(n(),u(d,{key:3,label:"可用余额 (专项金)"},{default:m(()=>[r(a,{modelValue:e(o).form.items.balance_available,"onUpdate:modelValue":l[9]||(l[9]=t=>e(o).form.items.balance_available=t),type:"number",step:"0.01",min:"0",placeholder:"可用余额 (专项金)"},null,8,["modelValue"])]),_:1})):s("",!0),e(o).form.operate=="Edit"?(n(),u(d,{key:4,label:"可提现金额"},{default:m(()=>[r(a,{modelValue:e(o).form.items.withdrawable_money,"onUpdate:modelValue":l[10]||(l[10]=t=>e(o).form.items.withdrawable_money=t),type:"number",step:"0.01",min:"0",placeholder:"可提现金额"},null,8,["modelValue"])]),_:1})):s("",!0),e(o).form.operate=="Edit"?(n(),u(d,{key:5,label:"拓展提现"},{default:m(()=>[r(a,{modelValue:e(o).form.items.static_income,"onUpdate:modelValue":l[11]||(l[11]=t=>e(o).form.items.static_income=t),type:"number",step:"0.01",min:"0",placeholder:"拓展提现"},null,8,["modelValue"])]),_:1})):s("",!0),e(o).form.operate=="Edit"?(n(),u(d,{key:6,label:"确权金（交易手续费）"},{default:m(()=>[r(a,{modelValue:e(o).form.items.service_fee_balance,"onUpdate:modelValue":l[12]||(l[12]=t=>e(o).form.items.service_fee_balance=t),type:"number",step:"0.01",min:"0",placeholder:"确权金"},null,8,["modelValue"])]),_:1})):s("",!0),e(o).form.operate=="Edit"?(n(),u(d,{key:7,label:"寄售卷"},{default:m(()=>[r(a,{modelValue:e(o).form.items.consignment_coupon,"onUpdate:modelValue":l[13]||(l[13]=t=>e(o).form.items.consignment_coupon=t),type:"number",step:"1",min:"0",placeholder:"寄售卷"},null,8,["modelValue"])]),_:1})):s("",!0),e(o).form.operate=="Edit"?(n(),u(d,{key:8,label:"绿色算力"},{default:m(()=>[r(a,{modelValue:e(o).form.items.green_power,"onUpdate:modelValue":l[14]||(l[14]=t=>e(o).form.items.green_power=t),type:"number",step:"0.01",min:"0",placeholder:"绿色算力"},null,8,["modelValue"])]),_:1})):s("",!0),e(o).form.operate=="Edit"?(n(),u(b,{key:9,label:"旧资产状态",modelValue:e(o).form.items.old_assets_status,"onUpdate:modelValue":l[15]||(l[15]=t=>e(o).form.items.old_assets_status=t),type:"radio","input-attr":{border:!0,content:{0:"未解锁",1:"已解锁"}}},null,8,["modelValue"])):s("",!0),e(o).form.operate=="Edit"?(n(),u(d,{key:10,label:"解锁次数"},{default:m(()=>[r(a,{modelValue:e(o).form.items.old_assets_unlock_count,"onUpdate:modelValue":l[16]||(l[16]=t=>e(o).form.items.old_assets_unlock_count=t),type:"number",step:"1",min:"0",placeholder:"旧资产解锁次数"},null,8,["modelValue"])]),_:1})):s("",!0),e(o).form.operate=="Edit"?(n(),u(d,{key:11,label:"额外解锁资格"},{default:m(()=>[r(a,{modelValue:e(o).form.items.bonus_unlock_quota,"onUpdate:modelValue":l[17]||(l[17]=t=>e(o).form.items.bonus_unlock_quota=t),type:"number",step:"1",min:"0",placeholder:"管理员手动调整的额外资格"},null,8,["modelValue"])]),_:1})):s("",!0),e(o).form.operate=="Edit"?(n(),u(d,{key:12,label:"待激活确权金"},{default:m(()=>[r(a,{modelValue:e(o).form.items.pending_activation_gold,"onUpdate:modelValue":l[18]||(l[18]=t=>e(o).form.items.pending_activation_gold=t),type:"number",step:"0.01",min:"0",placeholder:"请输入待激活确权金"},null,8,["modelValue"])]),_:1})):s("",!0),e(o).form.operate=="Edit"?(n(),u(d,{key:13,label:"消费金"},{default:m(()=>[r(a,{modelValue:e(o).form.items.score,"onUpdate:modelValue":l[19]||(l[19]=t=>e(o).form.items.score=t),type:"number",step:"0.01",min:"0",placeholder:"请输入消费金"},null,8,["modelValue"])]),_:1})):s("",!0),r(d,{label:"剩余抽奖次数",prop:"draw_count"},{default:m(()=>[r(a,{modelValue:e(o).form.items.draw_count,"onUpdate:modelValue":l[20]||(l[20]=t=>e(o).form.items.draw_count=t),type:"number",min:"0",readonly:"",disabled:""},null,8,["modelValue"])]),_:1}),r(b,{label:"实名状态",modelValue:e(o).form.items.real_name_status,"onUpdate:modelValue":l[21]||(l[21]=t=>e(o).form.items.real_name_status=t),type:"radio","input-attr":{border:!0,content:{0:"未实名",1:"待审核",2:"已通过",3:"已拒绝"}}},null,8,["modelValue"]),r(b,{label:"用户状态",modelValue:e(o).form.items.user_type,"onUpdate:modelValue":l[22]||(l[22]=t=>e(o).form.items.user_type=t),type:"radio","input-attr":{border:!0,content:{0:"新用户",1:"普通用户",2:"交易用户"}}},null,8,["modelValue"]),r(d,{prop:"password",label:"登录密码"},{default:m(()=>[r(a,{modelValue:e(o).form.items.password,"onUpdate:modelValue":l[23]||(l[23]=t=>e(o).form.items.password=t),type:"password",autocomplete:"new-password",placeholder:e(o).form.operate=="Add"?"请输入登录密码":"不修改请留空"},null,8,["modelValue","placeholder"])]),_:1}),e(o).form.operate=="Edit"?(n(),u(d,{key:14,prop:"pay_password",label:"支付密码"},{default:m(()=>[r(a,{modelValue:e(o).form.items.pay_password,"onUpdate:modelValue":l[24]||(l[24]=t=>e(o).form.items.pay_password=t),type:"password",autocomplete:"new-password",maxlength:"6","show-word-limit":"",placeholder:"请输入6位数字支付密码，留空则不修改",onInput:D},null,8,["modelValue"])]),_:1})):s("",!0),r(d,{prop:"motto",label:"个性签名"},{default:m(()=>[r(a,{onKeyup:[l[25]||(l[25]=g(C(()=>{},["stop"]),["enter"])),l[26]||(l[26]=g(C(t=>e(o).onSubmit(e(V)),["ctrl"]),["enter"]))],modelValue:e(o).form.items.motto,"onUpdate:modelValue":l[27]||(l[27]=t=>e(o).form.items.motto=t),type:"textarea",placeholder:"请输入个性签名"},null,8,["modelValue"])]),_:1}),r(b,{label:"状态",modelValue:e(o).form.items.status,"onUpdate:modelValue":l[28]||(l[28]=t=>e(o).form.items.status=t),type:"radio","input-attr":{border:!0,content:{disable:"禁用",enable:"启用"}}},null,8,["modelValue"])]),_:1},8,["model","label-position","label-width","rules"]))],6)]),_:1})),[[S,e(o).form.loading]])]),_:1},8,["model-value","onClose"])}}}),le=j(L,[["__scopeId","data-v-24612d8d"]]);export{le as default};
