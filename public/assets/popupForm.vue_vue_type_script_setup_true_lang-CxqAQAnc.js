import{B as H,am as L,b as O,I as s,Z as x,O as u,D as i,P as r,_ as F,G as _,F as X,u as e,a0 as J,U as S,a9 as M,H as a,C as c,V as q,W as D,X as p,$ as f}from"./vue-BMJJ5Kg4.js";import{v as Q,e as Y}from"./index-BHof7fb5.js";import{b as ee}from"./index-CY3WncDq.js";const oe={class:"title"},le={key:0,style:{"margin-left":"10px",color:"#67c23a","font-size":"12px"}},te={class:"dialog-footer"},ne=H({__name:"popupForm",props:{sessions:{},zones:{}},setup(N){const g=N,o=L("baTable"),{t:b}=Q.useI18n(),y=Y(),v=O(),E=C=>{if(!o.form.items)return;const l=g.zones.find(m=>m.id===C);if(l){const m=l.min_price&&l.min_price<350?350:l.min_price||350;o.form.items.min_price=m,o.form.items.max_price=l.max_price||500}},I={name:[{required:!0,message:"资产包名称不能为空",trigger:"blur"}],session_id:[{required:!0,message:"请选择关联场次",trigger:"change"}],zone_id:[{required:!0,message:"请选择价格分区",trigger:"change"}],status:[{required:!0,message:"状态不能为空",trigger:"change"}]};return(C,l)=>{const m=s("el-input"),n=s("el-form-item"),z=s("el-option"),k=s("el-select"),T=s("el-input-number"),W=s("el-switch"),w=s("el-radio"),j=s("el-radio-group"),K=s("el-form"),P=s("el-scrollbar"),U=s("el-button"),R=s("el-dialog"),Z=x("drag"),A=x("zoom"),G=x("loading");return i(),u(R,{class:"ba-operate-dialog","close-on-click-modal":!1,"destroy-on-close":!0,"model-value":["Add","Edit"].includes(e(o).form.operate),onClose:e(o).toggleForm},{header:r(()=>[F((i(),c("div",oe,[f(p(e(o).form.operate?e(b)(String(e(o).form.operate)):""),1)])),[[Z,[".ba-operate-dialog",".el-dialog__header"]],[A,".ba-operate-dialog"]])]),footer:r(()=>[_("div",te,[a(U,{onClick:e(o).toggleForm},{default:r(()=>[f(p(e(b)("Cancel")),1)]),_:1},8,["onClick"]),a(U,{type:"primary",onClick:l[10]||(l[10]=V=>e(o).onSubmit(v.value))},{default:r(()=>[f(p(e(b)("Confirm")),1)]),_:1})])]),default:r(()=>[F((i(),u(P,{class:"ba-table-form-scrollbar"},{default:r(()=>{var V,h,B,$;return[_("div",{class:J(["ba-operate-form","ba-"+e(o).form.operate+"-form"]),style:X((h=(V=e(y))==null?void 0:V.layout)!=null&&h.shrink?"":"width: calc(100% - "+(e(o).form.labelWidth||160)/2+"px)")},[e(o).form.loading?S("",!0):(i(),u(K,{key:0,ref_key:"formRef",ref:v,onKeyup:l[9]||(l[9]=M(t=>e(o).onSubmit(v.value),["enter"])),model:e(o).form.items,"label-position":($=(B=e(y))==null?void 0:B.layout)!=null&&$.shrink?"top":"right","label-width":(e(o).form.labelWidth||160)+"px",rules:I},{default:r(()=>[a(n,{prop:"name",label:"资产包名称"},{default:r(()=>[a(m,{modelValue:e(o).form.items.name,"onUpdate:modelValue":l[0]||(l[0]=t=>e(o).form.items.name=t),type:"text",placeholder:"请输入资产包名称，如：12月27日1000元精选包",maxlength:"100","show-word-limit":""},null,8,["modelValue"])]),_:1}),a(n,{prop:"session_id",label:"关联场次"},{default:r(()=>[a(k,{modelValue:e(o).form.items.session_id,"onUpdate:modelValue":l[1]||(l[1]=t=>e(o).form.items.session_id=t),placeholder:"请选择关联场次",filterable:"",style:{width:"100%"}},{default:r(()=>[(i(!0),c(q,null,D(g.sessions,t=>(i(),u(z,{key:t.id,label:t.title,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(n,{prop:"zone_id",label:"关联分区（价格范围）"},{default:r(()=>{var t;return[a(k,{modelValue:e(o).form.items.zone_id,"onUpdate:modelValue":l[2]||(l[2]=d=>e(o).form.items.zone_id=d),placeholder:"请选择价格分区",filterable:"",style:{width:"100%"},onChange:E},{default:r(()=>[(i(!0),c(q,null,D(g.zones,d=>(i(),u(z,{key:d.id,label:`${d.name} (${d.min_price||350}-${d.max_price}元)`,value:d.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),(t=e(o).form.items)!=null&&t.min_price?(i(),c("span",le," 价格范围："+p(e(o).form.items.min_price)+" - "+p(e(o).form.items.max_price)+" 元 ",1)):S("",!0)]}),_:1}),a(n,{prop:"description",label:"资产包描述"},{default:r(()=>[a(m,{modelValue:e(o).form.items.description,"onUpdate:modelValue":l[3]||(l[3]=t=>e(o).form.items.description=t),type:"textarea",rows:3,placeholder:"请输入资产包描述（可选）"},null,8,["modelValue"])]),_:1}),a(n,{prop:"asset_anchor",label:"资产锚定"},{default:r(()=>[a(m,{modelValue:e(o).form.items.asset_anchor,"onUpdate:modelValue":l[4]||(l[4]=t=>e(o).form.items.asset_anchor=t),type:"text",placeholder:"请输入资产锚定信息（如：古董、艺术品等），将同步到藏品"},null,8,["modelValue"])]),_:1}),a(n,{prop:"cover_image",label:"封面图片"},{default:r(()=>[a(ee,{modelValue:e(o).form.items.cover_image,"onUpdate:modelValue":l[5]||(l[5]=t=>e(o).form.items.cover_image=t),type:"image",limit:1},null,8,["modelValue"])]),_:1}),a(n,{prop:"item_count",label:"藏品数量"},{default:r(()=>[a(T,{modelValue:e(o).form.items.item_count,"onUpdate:modelValue":l[6]||(l[6]=t=>e(o).form.items.item_count=t),min:0,max:1e4,placeholder:"自动生成的藏品数量",style:{width:"200px"}},null,8,["modelValue"]),l[11]||(l[11]=_("span",{style:{"margin-left":"10px",color:"#999","font-size":"12px"}}," 创建时自动生成藏品，价格在分区范围内随机（最低350元） ",-1))]),_:1}),a(n,{prop:"is_default",label:"设为默认"},{default:r(()=>[a(W,{modelValue:e(o).form.items.is_default,"onUpdate:modelValue":l[7]||(l[7]=t=>e(o).form.items.is_default=t),"active-value":1,"inactive-value":0,"active-text":"是","inactive-text":"否"},null,8,["modelValue"]),l[12]||(l[12]=_("span",{style:{"margin-left":"10px",color:"#999","font-size":"12px"}}," 默认包用于用户寄售时自动归类 ",-1))]),_:1}),a(n,{prop:"status",label:"状态"},{default:r(()=>[a(j,{modelValue:e(o).form.items.status,"onUpdate:modelValue":l[8]||(l[8]=t=>e(o).form.items.status=t)},{default:r(()=>[a(w,{value:1,border:""},{default:r(()=>l[13]||(l[13]=[f("启用")])),_:1}),a(w,{value:0,border:""},{default:r(()=>l[14]||(l[14]=[f("禁用")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","label-position","label-width"]))],6)]}),_:1})),[[G,e(o).form.loading]])]),_:1},8,["model-value","onClose"])}}});export{ne as _};
