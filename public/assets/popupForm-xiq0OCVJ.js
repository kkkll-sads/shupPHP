import{v as H,_ as L}from"./index-BHof7fb5.js";import{B as O,am as X,b as Z,I as s,Z as v,O as u,D as c,P as t,_ as D,G as f,a0 as A,u as l,H as o,U as F,$ as n,X as d,C as w}from"./vue-BMJJ5Kg4.js";const J={class:"title"},K={key:0},M={key:1},Q={class:"dialog-footer"},W=O({__name:"popupForm",setup(Y){const a=X("baTable"),{t:k}=H.useI18n(),x=Z(),I=m=>({pending:"待支付",paid:"已支付",completed:"已完成",cancelled:"已取消",refunded:"已退款"})[m]||m,T=m=>({pending:"info",paid:"warning",completed:"success",cancelled:"info",refunded:"danger"})[m]||"",g=m=>!m||m===0?"-":new Date(m*1e3).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1});return(m,r)=>{const _=s("el-descriptions-item"),y=s("el-tag"),B=s("el-descriptions"),h=s("el-card"),S=s("el-image"),p=s("el-table-column"),z=s("el-table"),b=s("el-option"),E=s("el-select"),C=s("el-form-item"),U=s("el-input"),j=s("el-form"),P=s("el-scrollbar"),V=s("el-button"),R=s("el-dialog"),$=v("drag"),q=v("zoom"),G=v("loading");return c(),u(R,{class:"ba-operate-dialog","close-on-click-modal":!1,"destroy-on-close":!0,"model-value":["Edit"].includes(l(a).form.operate),onClose:l(a).toggleForm,width:"70%"},{header:t(()=>[D((c(),w("div",J,r[3]||(r[3]=[n(" 订单详情 ")]))),[[$,[".ba-operate-dialog",".el-dialog__header"]],[q,".ba-operate-dialog"]])]),footer:t(()=>[f("div",Q,[o(V,{onClick:l(a).toggleForm},{default:t(()=>[n(d(l(k)("Cancel")),1)]),_:1},8,["onClick"]),o(V,{type:"primary",onClick:r[2]||(r[2]=e=>l(a).onSubmit(x.value))},{default:t(()=>[n(d(l(k)("Confirm")),1)]),_:1})])]),default:t(()=>[D((c(),u(P,{class:"ba-table-form-scrollbar"},{default:t(()=>[f("div",{class:A(["ba-operate-form","ba-"+l(a).form.operate+"-form"])},[o(h,{class:"box-card",style:{"margin-bottom":"20px"}},{header:t(()=>r[4]||(r[4]=[f("div",{class:"card-header"},[f("span",null,"订单信息")],-1)])),default:t(()=>[o(B,{column:2,border:""},{default:t(()=>[o(_,{label:"订单号"},{default:t(()=>{var e;return[n(d((e=l(a).form.items)==null?void 0:e.order_no),1)]}),_:1}),o(_,{label:"用户ID"},{default:t(()=>{var e;return[n(d((e=l(a).form.items)==null?void 0:e.user_id),1)]}),_:1}),o(_,{label:"订单金额"},{default:t(()=>{var e,i,N;return[((e=l(a).form.items)==null?void 0:e.pay_type)==="money"?(c(),w("span",K,d(Number((i=l(a).form.items)==null?void 0:i.total_amount).toFixed(2))+"元 ",1)):(c(),w("span",M,d((N=l(a).form.items)==null?void 0:N.total_score)+"积分 ",1))]}),_:1}),o(_,{label:"支付方式"},{default:t(()=>{var e;return[((e=l(a).form.items)==null?void 0:e.pay_type)==="money"?(c(),u(y,{key:0,type:"success"},{default:t(()=>r[5]||(r[5]=[n("余额支付")])),_:1})):(c(),u(y,{key:1,type:"warning"},{default:t(()=>r[6]||(r[6]=[n("积分兑换")])),_:1}))]}),_:1}),o(_,{label:"订单状态"},{default:t(()=>{var e;return[o(y,{type:T((e=l(a).form.items)==null?void 0:e.status)},{default:t(()=>{var i;return[n(d(I((i=l(a).form.items)==null?void 0:i.status)),1)]}),_:1},8,["type"])]}),_:1}),o(_,{label:"创建时间"},{default:t(()=>{var e;return[n(d(g((e=l(a).form.items)==null?void 0:e.create_time)),1)]}),_:1}),o(_,{label:"支付时间"},{default:t(()=>{var e;return[n(d(g((e=l(a).form.items)==null?void 0:e.pay_time)),1)]}),_:1}),o(_,{label:"完成时间"},{default:t(()=>{var e;return[n(d(g((e=l(a).form.items)==null?void 0:e.complete_time)),1)]}),_:1}),o(_,{label:"用户备注",span:2},{default:t(()=>{var e;return[n(d(((e=l(a).form.items)==null?void 0:e.remark)||"无"),1)]}),_:1})]),_:1})]),_:1}),o(h,{class:"box-card",style:{"margin-bottom":"20px"}},{header:t(()=>r[7]||(r[7]=[f("div",{class:"card-header"},[f("span",null,"藏品信息")],-1)])),default:t(()=>{var e;return[o(z,{data:(e=l(a).form.items)==null?void 0:e.items,border:"",style:{width:"100%"}},{default:t(()=>[o(p,{label:"藏品图片",width:"100"},{default:t(i=>[i.row.item_image?(c(),u(S,{key:0,src:i.row.item_image,"preview-src-list":[i.row.item_image],style:{width:"60px",height:"60px"},fit:"cover"},null,8,["src","preview-src-list"])):F("",!0)]),_:1}),o(p,{prop:"item_title",label:"藏品标题"}),o(p,{label:"单价",width:"120"},{default:t(i=>[n(d(Number(i.row.price).toFixed(2))+"元 ",1)]),_:1}),o(p,{prop:"quantity",label:"数量",width:"100"}),o(p,{label:"小计",width:"120"},{default:t(i=>[n(d(Number(i.row.subtotal).toFixed(2))+"元 ",1)]),_:1}),o(p,{prop:"product_id_record",label:"产品ID记录",width:"150"})]),_:1},8,["data"])]}),_:1}),l(a).form.loading?F("",!0):(c(),u(j,{key:0,ref_key:"formRef",ref:x,model:l(a).form.items,"label-width":"120px"},{default:t(()=>[o(C,{label:"订单状态",prop:"status"},{default:t(()=>[o(E,{modelValue:l(a).form.items.status,"onUpdate:modelValue":r[0]||(r[0]=e=>l(a).form.items.status=e),placeholder:"请选择订单状态"},{default:t(()=>[o(b,{label:"待支付",value:"pending"}),o(b,{label:"已支付",value:"paid"}),o(b,{label:"已完成",value:"completed"}),o(b,{label:"已取消",value:"cancelled"}),o(b,{label:"已退款",value:"refunded"})]),_:1},8,["modelValue"])]),_:1}),o(C,{label:"管理员备注",prop:"remark"},{default:t(()=>[o(U,{modelValue:l(a).form.items.remark,"onUpdate:modelValue":r[1]||(r[1]=e=>l(a).form.items.remark=e),type:"textarea",rows:3,placeholder:"请输入管理员备注"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]))],2)]),_:1})),[[G,l(a).form.loading]])]),_:1},8,["model-value","onClose"])}}}),oe=L(W,[["__scopeId","data-v-4a93f1f3"]]);export{oe as default};
