import{v as K,T as A,_ as oo}from"./index-BHof7fb5.js";import{m as r,s as e,c as eo,f as S,b as C,j as to,k as so,i as E,p as no,e as lo,l as ao}from"./index-BeMDbhJu.js";import io from"./buy-IEfQR2PM.js";import co from"./pay-D0JG3Uv3.js";import{u as ro}from"./index-KGgu4aSr.js";import{B as uo,I as c,Z as B,C as u,D as l,H as _,u as o,P as a,_ as b,O as m,G as t,U as g,V as k,W as w,X as s,$ as I,p as mo,ai as P}from"./vue-BMJJ5Kg4.js";import"./terminal-CKfb3N9x.js";const _o={class:"goods-info"},go={class:"goods-images"},fo={class:"goods-basic"},po={class:"goods-basic-title"},Io={class:"goods-tag"},vo={class:"basic-item"},ho={class:"basic-item-title"},bo={class:"basic-item-price"},yo={class:"basic-item"},ko={class:"basic-item-title"},wo={class:"basic-item-content"},Lo={class:"basic-item"},No={class:"basic-item-title"},To={class:"basic-item-content"},Ao={key:0,class:"basic-item"},Co={class:"basic-item-title"},Do={class:"basic-item-content"},So={class:"basic-item"},Eo={class:"basic-item-title"},Bo={class:"basic-item-content"},Po={class:"basic-item"},Vo={class:"basic-item-title"},qo={class:"basic-item-content"},xo={key:1},Uo={key:1,class:"basic-item"},$o={class:"basic-item-title"},Mo={class:"basic-item-content"},Wo={class:"basic-buttons"},Ho={class:"basic-button-dropdown-span"},Fo={class:"demo-item-title"},Go={class:"demo-image"},Oo=["src"],zo={key:0,class:"goods-developer"},Ro={class:"developer-header"},jo={class:"developer-name"},Qo={class:"developer-nickname"},Xo={class:"developer-group"},Yo={key:0,class:"developer-contact"},Zo={class:"developer-info-title"},Jo={class:"contact-item"},Ko=["href"],oe={class:"developer-recommend"},ee={class:"developer-info-title"},te={key:0,class:"recommend-goods"},se=["onClick"],ne={class:"recommend-goods-title"},de={key:1,class:"data-empty"},le=["innerHTML"],ae={class:"goods-version"},ie={key:0,class:"version-timeline"},ce={class:"version-card-header"},re={class:"version-short-describe"},ue=["innerHTML"],me={key:1,class:"empty-update-log"},_e=uo({__name:"goodsInfo",setup(ge){const v={InstallNow:[r.UNINSTALLED,r.WAIT_INSTALL],continueInstallation:[r.CONFLICT_PENDING,r.DEPENDENT_WAIT_INSTALL],alreadyInstalled:[r.INSTALLED],stateSwitch:[r.INSTALLED,r.CONFLICT_PENDING,r.DEPENDENT_WAIT_INSTALL,r.DISABLE],updateButton:[r.WAIT_INSTALL,r.INSTALLED,r.DISABLE],buy:[r.UNINSTALLED]},{t:n}=K.useI18n(),V=(f,i)=>{!i||!f||window.open(f)},q=()=>{e.goodsInfo.enable?so(e.goodsInfo.uid):(e.common.disableParams={uid:e.goodsInfo.uid,state:0},E())},x=f=>{e.loading.common=!0,no(f).then(()=>{lo(),e.dialog.goodsInfo=!1}).finally(()=>{e.loading.common=!1})},U=(f,i)=>{if(!i){P.confirm(n("module.No module purchase order was found"),n("Reminder"),{confirmButtonText:n("Confirm"),cancelButtonText:n("Cancel"),type:"warning"}).then(()=>{S(!0)}).catch(()=>{});return}if(!ro().token){e.dialog.baAccount=!0;return}e.loading.common=!0,ao(f).then(N=>{N.data.state==r.DISABLE?C(f,i,!0,!0):P.confirm(n("module.You need to disable this module before updating Do you want to disable it now?"),n("Reminder"),{confirmButtonText:n("module.Disable and update"),cancelButtonText:n("Cancel"),type:"warning"}).then(()=>{e.common.disableParams={uid:f,state:0,update:1},E()}).catch(()=>{})}).finally(()=>{e.loading.common=!1})};return(f,i)=>{const L=c("el-image"),N=c("el-carousel-item"),$=c("el-carousel"),M=c("el-tag"),W=c("el-link"),H=c("el-switch"),D=c("Icon"),h=c("el-button"),F=c("el-popover"),G=c("el-dropdown-item"),O=c("el-dropdown-menu"),z=c("el-dropdown"),R=c("el-avatar"),j=c("el-card"),Q=c("el-timeline-item"),X=c("el-timeline"),Y=c("el-scrollbar"),Z=c("el-dialog"),y=B("blur"),T=B("loading");return l(),u("div",null,[_(Z,{modelValue:o(e).dialog.goodsInfo,"onUpdate:modelValue":i[6]||(i[6]=d=>o(e).dialog.goodsInfo=d),class:"goods-info-dialog",title:o(n)("module.detailed information"),width:"60%"},{default:a(()=>[b((l(),m(Y,{key:o(e).goodsInfo.uid,height:500},{default:a(()=>[t("div",_o,[t("div",go,[o(e).goodsInfo.images?(l(),m($,{key:0,height:"300","indicator-position":"outside"},{default:a(()=>[(l(!0),u(k,null,w(o(e).goodsInfo.images,(d,p)=>(l(),m(N,{class:"goods-image-item",key:p},{default:a(()=>[_(L,{fit:"contain","preview-src-list":o(e).goodsInfo.images,"preview-teleported":!0,src:d},null,8,["preview-src-list","src"])]),_:2},1024))),128))]),_:1})):g("",!0)]),t("div",fo,[t("h4",po,s(o(e).goodsInfo.title),1),t("div",Io,[(l(!0),u(k,null,w(o(e).goodsInfo.tags,(d,p)=>(l(),m(M,{key:p,type:d.type?d.type:"primary"},{default:a(()=>[I(s(d.name),1)]),_:2},1032,["type"]))),128))]),t("div",vo,[t("div",ho,s(o(n)("module.Price")),1),t("div",bo,s(typeof o(e).goodsInfo.currency_select<"u"?o(eo)(o(e).goodsInfo.present_price,o(e).goodsInfo.currency_select):"-"),1)]),t("div",yo,[t("div",ko,s(o(n)("module.Last updated")),1),t("div",wo,s(o(e).goodsInfo.updatetime?o(A)(o(e).goodsInfo.updatetime):"-"),1)]),t("div",Lo,[t("div",No,s(o(n)("module.Published on")),1),t("div",To,s(o(e).goodsInfo.createtime?o(A)(o(e).goodsInfo.createtime):"-"),1)]),v.stateSwitch.includes(o(e).goodsInfo.state)?g("",!0):(l(),u("div",Ao,[t("div",Co,s(o(n)("module.amount of downloads")),1),t("div",Do,s(o(e).goodsInfo.downloads?o(e).goodsInfo.downloads:"-"),1)])),t("div",So,[t("div",Eo,s(o(n)("module.Module classification")),1),t("div",Bo,s(o(e).goodsInfo.category?o(e).goodsInfo.category.name:"-"),1)]),t("div",Po,[t("div",Vo,s(o(n)("module.Developer Homepage")),1),t("div",qo,[o(e).goodsInfo.author_url?(l(),m(W,{key:0,type:"primary",class:"developer-homepage",target:"_blank",href:o(e).goodsInfo.author_url},{default:a(()=>[I(s(o(n)("module.Click to access")),1)]),_:1},8,["href"])):(l(),u("span",xo,"-"))])]),v.stateSwitch.includes(o(e).goodsInfo.state)?(l(),u("div",Uo,[t("div",$o,s(o(n)("module.Module status")),1),t("div",Mo,[_(H,{onChange:q,loading:o(e).loading.common,disabled:o(e).loading.common,modelValue:o(e).goodsInfo.enable,"onUpdate:modelValue":i[0]||(i[0]=d=>o(e).goodsInfo.enable=d)},null,8,["loading","disabled","modelValue"])])])):g("",!0),t("div",Wo,[(!o(e).goodsInfo.purchased||v.InstallNow.includes(o(e).goodsInfo.state))&&o(e).goodsInfo.demo&&o(e).goodsInfo.demo.length>0?(l(),m(z,{key:0},{dropdown:a(()=>[_(O,null,{default:a(()=>[(l(!0),u(k,null,w(o(e).goodsInfo.demo,(d,p)=>(l(),m(G,{key:p,onClick:J=>V(d.link,!d.image),class:"basic-button-dropdown-item"},{default:a(()=>[_(F,{placement:"right",title:o(n)("module.Code scanning Preview"),trigger:"hover",disabled:!d.image,width:174},{reference:a(()=>[t("div",Fo,[_(D,{name:d.icon,size:"14",color:"var(--el-color-primary)"},null,8,["name"]),I(s(d.title),1)])]),default:a(()=>[t("div",Go,[t("img",{src:d.image,alt:""},null,8,Oo)])]),_:2},1032,["title","disabled"])]),_:2},1032,["onClick"]))),128))]),_:1})]),default:a(()=>[_(h,{class:"basic-button-demo",type:"primary"},{default:a(()=>[t("span",Ho,s(o(n)("module.View demo")),1),_(D,{color:"#ffffff",size:"16",name:"el-icon-ArrowDown"})]),_:1})]),_:1})):g("",!0),!o(e).goodsInfo.purchased&&v.buy.includes(o(e).goodsInfo.state)&&o(e).goodsInfo.type=="online"?b((l(),m(h,{key:1,onClick:i[1]||(i[1]=d=>o(S)(!1)),class:"basic-button-item",type:"danger"},{default:a(()=>[I(s(o(n)("module.Buy now")),1)]),_:1})),[[y]]):g("",!0),o(e).goodsInfo.state==o(r).UNINSTALLED&&o(e).goodsInfo.purchased||o(e).goodsInfo.state==o(r).WAIT_INSTALL?b((l(),m(h,{key:2,onClick:i[2]||(i[2]=d=>o(C)(o(e).goodsInfo.uid,o(e).goodsInfo.purchased,o(e).goodsInfo.state!=o(r).WAIT_INSTALL)),loading:o(e).loading.common,class:"basic-button-item",type:"success"},{default:a(()=>[I(s(o(n)("module.Install now")),1)]),_:1},8,["loading"])),[[y]]):g("",!0),v.continueInstallation.includes(o(e).goodsInfo.state)?b((l(),m(h,{key:3,onClick:i[3]||(i[3]=d=>o(C)(o(e).goodsInfo.uid,o(e).goodsInfo.purchased,!1)),loading:o(e).loading.common,class:"basic-button-item",type:"success"},{default:a(()=>[I(s(o(n)("module.continue installation")),1)]),_:1},8,["loading"])),[[y]]):g("",!0),v.alreadyInstalled.includes(o(e).goodsInfo.state)?b((l(),m(h,{key:4,disabled:!0,class:"basic-button-item"},{default:a(()=>[I(s(o(n)("module.installed"))+" v"+s(o(e).goodsInfo.version),1)]),_:1})),[[y]]):g("",!0),o(e).goodsInfo.type=="local"&&!v.alreadyInstalled.includes(o(e).goodsInfo.state)?b((l(),m(h,{key:5,disabled:!0,class:"basic-button-item"},{default:a(()=>[I(s(o(n)("module.Local module"))+" v"+s(o(e).goodsInfo.version),1)]),_:1})),[[y]]):g("",!0),o(e).goodsInfo.new_version&&v.updateButton.includes(o(e).goodsInfo.state)?b((l(),m(h,{key:6,onClick:i[4]||(i[4]=d=>U(o(e).goodsInfo.uid,o(e).goodsInfo.purchased)),class:"basic-button-item",type:"success"},{default:a(()=>[I(s(o(n)("module.to update")),1)]),_:1})),[[T,o(e).loading.common],[y]]):g("",!0),v.stateSwitch.includes(o(e).goodsInfo.state)?b((l(),m(h,{key:7,onClick:i[5]||(i[5]=d=>x(o(e).goodsInfo.uid)),class:"basic-button-item",type:"danger"},{default:a(()=>[I(s(o(n)("module.uninstall")),1)]),_:1})),[[T,o(e).loading.common],[y]]):g("",!0)])]),o(mo)(o(e).goodsInfo.developer)?g("",!0):(l(),u("div",zo,[t("div",Ro,[_(R,{size:60,src:o(e).goodsInfo.developer.avatar},null,8,["src"]),t("div",jo,[t("h3",Qo,s(o(e).goodsInfo.developer.nickname),1),t("div",Xo,s(o(e).goodsInfo.developer.group?o(e).goodsInfo.developer.group:"-"),1)])]),o(e).goodsInfo.qq?(l(),u("div",Yo,[t("h4",Zo,s(o(n)("module.Contact developer")),1),t("div",Jo,[t("a",{rel:"noopener noreferrer",target:"_blank",href:"http://wpa.qq.com/msgrd?v=3&uin="+o(e).goodsInfo.qq+"&site=qq&menu=yes"},[t("span",null,"QQï¼š"+s(o(e).goodsInfo.qq),1)],8,Ko)])])):g("",!0),t("div",oe,[t("h4",ee,s(o(n)("module.Other works of developers")),1),o(e).goodsInfo.developer.goods.length>0?(l(),u("div",te,[(l(!0),u(k,null,w(o(e).goodsInfo.developer.goods,(d,p)=>(l(),u("div",{key:p,onClick:J=>o(to)(d.uid),class:"recommend-goods-item"},[_(L,{fit:"contain",class:"recommend-goods-logo",src:d.logo},null,8,["src"]),t("div",ne,s(d.title),1)],8,se))),128))])):(l(),u("div",de,s(o(n)("module.There are no more works")),1))])]))]),t("div",{class:"goods-detail ba-markdown",innerHTML:o(e).goodsInfo.detail_editor},null,8,le),t("div",ae,[t("h1",null,s(o(n)("module.Update Log")),1),o(e).goodsInfo.version_log?(l(),u("div",ie,[_(X,null,{default:a(()=>[(l(!0),u(k,null,w(o(e).goodsInfo.version_log,(d,p)=>(l(),m(Q,{key:p,timestamp:o(A)(d.createtime),placement:"top",color:p==0?"var(--el-color-success)":""},{default:a(()=>[_(j,{class:"version-card",shadow:"hover"},{header:a(()=>[t("div",ce,[t("h2",null,s(d.title),1),t("span",re,s(d.short_describe),1)])]),default:a(()=>[t("div",{class:"version-detail ba-markdown",innerHTML:d.describe?d.describe:o(n)("module.No detailed update log")},null,8,ue)]),_:2},1024)]),_:2},1032,["timestamp","color"]))),128))]),_:1})])):(l(),u("div",me,s(f.$t("module.No detailed update log")),1))])]),_:1})),[[T,o(e).loading.goodsInfo]])]),_:1},8,["modelValue","title"]),_(io),_(co)])}}}),ke=oo(_e,[["__scopeId","data-v-ca3a3389"]]);export{ke as default};
