import{b as h}from"./baTable-Cho2KrQQ.js";import{T as D,a as g}from"./index-Cl6ixW7i.js";import{_ as R}from"./popupForm.vue_vue_type_script_setup_true_lang-CD4Wft6Z.js";import{v as x,ar as p,a5 as v,as as z,c as B}from"./index-DNBbsmjl.js";import C from"./luckyDrawRecord-uQ-8CyQU.js";import T from"./luckyDrawRecord-CVJVh6PF.js";import{B as E,I as l,Z as A,C as I,D as i,O as u,U as P,H as a,u as o,P as s,G as m,_ as V,a1 as d,at as q}from"./vue-_nkvHh4F.js";import"./index-BNmCRBQg.js";const N={class:"default-main ba-table-box"},L={class:"mlr-12"},K=E({name:"content/luckyDrawRecord",__name:"index",setup($){const{t:e,locale:_}=x.useI18n();_.value==="zh-cn"?p(C,"content/luckyDrawRecord"):p(T,"content/luckyDrawRecord");const y=async()=>{var n,c;try{const t=await B({url:"/admin/content.LuckyDrawRecord/clearAll",method:"post"});console.log("清除记录响应:",t),t.code===1?(d.success(t.msg||"清除成功"),r.getData()):d.error(t.msg||"清除失败")}catch(t){console.error("清除记录错误:",t),d.error((t==null?void 0:t.msg)||((c=(n=t==null?void 0:t.response)==null?void 0:n.data)==null?void 0:c.msg)||"清除失败，请稍后重试")}},r=new h(new v("/admin/content.LuckyDrawRecord/"),{column:[{type:"selection",align:"center",width:50,operator:!1},{label:e("Id"),prop:"id",align:"center",operator:"=",operatorPlaceholder:e("Id"),width:60},{label:e("content.luckyDrawRecord.user_id"),prop:"user_id",align:"center",operator:"=",operatorPlaceholder:e("content.luckyDrawRecord.user_id"),width:100},{label:e("content.luckyDrawRecord.prize_name"),prop:"prize_name",align:"center",operator:"LIKE",operatorPlaceholder:e("Fuzzy query")},{label:e("content.luckyDrawRecord.prize_type"),prop:"prize_type",align:"center",operator:"=",width:100,render:"tag",custom:{score:"success",money:"warning",coupon:"info",item:"danger"},replaceValue:{score:e("content.luckyDrawRecord.prize_type_score"),money:e("content.luckyDrawRecord.prize_type_money"),coupon:e("content.luckyDrawRecord.prize_type_coupon"),item:e("content.luckyDrawRecord.prize_type_item")}},{label:e("content.luckyDrawRecord.prize_value"),prop:"prize_value",align:"center",operator:"=",operatorPlaceholder:e("content.luckyDrawRecord.prize_value"),width:100},{label:e("content.luckyDrawRecord.status"),prop:"status",align:"center",width:100,render:"tag",custom:{1:"warning",2:"success",0:"danger"},replaceValue:{0:e("content.luckyDrawRecord.status_revoke"),1:e("content.luckyDrawRecord.status_pending"),2:e("content.luckyDrawRecord.status_send")}},{label:e("content.luckyDrawRecord.draw_time"),prop:"draw_time",align:"center",render:"datetime",sortable:"custom",operator:"RANGE",width:160},{label:e("content.luckyDrawRecord.send_time"),prop:"send_time",align:"center",render:"datetime",width:160,show:!1},{label:e("Operate"),align:"center",width:150,render:"buttons",buttons:[{render:"basicButton",name:"edit",text:e("Edit"),type:"primary",icon:"fa fa-edit",click:n=>{r.form.items=n,r.form.operate="edit"}},{render:"confirmButton",name:"delete",text:e("Delete"),type:"danger",icon:"fa fa-trash",popconfirm:{confirmButtonText:e("Delete"),cancelButtonText:e("Cancel"),confirmButtonType:"danger",title:e("Are you sure to delete the selected record?")}}],operator:!1}]});return r.mount(),r.getData(),q("baTable",r),(n,c)=>{const t=l("el-alert"),f=l("el-button"),w=l("el-tooltip"),b=l("el-popconfirm"),k=A("blur");return i(),I("div",N,[o(r).table.remark?(i(),u(t,{key:0,class:"ba-table-alert",title:o(r).table.remark,type:"info","show-icon":""},null,8,["title"])):P("",!0),a(D,{buttons:["refresh","comSearch","quickSearch","columnDisplay","delete"],"quick-search-placeholder":o(e)("Quick search placeholder",{fields:o(e)("content.luckyDrawRecord.prize_name")+"/"+o(e)("content.luckyDrawRecord.user_id")})},{default:s(()=>[a(b,{onConfirm:y,"confirm-button-text":o(e)("Confirm"),"cancel-button-text":o(e)("Cancel"),confirmButtonType:"danger",title:"确定要清除全部抽奖记录吗？此操作不可恢复！"},{reference:s(()=>[m("div",L,[a(w,{content:"清除全部记录",placement:"top"},{default:s(()=>[V((i(),u(f,{class:"table-header-operate",type:"danger"},{default:s(()=>[a(z,{name:"fa fa-trash-o"}),c[0]||(c[0]=m("span",{class:"table-header-operate-text"},"清除全部",-1))]),_:1})),[[k]])]),_:1})])]),_:1},8,["confirm-button-text","cancel-button-text"])]),_:1},8,["quick-search-placeholder"]),a(g),a(R)])}}});export{K as default};
