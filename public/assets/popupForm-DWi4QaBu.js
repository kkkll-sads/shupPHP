import{v as M,_ as Q}from"./index-DRv2sWQF.js";import{B as W,am as Y,b as ee,l as E,I as p,Z as z,O as d,D as r,P as t,_ as j,G as g,a0 as te,u as o,H as s,U as v,$ as m,X as n,C as _}from"./vue-BMJJ5Kg4.js";const oe={class:"title"},le={key:0},ae={key:1},se={key:2},re={key:0},ie={key:1},ne={key:2},me={key:0},de={key:1},pe={key:2},ue={key:0},_e={key:0},fe={key:1},ce={key:1},ye={class:"dialog-footer"},be=W({__name:"popupForm",setup(ge){const e=Y("baTable"),{t:B}=M.useI18n(),I=ee(),C=E(()=>{var u;return(u=e.form.items)!=null&&u.items?e.form.items.items.some(a=>a.is_physical=="1"):!1}),P=E(()=>{var u;return(u=e.form.items)!=null&&u.items?e.form.items.items.some(a=>a.is_card_product=="1"):!1}),R=u=>({pending:"å¾…æ”¯ä»˜",paid:"å·²æ”¯ä»˜",shipped:"å·²å‘è´§",completed:"å·²å®Œæˆ",cancelled:"å·²å–æ¶ˆ",refunded:"å·²é€€æ¬¾"})[u]||u,$=u=>({pending:"info",paid:"warning",shipped:"primary",completed:"success",cancelled:"info",refunded:"danger"})[u]||"",N=u=>!u||u===0?"-":new Date(u*1e3).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1});return(u,a)=>{const f=p("el-descriptions-item"),b=p("el-tag"),S=p("el-descriptions"),F=p("el-card"),q=p("el-image"),k=p("el-table-column"),G=p("el-table"),w=p("el-option"),H=p("el-select"),V=p("el-form-item"),D=p("el-input"),L=p("el-alert"),O=p("el-form"),X=p("el-scrollbar"),U=p("el-button"),Z=p("el-dialog"),A=z("drag"),J=z("zoom"),K=z("loading");return r(),d(Z,{class:"ba-operate-dialog","close-on-click-modal":!1,"destroy-on-close":!0,"model-value":["Edit"].includes(o(e).form.operate),onClose:o(e).toggleForm,width:"70%"},{header:t(()=>[j((r(),_("div",oe,a[5]||(a[5]=[m(" è®¢å•è¯¦æƒ… ")]))),[[A,[".ba-operate-dialog",".el-dialog__header"]],[J,".ba-operate-dialog"]])]),footer:t(()=>[g("div",ye,[s(U,{onClick:o(e).toggleForm},{default:t(()=>[m(n(o(B)("Cancel")),1)]),_:1},8,["onClick"]),s(U,{type:"primary",onClick:a[4]||(a[4]=T=>o(e).onSubmit(I.value))},{default:t(()=>[m(n(o(B)("Confirm")),1)]),_:1})])]),default:t(()=>[j((r(),d(X,{class:"ba-table-form-scrollbar"},{default:t(()=>{var T;return[g("div",{class:te(["ba-operate-form","ba-"+o(e).form.operate+"-form"])},[s(F,{class:"box-card",style:{"margin-bottom":"20px"}},{header:t(()=>a[6]||(a[6]=[g("div",{class:"card-header"},[g("span",null,"è®¢å•ä¿¡æ¯")],-1)])),default:t(()=>[s(S,{column:2,border:""},{default:t(()=>[s(f,{label:"è®¢å•å·"},{default:t(()=>{var l;return[m(n((l=o(e).form.items)==null?void 0:l.order_no),1)]}),_:1}),s(f,{label:"ç”¨æˆ·ID"},{default:t(()=>{var l;return[m(n((l=o(e).form.items)==null?void 0:l.user_id),1)]}),_:1}),s(f,{label:"è®¢å•é‡‘é¢"},{default:t(()=>{var l,i,c,y,h,x;return[((l=o(e).form.items)==null?void 0:l.pay_type)==="money"?(r(),_("span",le,n(Number((i=o(e).form.items)==null?void 0:i.total_amount).toFixed(2))+"å…ƒ ",1)):((c=o(e).form.items)==null?void 0:c.pay_type)==="score"?(r(),_("span",ae,n((y=o(e).form.items)==null?void 0:y.total_score)+"æ¶ˆè´¹é‡‘ ",1)):(r(),_("span",se,n(Number((h=o(e).form.items)==null?void 0:h.total_amount).toFixed(2))+"å…ƒ + "+n((x=o(e).form.items)==null?void 0:x.total_score)+"æ¶ˆè´¹é‡‘ ",1))]}),_:1}),s(f,{label:"æ”¯ä»˜æ–¹å¼"},{default:t(()=>{var l,i;return[((l=o(e).form.items)==null?void 0:l.pay_type)==="money"?(r(),d(b,{key:0,type:"success"},{default:t(()=>a[7]||(a[7]=[m("ä½™é¢æ”¯ä»˜")])),_:1})):((i=o(e).form.items)==null?void 0:i.pay_type)==="score"?(r(),d(b,{key:1,type:"warning"},{default:t(()=>a[8]||(a[8]=[m("æ¶ˆè´¹é‡‘æ”¯ä»˜")])),_:1})):(r(),d(b,{key:2,type:"info"},{default:t(()=>a[9]||(a[9]=[m("ç»„åˆæ”¯ä»˜")])),_:1}))]}),_:1}),s(f,{label:"è®¢å•çŠ¶æ€"},{default:t(()=>{var l;return[s(b,{type:$((l=o(e).form.items)==null?void 0:l.status)},{default:t(()=>{var i;return[m(n(R((i=o(e).form.items)==null?void 0:i.status)),1)]}),_:1},8,["type"])]}),_:1}),s(f,{label:"åˆ›å»ºæ—¶é—´"},{default:t(()=>{var l;return[m(n(N((l=o(e).form.items)==null?void 0:l.create_time)),1)]}),_:1}),s(f,{label:"æ”¯ä»˜æ—¶é—´"},{default:t(()=>{var l;return[m(n(N((l=o(e).form.items)==null?void 0:l.pay_time)),1)]}),_:1}),s(f,{label:"å‘è´§æ—¶é—´"},{default:t(()=>{var l;return[m(n(N((l=o(e).form.items)==null?void 0:l.ship_time)),1)]}),_:1}),s(f,{label:"ç”¨æˆ·å¤‡æ³¨",span:2},{default:t(()=>{var l;return[m(n(((l=o(e).form.items)==null?void 0:l.remark)||"æ— "),1)]}),_:1})]),_:1})]),_:1}),(T=o(e).form.items)!=null&&T.recipient_name&&C.value?(r(),d(F,{key:0,class:"box-card",style:{"margin-bottom":"20px"}},{header:t(()=>a[10]||(a[10]=[g("div",{class:"card-header"},[g("span",null,"æ”¶è´§ä¿¡æ¯")],-1)])),default:t(()=>[s(S,{column:2,border:""},{default:t(()=>[s(f,{label:"æ”¶è´§äºº"},{default:t(()=>{var l;return[m(n((l=o(e).form.items)==null?void 0:l.recipient_name),1)]}),_:1}),s(f,{label:"æ”¶è´§ç”µè¯"},{default:t(()=>{var l;return[m(n((l=o(e).form.items)==null?void 0:l.recipient_phone),1)]}),_:1}),s(f,{label:"æ”¶è´§åœ°å€",span:2},{default:t(()=>{var l;return[m(n((l=o(e).form.items)==null?void 0:l.recipient_address),1)]}),_:1})]),_:1})]),_:1})):v("",!0),s(F,{class:"box-card",style:{"margin-bottom":"20px"}},{header:t(()=>a[11]||(a[11]=[g("div",{class:"card-header"},[g("span",null,"å•†å“ä¿¡æ¯")],-1)])),default:t(()=>{var l;return[s(G,{data:(l=o(e).form.items)==null?void 0:l.items,border:"",style:{width:"100%"}},{default:t(()=>[s(k,{label:"å•†å“å›¾ç‰‡",width:"100"},{default:t(i=>[i.row.product_thumbnail?(r(),d(q,{key:0,src:i.row.product_thumbnail,"preview-src-list":[i.row.product_thumbnail],style:{width:"60px",height:"60px"},fit:"cover"},null,8,["src","preview-src-list"])):v("",!0)]),_:1}),s(k,{prop:"product_name",label:"å•†å“åç§°"}),s(k,{label:"å•†å“ç±»å‹",width:"100"},{default:t(i=>[i.row.is_physical=="1"?(r(),d(b,{key:0,type:"success"},{default:t(()=>a[12]||(a[12]=[m("å®ç‰©")])),_:1})):i.row.is_card_product=="1"?(r(),d(b,{key:1,type:"warning"},{default:t(()=>a[13]||(a[13]=[m("å¡å¯†")])),_:1})):(r(),d(b,{key:2,type:"primary"},{default:t(()=>a[14]||(a[14]=[m("è™šæ‹Ÿ")])),_:1}))]),_:1}),s(k,{label:"å•ä»·",width:"120"},{default:t(i=>{var c,y;return[((c=o(e).form.items)==null?void 0:c.pay_type)==="money"?(r(),_("span",re,n(Number(i.row.price).toFixed(2))+"å…ƒ ",1)):((y=o(e).form.items)==null?void 0:y.pay_type)==="score"?(r(),_("span",ie,n(i.row.score_price)+"æ¶ˆè´¹é‡‘ ",1)):(r(),_("span",ne,n(Number(i.row.price).toFixed(2))+"å…ƒ + "+n(i.row.score_price)+"æ¶ˆè´¹é‡‘ ",1))]}),_:1}),s(k,{prop:"quantity",label:"æ•°é‡",width:"100"}),s(k,{label:"å°è®¡",width:"120"},{default:t(i=>{var c,y;return[((c=o(e).form.items)==null?void 0:c.pay_type)==="money"?(r(),_("span",me,n(Number(i.row.subtotal).toFixed(2))+"å…ƒ ",1)):((y=o(e).form.items)==null?void 0:y.pay_type)==="score"?(r(),_("span",de,n(i.row.subtotal_score)+"æ¶ˆè´¹é‡‘ ",1)):(r(),_("span",pe,n(Number(i.row.subtotal).toFixed(2))+"å…ƒ + "+n(i.row.subtotal_score)+"æ¶ˆè´¹é‡‘ ",1))]}),_:1}),s(k,{label:"è™šæ‹Ÿäº§å“ä¿¡æ¯",width:"200"},{default:t(i=>{var c,y,h,x;return[i.row.is_physical=="0"?(r(),_("div",ue,[i.row.is_card_product=="1"?(r(),_("div",_e,[((c=o(e).form.items)==null?void 0:c.status)==="shipped"||((y=o(e).form.items)==null?void 0:y.status)==="completed"?(r(),d(b,{key:0,type:"success",effect:"dark"},{default:t(()=>a[15]||(a[15]=[m(" å·²å‘å¡ ")])),_:1})):(r(),d(b,{key:1,type:"info"},{default:t(()=>a[16]||(a[16]=[m("å¾…å‘å¡")])),_:1}))])):(r(),_("div",fe,[((h=o(e).form.items)==null?void 0:h.status)==="paid"||((x=o(e).form.items)==null?void 0:x.status)==="completed"?(r(),d(b,{key:0,type:"success",effect:"dark"},{default:t(()=>a[17]||(a[17]=[m(" å·²æˆåŠŸå……å€¼ ")])),_:1})):v("",!0)]))])):(r(),_("span",ce,"-"))]}),_:1})]),_:1},8,["data"])]}),_:1}),o(e).form.loading?v("",!0):(r(),d(O,{key:1,ref_key:"formRef",ref:I,model:o(e).form.items,"label-width":"120px"},{default:t(()=>[s(V,{label:"è®¢å•çŠ¶æ€",prop:"status"},{default:t(()=>[s(H,{modelValue:o(e).form.items.status,"onUpdate:modelValue":a[0]||(a[0]=l=>o(e).form.items.status=l),placeholder:"è¯·é€‰æ‹©è®¢å•çŠ¶æ€"},{default:t(()=>[s(w,{label:"å¾…æ”¯ä»˜",value:"pending"}),s(w,{label:"å·²æ”¯ä»˜",value:"paid"}),s(w,{label:"å·²å‘è´§",value:"shipped"}),s(w,{label:"å·²å®Œæˆ",value:"completed"}),s(w,{label:"å·²å–æ¶ˆ",value:"cancelled"}),s(w,{label:"å·²é€€æ¬¾",value:"refunded"})]),_:1},8,["modelValue"])]),_:1}),C.value?(r(),d(V,{key:0,label:"ç‰©æµå…¬å¸",prop:"shipping_company"},{default:t(()=>[s(D,{modelValue:o(e).form.items.shipping_company,"onUpdate:modelValue":a[1]||(a[1]=l=>o(e).form.items.shipping_company=l),placeholder:"è¯·è¾“å…¥ç‰©æµå…¬å¸"},null,8,["modelValue"])]),_:1})):v("",!0),C.value?(r(),d(V,{key:1,label:"ç‰©æµå•å·",prop:"shipping_no"},{default:t(()=>[s(D,{modelValue:o(e).form.items.shipping_no,"onUpdate:modelValue":a[2]||(a[2]=l=>o(e).form.items.shipping_no=l),placeholder:"è¯·è¾“å…¥ç‰©æµå•å·"},null,8,["modelValue"])]),_:1})):v("",!0),s(V,{label:"ç®¡ç†å‘˜å¤‡æ³¨",prop:"admin_remark"},{default:t(()=>{var l;return[s(D,{modelValue:o(e).form.items.admin_remark,"onUpdate:modelValue":a[3]||(a[3]=i=>o(e).form.items.admin_remark=i),type:"textarea",rows:3,placeholder:P.value?"è¯·è¾“å…¥å¡å¯†ä¿¡æ¯ï¼ˆå¡«å†™åè®¢å•å°†è‡ªåŠ¨æ ‡è®°ä¸ºå·²å‘è´§ï¼‰":"è¯·è¾“å…¥ç®¡ç†å‘˜å¤‡æ³¨"},null,8,["modelValue","placeholder"]),P.value&&((l=o(e).form.items)==null?void 0:l.status)==="paid"?(r(),d(L,{key:0,type:"warning",closable:!1,style:{"margin-top":"10px"}},{title:t(()=>a[18]||(a[18]=[g("span",{style:{"font-size":"12px"}},'ğŸ’¡ æç¤ºï¼šæ­¤è®¢å•åŒ…å«å¡å¯†å•†å“ï¼Œå¡«å†™å¤‡æ³¨ä¿¡æ¯åä¿å­˜å°†è‡ªåŠ¨æ›´æ–°ä¸º"å·²å‘è´§"çŠ¶æ€',-1)])),_:1})):v("",!0)]}),_:1})]),_:1},8,["model"]))],2)]}),_:1})),[[K,o(e).form.loading]])]),_:1},8,["model-value","onClose"])}}}),we=Q(be,[["__scopeId","data-v-57e2b1fc"]]);export{we as default};
