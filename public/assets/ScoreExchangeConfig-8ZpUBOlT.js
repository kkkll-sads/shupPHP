import{B as G,b as x,a as S,l as B,I as n,Z as N,C as T,D as _,H as l,P as o,_ as A,O as g,U as w,G as s,X as t,u as F,aK as I,$ as C,a1 as y}from"./vue-DnSQgQf0.js";import{c as h,_ as U}from"./index-BR6nH71S.js";const q={class:"score-exchange-config"},z={class:"card-header"},M={class:"card-actions"},O={class:"rate-display"},H={class:"rate-text"},K={class:"rate-formula"},L={class:"example-box"},R={class:"example-item"},X={class:"example-value"},Z={class:"example-item"},$={class:"example-value"},j={class:"example-item"},J={class:"example-value"},Q=G({__name:"ScoreExchangeConfig",setup(W){const c=x(!1),p=x(!1),a=S({score_base:0,green_power_base:0}),r=B(()=>a.score_base>0&&a.green_power_base>0?a.score_base/a.green_power_base:0),u=()=>{c.value=!0,h({url:"/admin/content.DrawCountConfig/scoreExchangeGreenPowerConfig",method:"GET"}).then(i=>{a.score_base=i.data.score_base??0,a.green_power_base=i.data.green_power_base??0}).finally(()=>{c.value=!1})},V=()=>{if(a.score_base<=0){y.error("基准消费金必须大于0");return}if(a.green_power_base<=0){y.error("基准绿色算力必须大于0");return}p.value=!0,h({url:"/admin/content.DrawCountConfig/scoreExchangeGreenPowerConfig",method:"POST",data:{score_base:a.score_base,green_power_base:a.green_power_base}},{showSuccessMessage:!0}).then(()=>{u()}).finally(()=>{p.value=!1})},m=i=>r.value<=0?"0.00":(i/r.value).toFixed(2);return u(),(i,e)=>{const b=n("el-button"),P=n("el-alert"),d=n("el-form-item"),v=n("el-input-number"),k=n("el-form"),E=n("el-card"),D=N("loading");return _(),T("div",q,[l(E,{class:"config-card",shadow:"hover"},{header:o(()=>[s("div",z,[e[4]||(e[4]=s("span",{class:"card-title"},"消费金兑换绿色算力配置",-1)),s("div",M,[l(b,{size:"small",onClick:u,loading:c.value,icon:F(I)},{default:o(()=>e[2]||(e[2]=[C("刷新")])),_:1},8,["loading","icon"]),l(b,{size:"small",type:"primary",onClick:V,loading:p.value},{default:o(()=>e[3]||(e[3]=[C("保存")])),_:1},8,["loading"])])])]),default:o(()=>[A((_(),g(k,{model:a,"label-width":"180px"},{default:o(()=>[l(d,{label:"配置说明"},{default:o(()=>[l(P,{type:"info",closable:!1,"show-icon":""},{default:o(()=>e[5]||(e[5]=[s("div",null,"设置消费金兑换绿色算力的比例",-1),s("div",{class:"alert-tip"},"分别设置基准消费金和基准绿色算力，系统会自动计算比例",-1),s("div",{class:"alert-tip"},"例如：设置 2消费金 = 1绿色算力，系统会自动计算比例",-1),s("div",{class:"alert-tip"},"用户可以通过API接口 /api/Account/exchangeScoreToGreenPower 进行兑换",-1)])),_:1})]),_:1}),l(d,{label:"基准消费金",required:""},{default:o(()=>[l(v,{modelValue:a.score_base,"onUpdate:modelValue":e[0]||(e[0]=f=>a.score_base=f),min:.01,max:1e4,step:.1,precision:2,style:{width:"200px"}},null,8,["modelValue"]),e[6]||(e[6]=s("span",{class:"form-tip"},"设置基准消费金值",-1))]),_:1}),l(d,{label:"基准绿色算力",required:""},{default:o(()=>[l(v,{modelValue:a.green_power_base,"onUpdate:modelValue":e[1]||(e[1]=f=>a.green_power_base=f),min:.01,max:1e4,step:.1,precision:2,style:{width:"200px"}},null,8,["modelValue"]),e[7]||(e[7]=s("span",{class:"form-tip"},"设置基准绿色算力值",-1))]),_:1}),a.score_base>0&&a.green_power_base>0?(_(),g(d,{key:0,label:"计算出的比例"},{default:o(()=>[s("div",O,[s("span",H,t(r.value.toFixed(2))+" 消费金 = 1 绿色算力",1),s("span",K,"（"+t(a.score_base)+" ÷ "+t(a.green_power_base)+" = "+t(r.value.toFixed(2))+"）",1)])]),_:1})):w("",!0),r.value>0?(_(),g(d,{key:1,label:"兑换示例"},{default:o(()=>[s("div",L,[s("div",R,[e[8]||(e[8]=s("span",{class:"example-label"},"100 消费金",-1)),e[9]||(e[9]=s("span",{class:"example-arrow"},"→",-1)),s("span",X,t(m(100))+" 绿色算力",1)]),s("div",Z,[e[10]||(e[10]=s("span",{class:"example-label"},"200 消费金",-1)),e[11]||(e[11]=s("span",{class:"example-arrow"},"→",-1)),s("span",$,t(m(200))+" 绿色算力",1)]),s("div",j,[e[12]||(e[12]=s("span",{class:"example-label"},"500 消费金",-1)),e[13]||(e[13]=s("span",{class:"example-arrow"},"→",-1)),s("span",J,t(m(500))+" 绿色算力",1)])])]),_:1})):w("",!0)]),_:1},8,["model"])),[[D,c.value]])]),_:1})])}}}),se=U(Q,[["__scopeId","data-v-e731b234"]]);export{se as default};
