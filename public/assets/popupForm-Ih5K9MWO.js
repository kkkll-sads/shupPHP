import{B as S,am as z,b as I,a as M,w as C,I as u,Z as w,O as v,D as g,P as i,_ as U,G as d,F as N,u as t,a0 as T,U as $,a9 as A,H as o,$ as x,C as K,X as P}from"./vue-BMJJ5Kg4.js";import{F as W}from"./index-Dy1MJO1N.js";import{e as j,_ as G}from"./index-DRv2sWQF.js";import"./index-DONpsK3B.js";import"./baTable-57jWdOQZ.js";import"./index-CqVz8jMs.js";const O={class:"title"},X={class:"ba-operate-footer"},Z=S({__name:"popupForm",setup(J){const V=j(),r=z("baTable"),f=I(),_=M({name:[{required:!0,message:"请输入活动名称",trigger:"blur"},{max:255,message:"活动名称最大长度为255个字符",trigger:"blur"}],start_time:[{required:!0,message:"请选择开始时间",trigger:"change"}],end_time:[{required:!0,message:"请选择结束时间",trigger:"change"}],fund_source:[{required:!0,message:"请输入资金来源说明",trigger:"blur"},{max:255,message:"资金来源说明最大长度为255个字符",trigger:"blur"}],sign_reward_min:[{required:!0,message:"请输入签到奖励最小金额",trigger:"blur"},{type:"number",min:0,max:9999.99,message:"最小金额范围为0-9999.99元",trigger:"change"}],sign_reward_max:[{required:!0,message:"请输入签到奖励最大金额",trigger:"blur"},{type:"number",min:0,max:9999.99,message:"最大金额范围为0-9999.99元",trigger:"change"}],invite_reward_min:[{required:!0,message:"请输入邀请奖励最小金额",trigger:"blur"},{type:"number",min:0,max:9999.99,message:"最小金额范围为0-9999.99元",trigger:"change"}],invite_reward_max:[{required:!0,message:"请输入邀请奖励最大金额",trigger:"blur"},{type:"number",min:0,max:9999.99,message:"最大金额范围为0-9999.99元",trigger:"change"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]});C(()=>{var l,e;return[(l=r.form.items)==null?void 0:l.sign_reward_min,(e=r.form.items)==null?void 0:e.sign_reward_max]},([l,e])=>{l!==void 0&&e!==void 0&&parseFloat(l)>parseFloat(e)&&(r.form.items.sign_reward_max=l)},{deep:!0}),C(()=>{var l,e;return[(l=r.form.items)==null?void 0:l.invite_reward_min,(e=r.form.items)==null?void 0:e.invite_reward_max]},([l,e])=>{l!==void 0&&e!==void 0&&parseFloat(l)>parseFloat(e)&&(r.form.items.invite_reward_max=l)},{deep:!0});const h=(l,e,n)=>{var s;const m=parseFloat(((s=r.form.items)==null?void 0:s.sign_reward_min)||0);parseFloat(e||0)<m?n(new Error("最大金额不能小于最小金额")):n()},q=(l,e,n)=>{var s;const m=parseFloat(((s=r.form.items)==null?void 0:s.invite_reward_min)||0);parseFloat(e||0)<m?n(new Error("最大金额不能小于最小金额")):n()};return _.sign_reward_max.push({validator:h,trigger:"change"}),_.invite_reward_max.push({validator:q,trigger:"change"}),(l,e)=>{const n=u("el-input"),m=u("el-form-item"),p=u("el-date-picker"),s=u("el-input-number"),D=u("el-form"),Y=u("el-scrollbar"),c=u("el-button"),R=u("el-dialog"),B=w("drag"),E=w("zoom"),H=w("loading");return g(),v(R,{class:"ba-operate-dialog","close-on-click-modal":!1,"destroy-on-close":!0,"model-value":["Add","Edit"].includes(t(r).form.operate),onClose:t(r).toggleForm},{header:i(()=>[U((g(),K("div",O,[x(P(t(r).form.operate==="Add"?"添加签到活动":t(r).form.operate==="Edit"?"编辑签到活动":""),1)])),[[B,[".ba-operate-dialog",".el-dialog__header"]],[E,".ba-operate-dialog"]])]),footer:i(()=>[d("div",X,[o(c,{onClick:t(r).toggleForm},{default:i(()=>e[19]||(e[19]=[x("取消")])),_:1},8,["onClick"]),o(c,{type:"primary",onClick:e[11]||(e[11]=b=>t(r).onSubmit(f.value)),loading:t(r).form.loading,disabled:t(r).form.loading},{default:i(()=>e[20]||(e[20]=[x(" 确定 ")])),_:1},8,["loading","disabled"])])]),default:i(()=>[U((g(),v(Y,{class:"ba-table-form-scrollbar"},{default:i(()=>{var b,y,F,k;return[d("div",{class:T(["ba-operate-form","ba-"+t(r).form.operate+"-form"]),style:N((y=(b=t(V))==null?void 0:b.layout)!=null&&y.shrink?"":"width: calc(100% - "+(t(r).form.labelWidth||160)/2+"px)")},[t(r).form.loading?$("",!0):(g(),v(D,{key:0,ref_key:"formRef",ref:f,onKeyup:e[10]||(e[10]=A(a=>t(r).onSubmit(f.value),["enter"])),model:t(r).form.items,"label-position":(k=(F=t(V))==null?void 0:F.layout)!=null&&k.shrink?"top":"right","label-width":(t(r).form.labelWidth||160)+"px",rules:_},{default:i(()=>[o(m,{prop:"name",label:"活动名称"},{default:i(()=>[o(n,{modelValue:t(r).form.items.name,"onUpdate:modelValue":e[0]||(e[0]=a=>t(r).form.items.name=a),type:"string",placeholder:"请输入活动名称",maxlength:"255","show-word-limit":""},null,8,["modelValue"])]),_:1}),o(m,{prop:"start_time",label:"开始时间"},{default:i(()=>[o(p,{class:"w100","value-format":"YYYY-MM-DD HH:mm:ss",modelValue:t(r).form.items.start_time,"onUpdate:modelValue":e[1]||(e[1]=a=>t(r).form.items.start_time=a),type:"datetime",placeholder:"请选择开始时间"},null,8,["modelValue"])]),_:1}),o(m,{prop:"end_time",label:"结束时间"},{default:i(()=>[o(p,{class:"w100","value-format":"YYYY-MM-DD HH:mm:ss",modelValue:t(r).form.items.end_time,"onUpdate:modelValue":e[2]||(e[2]=a=>t(r).form.items.end_time=a),type:"datetime",placeholder:"请选择结束时间"},null,8,["modelValue"]),e[12]||(e[12]=d("div",{class:"form-item-tip"},"活动结束时间，建议设置为较远的日期以保持活动长期有效",-1))]),_:1}),o(m,{prop:"fund_source",label:"资金来源"},{default:i(()=>[o(n,{modelValue:t(r).form.items.fund_source,"onUpdate:modelValue":e[3]||(e[3]=a=>t(r).form.items.fund_source=a),type:"string",placeholder:"请输入资金来源说明",maxlength:"255","show-word-limit":""},null,8,["modelValue"]),e[13]||(e[13]=d("div",{class:"form-item-tip"},"例如：集团公司专项营销资金",-1))]),_:1}),o(m,{prop:"sign_reward_min",label:"签到奖励最小金额（元）"},{default:i(()=>[o(s,{modelValue:t(r).form.items.sign_reward_min,"onUpdate:modelValue":e[4]||(e[4]=a=>t(r).form.items.sign_reward_min=a),min:0,max:9999.99,precision:2,step:.01,"controls-position":"right",placeholder:"请输入最小金额",style:{width:"100%"}},null,8,["modelValue"]),e[14]||(e[14]=d("div",{class:"form-item-tip"},"每日签到奖励的随机范围最小值，建议设置为0.20元",-1))]),_:1}),o(m,{prop:"sign_reward_max",label:"签到奖励最大金额（元）"},{default:i(()=>[o(s,{modelValue:t(r).form.items.sign_reward_max,"onUpdate:modelValue":e[5]||(e[5]=a=>t(r).form.items.sign_reward_max=a),min:0,max:9999.99,precision:2,step:.01,"controls-position":"right",placeholder:"请输入最大金额",style:{width:"100%"}},null,8,["modelValue"]),e[15]||(e[15]=d("div",{class:"form-item-tip"},"每日签到奖励的随机范围最大值，建议设置为0.50元",-1))]),_:1}),o(m,{prop:"invite_reward_min",label:"邀请奖励最小金额（元）"},{default:i(()=>[o(s,{modelValue:t(r).form.items.invite_reward_min,"onUpdate:modelValue":e[6]||(e[6]=a=>t(r).form.items.invite_reward_min=a),min:0,max:9999.99,precision:2,step:.01,"controls-position":"right",placeholder:"请输入最小金额",style:{width:"100%"}},null,8,["modelValue"]),e[16]||(e[16]=d("div",{class:"form-item-tip"},"邀请好友奖励的随机范围最小值，建议设置为1.50元",-1))]),_:1}),o(m,{prop:"invite_reward_max",label:"邀请奖励最大金额（元）"},{default:i(()=>[o(s,{modelValue:t(r).form.items.invite_reward_max,"onUpdate:modelValue":e[7]||(e[7]=a=>t(r).form.items.invite_reward_max=a),min:0,max:9999.99,precision:2,step:.01,"controls-position":"right",placeholder:"请输入最大金额",style:{width:"100%"}},null,8,["modelValue"]),e[17]||(e[17]=d("div",{class:"form-item-tip"},"邀请好友奖励的随机范围最大值，建议设置为2.00元",-1))]),_:1}),o(W,{label:"状态",modelValue:t(r).form.items.status,"onUpdate:modelValue":e[8]||(e[8]=a=>t(r).form.items.status=a),type:"radio",prop:"status","input-attr":{border:!0,content:{1:"启用",0:"禁用"}}},null,8,["modelValue"]),o(m,{prop:"remark",label:"备注说明"},{default:i(()=>[o(n,{modelValue:t(r).form.items.remark,"onUpdate:modelValue":e[9]||(e[9]=a=>t(r).form.items.remark=a),type:"textarea",rows:4,placeholder:"请输入备注说明",maxlength:"500","show-word-limit":""},null,8,["modelValue"]),e[18]||(e[18]=d("div",{class:"form-item-tip"},"活动的补充说明信息",-1))]),_:1})]),_:1},8,["model","label-position","label-width","rules"]))],6)]}),_:1})),[[H,t(r).form.loading]])]),_:1},8,["model-value","onClose"])}}}),ae=G(Z,[["__scopeId","data-v-e9e781e5"]]);export{ae as default};
