import{D as J,_ as O}from"./darkSwitch-BHkMWMMN.js";import{p as Y,B as F,C as L,D as a,W as j,V as B,I as h,Z as q,_ as R,u as n,O as l,P as r,H as p,U as b,$ as M,X as f,a0 as H,a as K,a3 as G,Y as X,G as k,N as Q,n as ee}from"./vue-BMJJ5Kg4.js";import{d as ne,r as te,b as Z,u as V,a as T,c as oe,s as ae,_ as A,e as se,l as re,f as le,g as ie,h as ue}from"./index-BHof7fb5.js";import{h as ce,o as P}from"./router-10MTyUr1.js";import{t as de}from"./useDark-v-GEBRtu.js";const me="/api/index/";function fe($,y){ne(()=>{if(te.currentRoute.value.meta.initialize===!1)return;const c=Z(),s=V();if(!c.isLogin()&&s.initialize||c.isLogin()&&s.userInitialize)return;const d=T();oe({url:me+"index",method:"get",params:{requiredLogin:y?1:0}}).then(t=>{ce(t.data.rules,t.data.menus),s.dataFill(t.data.site),d.setStatus(t.data.openMemberCenter),Y(t.data.userInfo)||(c.dataFill(t.data.userInfo),s.setUserInitialize(!0)),t.data.openMemberCenter||d.setLayoutMode("Disable"),s.setInitialize(!0),ae(),typeof $=="function"&&$(t)})},200)()}const pe=F({__name:"menuSub",props:{menus:{default:()=>[]},showIcon:{type:Boolean,default:!1}},setup($){const y=$,c=s=>{var d;s.path=="/"||((d=s.meta)==null?void 0:d.type)=="menu_dir"||P(s)};return(s,d)=>{const t=h("Icon"),_=h("el-sub-menu"),U=h("el-menu-item"),g=q("blur");return a(!0),L(B,null,j(y.menus,(u,D)=>{var x,C;return a(),L(B,{key:D},[n(Y)(u.children)?R((a(),l(U,{key:1,onClick:m=>n(P)(u),index:"column-"+((C=u.meta)==null?void 0:C.id),class:H(u.name.replace(/[\/]/g,"-"))},{title:r(()=>{var m;return[M(f((m=u.meta)==null?void 0:m.title),1)]}),default:r(()=>{var m;return[s.showIcon?(a(),l(t,{key:0,name:(m=u.meta)==null?void 0:m.icon,color:"var(--el-text-color-primary)"},null,8,["name"])):b("",!0)]}),_:2},1032,["onClick","index","class"])),[[g]]):R((a(),l(_,{key:0,onClick:m=>c(u),index:`column-${(x=u.meta)==null?void 0:x.id}`},{title:r(()=>{var m,S;return[s.showIcon?(a(),l(t,{key:0,name:(m=u.meta)==null?void 0:m.icon,color:"var(--el-text-color-primary)"},null,8,["name"])):b("",!0),M(" "+f((S=u.meta)==null?void 0:S.title),1)]}),default:r(()=>[p(E,{menus:u.children,"show-icon":s.showIcon},null,8,["menus","show-icon"])]),_:2},1032,["onClick","index"])),[[g]])],64)}),128)}}}),E=A(pe,[["__scopeId","data-v-46fce36e"]]),he={class:"header-user-box"},ve=["src"],_e=F({__name:"menu",props:{showIcon:{type:Boolean,default:!1}},setup($){const y=Q(),c=X(),s=se(),d=Z(),t=V(),_=T(),U=$,g=K({activeMenu:""}),u=e=>{if(e.path=="/")return g.activeMenu="index";const o=S(e);o?g.activeMenu="column-"+o:e.path.startsWith("/user")&&(g.activeMenu="user")},D=e=>{if(x(t.headNav,e)||x(_.state.navUserMenus,e)||x(_.state.viewRoutes,e)){const o=g.activeMenu;g.activeMenu="",ee(()=>{g.activeMenu=o})}},x=(e,o)=>o.indexOf("language-switch")===0||o=="theme-switch"?!0:C(e,o),C=(e,o)=>{var i,w,N;for(const v in e){if(`column-${(i=e[v].meta)==null?void 0:i.id}`==o)return((w=e[v].meta)==null?void 0:w.menu_type)=="link";if((N=e[v].children)!=null&&N.length)return C(e[v].children,o)}return!1},m=(e,o)=>{var w,N;let i=!1;for(const v in e){if((w=e[v].meta)!=null&&w.id&&e[v].path==o.fullPath)return e[v].meta.id;if(e[v].children&&((N=e[v].children)!=null&&N.length)&&(i=m(e[v].children,o),i!==!1))return i}return i},S=e=>{const o=m(t.headNav,e);if(o!==!1)return o;const i=m(_.state.navUserMenus,e);return i!==!1?i:m(_.state.viewRoutes,e)};return u(y),G(e=>{u(e)}),(e,o)=>{const i=h("Icon"),w=h("el-menu-item"),N=h("el-sub-menu"),v=h("el-menu"),z=q("blur");return a(),l(v,{ref_key:"layoutMenuRef",ref:re,"default-active":g.activeMenu,onSelect:D},{default:r(()=>[R((a(),l(w,{onClick:o[0]||(o[0]=I=>n(c).push({name:"/"})),index:"index"},{title:r(()=>[M(f(e.$t("Home")),1)]),default:r(()=>[U.showIcon?(a(),l(i,{key:0,name:"fa fa-home",color:"var(--el-text-color-primary)"})):b("",!0)]),_:1})),[[z]]),p(E,{menus:n(t).headNav,"show-icon":e.showIcon},null,8,["menus","show-icon"]),n(_).state.open?(a(),L(B,{key:0},[n(d).isLogin()?R((a(),l(N,{key:0,onClick:o[3]||(o[3]=I=>e.$attrs.mode=="vertical"?"":n(c).push({name:"user"})),index:"user-box"},{title:r(()=>[k("div",he,[k("img",{class:H(["header-user-avatar",e.$attrs.mode=="vertical"?"icon-header-user-avatar":""]),src:n(le)(n(d).avatar?n(d).avatar:"/static/images/avatar.png"),alt:""},null,10,ve),M(" "+f(n(d).nickname),1)])]),default:r(()=>[R((a(),l(w,{onClick:o[1]||(o[1]=I=>n(c).push({name:"user"})),index:"user"},{default:r(()=>[e.showIcon?(a(),l(i,{key:0,name:"fa fa-user-circle",color:"var(--el-text-color-primary)"})):b("",!0),M(" "+f(e.$t("Member Center")),1)]),_:1})),[[z]]),p(E,{menus:n(_).state.navUserMenus,"show-icon":e.showIcon},null,8,["menus","show-icon"]),p(E,{menus:n(_).state.viewRoutes,"show-icon":e.showIcon},null,8,["menus","show-icon"]),R((a(),l(w,{onClick:o[2]||(o[2]=I=>n(d).logout()),index:"user-logout"},{default:r(()=>[e.showIcon?(a(),l(i,{key:0,name:"fa fa-sign-out",color:"var(--el-text-color-primary)"})):b("",!0),M(" "+f(e.$t("Logout login")),1)]),_:1})),[[z]])]),_:1})),[[z]]):R((a(),l(w,{key:1,onClick:o[4]||(o[4]=I=>n(c).push({name:"user"})),index:"user"},{default:r(()=>[e.showIcon?(a(),l(i,{key:0,name:"fa fa-user-circle",color:"var(--el-text-color-primary)"})):b("",!0),M(" "+f(e.$t("Member Center")),1)]),_:1})),[[z]]),R((a(),l(N,{index:"language-switch",class:"language-switch"},{title:r(()=>[e.showIcon?(a(),l(i,{key:0,name:"local-lang",color:"var(--el-text-color-primary)"})):b("",!0),M(" "+f(e.$t("Language")),1)]),default:r(()=>[(a(!0),L(B,null,j(n(s).lang.langArray,I=>(a(),l(w,{onClick:be=>n(ie)(I.name),key:I.name,index:"language-switch-"+I.value,class:"language-switch"},{default:r(()=>[e.showIcon?(a(),l(i,{key:0,name:"fa fa-circle-o",color:"var(--el-text-color-primary)"})):b("",!0),M(" "+f(I.value),1)]),_:2},1032,["onClick","index"]))),128))]),_:1})),[[z]]),p(w,{index:"theme-switch",class:H(["theme-switch",e.$attrs.mode+"-theme-switch"])},{default:r(()=>[p(J,{onClick:o[5]||(o[5]=I=>n(de)())})]),_:1},8,["class"])],64)):b("",!0)]),_:1},8,["default-active"])}}}),W=A(_e,[["__scopeId","data-v-0f4fb637"]]),ge={class:"site-name"},we={class:"header-row"},ke={class:"site-name"},ye=F({__name:"header",setup($){const y=X(),c=V(),s=T();return G(()=>{s.toggleMenuExpand(!1)}),fe(),(d,t)=>{const _=h("Icon"),U=h("el-scrollbar"),g=h("el-col"),u=h("el-row"),D=h("el-drawer"),x=h("el-header");return a(),l(x,{class:"header"},{default:r(()=>[p(u,{justify:"center"},{default:r(()=>[p(g,{class:"header-row",xs:24,sm:24,md:16},{default:r(()=>[k("div",{onClick:t[0]||(t[0]=C=>n(y).push({name:"/"})),class:"header-logo"},[t[5]||(t[5]=k("img",{src:O},null,-1)),k("span",ge,f(n(c).siteName),1)]),n(s).state.menuExpand?b("",!0):(a(),L("div",{key:0,onClick:t[1]||(t[1]=C=>n(s).toggleMenuExpand(!0)),class:"user-menus-expand hidden-md-and-up"},[p(_,{name:"fa fa-indent",color:"var(--el-color-primary)",size:"20"})])),p(U,{ref_key:"layoutMenuScrollbarRef",ref:ue,class:"hidden-sm-and-down"},{default:r(()=>[p(W,{class:"frontend-header-menu",ellipsis:!1,mode:"horizontal"})]),_:1},512)]),_:1})]),_:1}),p(D,{class:"ba-aside-drawer","append-to-body":!0,modelValue:n(s).state.menuExpand,"onUpdate:modelValue":t[4]||(t[4]=C=>n(s).state.menuExpand=C),"with-header":!1,direction:"ltr",size:n(s).state.shrink?"70%":"40%"},{default:r(()=>[k("div",we,[k("div",{onClick:t[2]||(t[2]=C=>n(y).push({name:"/"})),class:"header-logo"},[t[6]||(t[6]=k("img",{src:O},null,-1)),k("span",ke,f(n(c).siteName),1)]),k("div",{onClick:t[3]||(t[3]=C=>n(s).toggleMenuExpand(!1)),class:"user-menus-expand hidden-md-and-up"},[p(_,{name:"fa fa-dedent",color:"var(--el-color-primary)",size:"20"})])]),p(W,{"show-icon":!0,mode:"vertical"})]),_:1},8,["modelValue","size"])]),_:1})}}}),ze=A(ye,[["__scopeId","data-v-47a66cae"]]),Ce={href:"http://beian.miit.gov.cn/"},Ie=F({__name:"footer",setup($){const y=V();return(c,s)=>{const d=h("el-footer");return a(),l(d,{class:"footer"},{default:r(()=>[k("div",null,[M(" Copyright @ 2020~"+f(new Date().getFullYear())+" "+f(n(y).siteName)+" "+f(c.$t("Copyright"))+" ",1),k("a",Ce,f(n(y).recordNumber),1)])]),_:1})}}}),Ue=A(Ie,[["__scopeId","data-v-ff7303bf"]]);export{Ue as F,ze as H,fe as i};
