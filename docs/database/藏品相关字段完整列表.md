# 藏品相关字段完整列表

## 一、核心表结构

### 1. ba_collection_item（藏品商品表/SPU）

| 字段名 | 类型 | 说明 | 备注 |
|--------|------|------|------|
| `id` | int unsigned | 藏品ID | 主键，自增 |
| `session_id` | int unsigned | 专场ID | 关联 ba_collection_session.id |
| `package_name` | varchar(100) | 资产包名称 | 冗余字段，用于展示 |
| `title` | varchar(255) | 藏品标题 | 必填 |
| `image` | varchar(255) | 藏品图片 | 主图URL |
| `images` | text | 藏品详情图片 | 逗号分隔的多张图片 |
| `price` | decimal(12,2) | 当前价格 | 动态价格，交易后更新 |
| `issue_price` | decimal(12,2) | 发行价 | 首次上架价格，不变 |
| `price_zone` | varchar(10) | 价格分区名称 | 如：1K区、2K区、3K区、4K区 |
| `description` | text | 藏品描述 | 详细描述 |
| `asset_anchor` | varchar(255) | 资产锚定 | 资产锚定信息 |
| `artist` | varchar(100) | 艺术家/创作者 | 创作者信息 |
| `stock` | int unsigned | 库存数量 | 官方库存 |
| `sales` | int unsigned | 销量 | 交易次数 |
| `status` | enum('0','1') | 上架状态 | 0=下架, 1=上架 |
| `is_physical` | tinyint unsigned | 是否实物 | 1=实物, 0=虚拟 |
| `sort` | int unsigned | 排序 | 倒序排列 |
| `create_time` | int unsigned | 创建时间 | Unix时间戳 |
| `update_time` | int unsigned | 更新时间 | Unix时间戳 |
| `asset_code` | varchar(50) | 确权编号 | 格式：37-DATA-XXXX-XXXXXX |
| `tx_hash` | varchar(64) | 存证指纹 | MD5哈希值 |
| `owner_id` | int | 当前持有人 | 0=系统持有 |
| `zone_id` | int unsigned | 价格分区ID | 关联 ba_price_zone_config.id，动态更新 |
| `package_id` | int unsigned | 资产包ID | 关联 ba_asset_package.id |
| `contract_no` | varchar(64) | 合约地址 | 区块链合约地址 |
| `rights_status` | varchar(32) | 确权状态 | 确权状态文本 |
| `block_height` | varchar(32) | 区块高度 | 区块链区块高度 |
| `rights_hash` | varchar(64) | 权益哈希 | 权益哈希值 |

**索引**：
- PRIMARY KEY (`id`)
- KEY `idx_item_session_id` (`session_id`)
- KEY `idx_item_status_sort` (`status`,`sort`)
- KEY `idx_price_zone` (`price_zone`)
- KEY `idx_package_id` (`package_id`)

---

### 2. ba_user_collection（用户藏品表/用户持仓）

| 字段名 | 类型 | 说明 | 备注 |
|--------|------|------|------|
| `id` | int unsigned | 记录ID | 主键，自增 |
| `user_id` | int unsigned | 用户ID | 关联 ba_user.id |
| `order_id` | int unsigned | 藏品订单ID | 关联 ba_collection_order.id |
| `order_item_id` | int unsigned | 藏品订单明细ID | 关联 ba_collection_order_item.id |
| `item_id` | int unsigned | 藏品商品ID | 关联 ba_collection_item.id |
| `title` | varchar(255) | 藏品标题 | 冗余字段，快照 |
| `image` | varchar(255) | 藏品封面图 | 冗余字段，快照 |
| `price` | decimal(12,2) | 购买单价 | 用户买入价格 |
| `buy_time` | int unsigned | 购买时间 | Unix时间戳 |
| `delivery_status` | tinyint unsigned | 提货状态 | 0=未提货, 1=已提货 |
| `consignment_status` | tinyint unsigned | 寄售状态 | 0=未寄售, 1=寄售中, 2=已售出, 3=寄售失败 |
| `is_old_asset_package` | tinyint unsigned | 是否为旧资产包 | 1=是，享有寄售优先匹配权 |
| `legacy_unlock_price` | decimal(12,2) | 旧资产解锁价快照 | 旧资产解锁时的价格 |
| `legacy_package_id` | int unsigned | 旧资产目标包ID | 旧资产解锁时指定的资产包ID |
| `mining_status` | tinyint unsigned | 矿机状态 | 0=正常, 1=矿机（锁仓） |
| `mining_start_time` | int unsigned | 转为矿机的时间 | Unix时间戳 |
| `last_dividend_time` | int unsigned | 最后一次分红时间 | Unix时间戳 |
| `create_time` | int unsigned | 创建时间 | Unix时间戳 |
| `update_time` | int unsigned | 更新时间 | Unix时间戳 |
| `auto_relist_next_day` | tinyint unsigned | 是否次日自动上架 | 1=是, 0=否 |
| `free_consign_attempts` | int unsigned | 剩余免费寄售次数 | 免费寄售次数 |
| `rights_hash` | varchar(64) | 确权哈希 | 唯一标识，优先于 item.tx_hash |
| `rights_status` | varchar(32) | 确权状态 | 确权状态文本 |
| `contract_no` | varchar(64) | 合同编号 | 合同编号 |
| `block_height` | varchar(32) | 区块高度 | 区块高度 |

**索引**：
- PRIMARY KEY (`id`)
- KEY `idx_user` (`user_id`)
- KEY `idx_item` (`item_id`)
- KEY `idx_mining_status` (`mining_status`)
- KEY `idx_mining_start_time` (`mining_start_time`)
- KEY `idx_is_old_asset_package` (`is_old_asset_package`)
- KEY `idx_rights_hash` (`rights_hash`)

---

### 3. ba_collection_consignment（藏品寄售记录表）

| 字段名 | 类型 | 说明 | 备注 |
|--------|------|------|------|
| `id` | int unsigned | 寄售ID | 主键，自增 |
| `user_id` | int unsigned | 寄售用户ID | 关联 ba_user.id（卖家） |
| `user_collection_id` | int unsigned | 用户藏品记录ID | 关联 ba_user_collection.id |
| `item_id` | int unsigned | 藏品商品ID | 关联 ba_collection_item.id |
| `package_id` | int unsigned | 归属资产包ID | 关联 ba_asset_package.id |
| `package_name` | varchar(100) | 归属资产包名称 | 冗余存储，用于展示 |
| `price` | decimal(12,2) | 寄售价格 | 卖家设定的价格 |
| `original_price` | decimal(12,2) | 卖家原购买价格 | 卖家买入时的价格 |
| `service_fee` | decimal(12,2) | 服务费 | 从确权金扣除 |
| `coupon_used` | tinyint(1) | 是否使用寄售券 | 1=使用, 0=未使用 |
| `coupon_waived` | tinyint(1) | 是否豁免寄售券 | 1=豁免, 0=未豁免 |
| `waive_type` | varchar(30) | 豁免类型 | none=未豁免, system_resend=系统重发, free_attempt=免费次数 |
| `free_relist_used` | tinyint(1) | 免费重发资格已使用 | 1=已使用, 0=未使用 |
| `coupon_id` | int | 使用的寄售券ID | 关联 ba_user_consignment_coupon.id |
| `status` | tinyint unsigned | 状态 | 1=上架中, 2=已下架, 3=已售出 |
| `create_time` | int unsigned | 创建时间 | Unix时间戳 |
| `update_time` | int unsigned | 更新时间 | Unix时间戳 |
| `session_id` | int unsigned | 场次ID | 关联 ba_collection_session.id |
| `zone_id` | int unsigned | 价格分区ID | 关联 ba_price_zone_config.id |
| `sold_time` | int unsigned | 成交时间 | Unix时间戳 |
| `sold_price` | decimal(12,2) | 成交价格快照 | 成交时的价格 |
| `service_fee_paid_at_apply` | tinyint(1) | 手续费是否申请时已付 | 1=已付, 0=未付 |
| `settle_status` | tinyint(1) | 结算状态 | 0=未结算, 1=已结算 |
| `settle_time` | int unsigned | 结算时间 | Unix时间戳 |
| `settle_rule` | varchar(50) | 结算规则 | normal=普通规则 |
| `is_legacy_snapshot` | tinyint(1) | 是否旧资产快照 | 1=是, 0=否 |
| `legacy_unlock_price_snapshot` | decimal(12,2) | 旧资产解锁价快照 | 旧资产解锁时的价格 |
| `principal_amount` | decimal(12,2) | 本金金额 | 结算时的本金 |
| `profit_amount` | decimal(12,2) | 利润金额 | 结算时的利润 |
| `payout_principal_withdrawable` | decimal(12,2) | 本金-可提现部分 | 本金中可提现的部分 |
| `payout_principal_consume` | decimal(12,2) | 本金-消费金部分 | 本金中转为消费金的部分 |
| `payout_profit_withdrawable` | decimal(12,2) | 利润-可提现部分 | 利润中可提现的部分 |
| `payout_profit_consume` | decimal(12,2) | 利润-消费金部分 | 利润中转为消费金的部分 |
| `payout_total_withdrawable` | decimal(12,2) | 总计-可提现 | 总计可提现金额 |
| `payout_total_consume` | decimal(12,2) | 总计-消费金 | 总计消费金金额 |

**索引**：
- PRIMARY KEY (`id`)
- KEY `idx_user` (`user_id`)
- KEY `idx_item` (`item_id`)
- KEY `idx_package_id` (`package_id`)
- KEY `idx_user_collection_status` (`user_collection_id`,`status`)
- KEY `idx_sold_time` (`sold_time`)
- KEY `idx_settle_status` (`settle_status`)

---

### 4. ba_collection_order（藏品订单表）

| 字段名 | 类型 | 说明 | 备注 |
|--------|------|------|------|
| `id` | int unsigned | 订单ID | 主键，自增 |
| `order_no` | varchar(64) | 订单号 | 唯一，格式：CO+时间戳+用户ID |
| `user_id` | int unsigned | 用户ID | 关联 ba_user.id（买家） |
| `total_amount` | decimal(12,2) | 订单总金额 | 订单总金额 |
| `pay_type` | enum('money','score') | 支付方式 | money=余额, score=消费金 |
| `status` | enum | 订单状态 | pending=待支付, paid=已支付, completed=已完成, cancelled=已取消, refunded=已退款 |
| `remark` | varchar(500) | 订单备注 | 订单备注信息 |
| `pay_time` | int unsigned | 付款时间 | Unix时间戳 |
| `complete_time` | int unsigned | 完成时间 | Unix时间戳 |
| `create_time` | int unsigned | 创建时间 | Unix时间戳 |
| `update_time` | int unsigned | 更新时间 | Unix时间戳 |

**索引**：
- PRIMARY KEY (`id`)
- UNIQUE KEY `idx_order_no` (`order_no`)
- KEY `idx_order_user` (`user_id`)
- KEY `idx_order_status` (`status`)

---

### 5. ba_collection_order_item（藏品订单明细表）

| 字段名 | 类型 | 说明 | 备注 |
|--------|------|------|------|
| `id` | int unsigned | 明细ID | 主键，自增 |
| `order_id` | int unsigned | 订单ID | 关联 ba_collection_order.id |
| `item_id` | int unsigned | 藏品ID | 关联 ba_collection_item.id |
| `item_title` | varchar(255) | 藏品标题 | 冗余字段，快照 |
| `item_image` | varchar(255) | 藏品图片 | 冗余字段，快照 |
| `price` | decimal(12,2) | 单价 | 购买时的单价 |
| `quantity` | int unsigned | 购买数量 | 购买数量 |
| `subtotal` | decimal(12,2) | 小计 | 单价 × 数量 |
| `product_id_record` | varchar(255) | 产品ID记录 | 如"第一天产品" |
| `create_time` | int unsigned | 创建时间 | Unix时间戳 |

**索引**：
- PRIMARY KEY (`id`)
- KEY `idx_order_id` (`order_id`)
- KEY `idx_item_id` (`item_id`)

---

### 6. ba_collection_session（藏品专场表）

| 字段名 | 类型 | 说明 | 备注 |
|--------|------|------|------|
| `id` | int unsigned | 专场ID | 主键，自增 |
| `title` | varchar(255) | 专场标题 | 专场名称 |
| `image` | varchar(255) | 专场图片 | 专场封面图 |
| `start_time` | varchar(10) | 开始时间 | 格式：HH:mm（如：08:00） |
| `end_time` | varchar(10) | 结束时间 | 格式：HH:mm（如：20:00） |
| `status` | enum('0','1') | 状态 | 0=下架, 1=上架 |
| `sort` | int unsigned | 排序 | 倒序排列 |
| `create_time` | int unsigned | 创建时间 | Unix时间戳 |
| `update_time` | int unsigned | 更新时间 | Unix时间戳 |

**索引**：
- PRIMARY KEY (`id`)
- KEY `idx_session_status_sort` (`status`,`sort`)

---

### 7. ba_collection_matching_pool（藏品撮合池表）

| 字段名 | 类型 | 说明 | 备注 |
|--------|------|------|------|
| `id` | int unsigned | 主键ID | 主键，自增 |
| `item_id` | int unsigned | 藏品ID | 关联 ba_collection_item.id |
| `session_id` | int unsigned | 时段ID | 关联 ba_collection_session.id |
| `user_id` | int unsigned | 用户ID | 关联 ba_user.id（买家） |
| `power_used` | decimal(10,2) unsigned | 消耗的算力 | 使用的绿色算力 |
| `weight` | int unsigned | 权重值 | 权重 = 算力 × 20 |
| `status` | enum | 状态 | pending=待撮合, matched=已撮合, cancelled=已取消 |
| `match_time` | int unsigned | 撮合时间 | Unix时间戳 |
| `match_order_id` | int unsigned | 撮合成功的订单ID | 关联 ba_collection_order.id |
| `create_time` | int unsigned | 创建时间 | Unix时间戳 |
| `update_time` | int unsigned | 更新时间 | Unix时间戳 |

**索引**：
- PRIMARY KEY (`id`)
- KEY `idx_item_id` (`item_id`)
- KEY `idx_session_id` (`session_id`)
- KEY `idx_user_id` (`user_id`)
- KEY `idx_status` (`status`)
- KEY `idx_weight` (`weight`)
- KEY `idx_create_time` (`create_time`)

---

### 8. ba_trade_reservations（盲盒预约记录表）

| 字段名 | 类型 | 说明 | 备注 |
|--------|------|------|------|
| `id` | int unsigned | 记录ID | 主键，自增 |
| `user_id` | int unsigned | 用户ID | 关联 ba_user.id |
| `session_id` | int unsigned | 场次ID | 关联 ba_collection_session.id |
| `zone_id` | int unsigned | 价格分区ID | 关联 ba_price_zone_config.id（如：1=1K区, 2=2K区） |
| `package_id` | int unsigned | 匹配资产包ID | 关联 ba_asset_package.id，必填 |
| `product_id` | int unsigned | 匹配到的商品ID | 预约时为0，中签后回填 ba_collection_item.id |
| `freeze_amount` | decimal(10,2) | 冻结金额 | 冻结的专项金（分区最高价） |
| `power_used` | decimal(10,2) | 消耗绿色算力 | 消耗的绿色算力 |
| `base_hashrate_cost` | decimal(10,2) | 基础算力消耗 | 基础算力消耗 |
| `extra_hashrate_cost` | decimal(10,2) | 额外算力消耗 | 额外加注的算力 |
| `weight` | int | 权重 | 权重值 |
| `status` | tinyint | 状态 | 0=待撮合, 1=已中签, 2=未中签, 3=已取消 |
| `match_order_id` | int unsigned | 生成的正式订单ID | 关联 ba_collection_order.id |
| `match_time` | int unsigned | 撮合完成时间 | Unix时间戳 |
| `create_time` | bigint | 创建时间 | Unix时间戳 |
| `update_time` | bigint | 更新时间 | Unix时间戳 |

**索引**：
- PRIMARY KEY (`id`)
- KEY `idx_session_zone_status` (`session_id`,`zone_id`,`status`)

---

### 9. ba_asset_package（资产包配置表）

| 字段名 | 类型 | 说明 | 备注 |
|--------|------|------|------|
| `id` | int unsigned | 资产包ID | 主键，自增 |
| `session_id` | int unsigned | 关联场次ID | 关联 ba_collection_session.id |
| `zone_id` | int unsigned | 关联分区ID | 0=通用包，其他=特定分区包 |
| `name` | varchar(100) | 资产包名称 | 如：12月27日1000元精选包 |
| `description` | text | 资产包描述 | 资产包描述信息 |
| `asset_anchor` | varchar(255) | 资产锚定 | 资产锚定信息 |
| `cover_image` | varchar(255) | 封面图 | 资产包封面图 |
| `min_price` | decimal(12,2) | 包内商品最低价 | 包内商品最低价 |
| `max_price` | decimal(12,2) | 包内商品最高价 | 包内商品最高价 |
| `item_count` | int unsigned | 藏品数量 | 创建时指定的数量 |
| `generated_count` | int unsigned | 已生成藏品数 | 已生成的藏品数量 |
| `total_count` | int | 包内商品总数 | 包内商品总数（动态统计） |
| `sold_count` | int | 已售数量 | 已售出的数量 |
| `status` | tinyint | 状态 | 0=关闭, 1=开启 |
| `is_default` | tinyint | 是否为该分区默认包 | 用于旧资产自动混入 |
| `create_time` | bigint | 创建时间 | Unix时间戳 |
| `update_time` | bigint | 更新时间 | Unix时间戳 |

**索引**：
- PRIMARY KEY (`id`)
- KEY `idx_session_zone` (`session_id`,`zone_id`)
- KEY `idx_status` (`status`)

---

### 10. ba_collection_appreciation_log（藏品增值日志表）

| 字段名 | 类型 | 说明 | 备注 |
|--------|------|------|------|
| `id` | int unsigned | 主键ID | 主键，自增 |
| `item_id` | int unsigned | 藏品ID | 关联 ba_collection_item.id |
| `before_price` | decimal(10,2) | 增值前价格 | 增值前的价格 |
| `after_price` | decimal(10,2) | 增值后价格 | 增值后的价格 |
| `rate` | decimal(5,4) | 增值率 | 小数形式，如0.05表示5% |
| `reason` | varchar(100) | 增值原因 | first_trade=首次交易, yesterday_trade=昨日交易 |
| `create_time` | int unsigned | 创建时间 | Unix时间戳 |

**索引**：
- PRIMARY KEY (`id`)
- KEY `idx_item_id` (`item_id`)
- KEY `idx_create_time` (`create_time`)

---

## 二、字段分类汇总

### 1. 价格相关字段

| 表名 | 字段名 | 说明 |
|------|--------|------|
| `ba_collection_item` | `price` | 当前价格（动态） |
| `ba_collection_item` | `issue_price` | 发行价（首次上架价格） |
| `ba_user_collection` | `price` | 购买单价（用户买入价格） |
| `ba_user_collection` | `legacy_unlock_price` | 旧资产解锁价快照 |
| `ba_collection_consignment` | `price` | 寄售价格 |
| `ba_collection_consignment` | `original_price` | 卖家原购买价格 |
| `ba_collection_consignment` | `sold_price` | 成交价格快照 |
| `ba_collection_consignment` | `principal_amount` | 本金金额 |
| `ba_collection_consignment` | `profit_amount` | 利润金额 |
| `ba_collection_order` | `total_amount` | 订单总金额 |
| `ba_collection_order_item` | `price` | 单价 |
| `ba_collection_order_item` | `subtotal` | 小计 |
| `ba_trade_reservations` | `freeze_amount` | 冻结金额 |
| `ba_asset_package` | `min_price` | 包内商品最低价 |
| `ba_asset_package` | `max_price` | 包内商品最高价 |
| `ba_collection_appreciation_log` | `before_price` | 增值前价格 |
| `ba_collection_appreciation_log` | `after_price` | 增值后价格 |
| `ba_collection_appreciation_log` | `rate` | 增值率 |

### 2. 状态相关字段

| 表名 | 字段名 | 说明 | 值说明 |
|------|--------|------|--------|
| `ba_collection_item` | `status` | 上架状态 | 0=下架, 1=上架 |
| `ba_user_collection` | `delivery_status` | 提货状态 | 0=未提货, 1=已提货 |
| `ba_user_collection` | `consignment_status` | 寄售状态 | 0=未寄售, 1=寄售中, 2=已售出, 3=寄售失败 |
| `ba_user_collection` | `mining_status` | 矿机状态 | 0=正常, 1=矿机（锁仓） |
| `ba_collection_consignment` | `status` | 寄售状态 | 1=上架中, 2=已下架, 3=已售出 |
| `ba_collection_consignment` | `settle_status` | 结算状态 | 0=未结算, 1=已结算 |
| `ba_collection_order` | `status` | 订单状态 | pending=待支付, paid=已支付, completed=已完成, cancelled=已取消, refunded=已退款 |
| `ba_collection_session` | `status` | 状态 | 0=下架, 1=上架 |
| `ba_collection_matching_pool` | `status` | 状态 | pending=待撮合, matched=已撮合, cancelled=已取消 |
| `ba_trade_reservations` | `status` | 状态 | 0=待撮合, 1=已中签, 2=未中签, 3=已取消 |
| `ba_asset_package` | `status` | 状态 | 0=关闭, 1=开启 |

### 3. 确权相关字段

| 表名 | 字段名 | 说明 |
|------|--------|------|
| `ba_collection_item` | `asset_code` | 确权编号（37-DATA-XXXX-XXXXXX） |
| `ba_collection_item` | `tx_hash` | 存证指纹（MD5） |
| `ba_collection_item` | `contract_no` | 合约地址 |
| `ba_collection_item` | `rights_status` | 确权状态 |
| `ba_collection_item` | `block_height` | 区块高度 |
| `ba_collection_item` | `rights_hash` | 权益哈希 |
| `ba_user_collection` | `rights_hash` | 确权哈希（唯一，优先于item.tx_hash） |
| `ba_user_collection` | `rights_status` | 确权状态 |
| `ba_user_collection` | `contract_no` | 合同编号 |
| `ba_user_collection` | `block_height` | 区块高度 |

### 4. 关联ID字段

| 表名 | 字段名 | 关联表 | 说明 |
|------|--------|--------|------|
| `ba_collection_item` | `session_id` | `ba_collection_session` | 专场ID |
| `ba_collection_item` | `package_id` | `ba_asset_package` | 资产包ID |
| `ba_collection_item` | `zone_id` | `ba_price_zone_config` | 价格分区ID |
| `ba_user_collection` | `user_id` | `ba_user` | 用户ID |
| `ba_user_collection` | `item_id` | `ba_collection_item` | 藏品商品ID |
| `ba_user_collection` | `order_id` | `ba_collection_order` | 订单ID |
| `ba_collection_consignment` | `user_id` | `ba_user` | 寄售用户ID（卖家） |
| `ba_collection_consignment` | `user_collection_id` | `ba_user_collection` | 用户藏品记录ID |
| `ba_collection_consignment` | `item_id` | `ba_collection_item` | 藏品商品ID |
| `ba_collection_consignment` | `package_id` | `ba_asset_package` | 归属资产包ID |
| `ba_collection_consignment` | `session_id` | `ba_collection_session` | 场次ID |
| `ba_collection_consignment` | `zone_id` | `ba_price_zone_config` | 价格分区ID |
| `ba_collection_order` | `user_id` | `ba_user` | 用户ID（买家） |
| `ba_collection_order_item` | `order_id` | `ba_collection_order` | 订单ID |
| `ba_collection_order_item` | `item_id` | `ba_collection_item` | 藏品ID |
| `ba_collection_matching_pool` | `item_id` | `ba_collection_item` | 藏品ID |
| `ba_collection_matching_pool` | `session_id` | `ba_collection_session` | 时段ID |
| `ba_collection_matching_pool` | `user_id` | `ba_user` | 用户ID（买家） |
| `ba_trade_reservations` | `user_id` | `ba_user` | 用户ID |
| `ba_trade_reservations` | `session_id` | `ba_collection_session` | 场次ID |
| `ba_trade_reservations` | `zone_id` | `ba_price_zone_config` | 价格分区ID |
| `ba_trade_reservations` | `package_id` | `ba_asset_package` | 匹配资产包ID |
| `ba_trade_reservations` | `product_id` | `ba_collection_item` | 匹配到的商品ID |
| `ba_asset_package` | `session_id` | `ba_collection_session` | 关联场次ID |
| `ba_asset_package` | `zone_id` | `ba_price_zone_config` | 关联分区ID |

### 5. 时间相关字段

| 表名 | 字段名 | 说明 |
|------|--------|------|
| `ba_collection_item` | `create_time` | 创建时间 |
| `ba_collection_item` | `update_time` | 更新时间 |
| `ba_user_collection` | `buy_time` | 购买时间 |
| `ba_user_collection` | `mining_start_time` | 转为矿机的时间 |
| `ba_user_collection` | `last_dividend_time` | 最后一次分红时间 |
| `ba_user_collection` | `create_time` | 创建时间 |
| `ba_user_collection` | `update_time` | 更新时间 |
| `ba_collection_consignment` | `create_time` | 创建时间 |
| `ba_collection_consignment` | `update_time` | 更新时间 |
| `ba_collection_consignment` | `sold_time` | 成交时间 |
| `ba_collection_consignment` | `settle_time` | 结算时间 |
| `ba_collection_order` | `pay_time` | 付款时间 |
| `ba_collection_order` | `complete_time` | 完成时间 |
| `ba_collection_order` | `create_time` | 创建时间 |
| `ba_collection_order` | `update_time` | 更新时间 |
| `ba_collection_order_item` | `create_time` | 创建时间 |
| `ba_collection_session` | `create_time` | 创建时间 |
| `ba_collection_session` | `update_time` | 更新时间 |
| `ba_collection_matching_pool` | `match_time` | 撮合时间 |
| `ba_collection_matching_pool` | `create_time` | 创建时间 |
| `ba_collection_matching_pool` | `update_time` | 更新时间 |
| `ba_trade_reservations` | `match_time` | 撮合完成时间 |
| `ba_trade_reservations` | `create_time` | 创建时间 |
| `ba_trade_reservations` | `update_time` | 更新时间 |
| `ba_asset_package` | `create_time` | 创建时间 |
| `ba_asset_package` | `update_time` | 更新时间 |
| `ba_collection_appreciation_log` | `create_time` | 创建时间 |

---

## 三、字段使用说明

### 1. 价格字段使用规则

- **`ba_collection_item.price`**：当前市场价，交易后动态更新
- **`ba_collection_item.issue_price`**：发行价，首次上架价格，不变
- **`ba_user_collection.price`**：用户买入价格，快照，不变
- **`ba_collection_consignment.price`**：寄售价格，卖家设定
- **`ba_collection_consignment.original_price`**：卖家原购买价格，快照
- **`ba_collection_consignment.sold_price`**：成交价格快照，成交时记录

### 2. 状态字段使用规则

- **`ba_collection_item.status`**：商品上架状态，寄售时自动上架，转矿机时自动下架
- **`ba_user_collection.consignment_status`**：寄售状态，0=未寄售, 1=寄售中, 2=已售出, 3=寄售失败
- **`ba_user_collection.mining_status`**：矿机状态，0=正常, 1=矿机（锁仓）
- **`ba_collection_consignment.status`**：寄售记录状态，1=上架中, 2=已下架, 3=已售出

### 3. 确权字段使用规则

- **`ba_user_collection.rights_hash`**：优先使用，如果为空则使用 `ba_collection_item.tx_hash`，如果还为空则生成MD5
- **`ba_collection_item.asset_code`**：确权编号，格式：37-DATA-XXXX-XXXXXX
- **`ba_user_collection.contract_no`**：如果为空，则使用 `ba_collection_item.contract_no`，如果还为空则生成

### 4. 关联字段使用规则

- **`ba_collection_item.package_id`**：资产包ID，0表示未分配
- **`ba_collection_item.zone_id`**：价格分区ID，动态更新（根据价格）
- **`ba_asset_package.zone_id`**：0表示通用包，其他值表示特定分区包
- **`ba_trade_reservations.package_id`**：必填，匹配资产包ID

---

## 四、注意事项

1. **价格字段**：`ba_collection_item.price` 是动态的，交易后会更新；`ba_user_collection.price` 是快照，不变
2. **状态同步**：`ba_collection_item.status` 与 `ba_user_collection.consignment_status` 和 `ba_user_collection.mining_status` 需要同步
3. **确权字段**：`ba_user_collection.rights_hash` 优先于 `ba_collection_item.tx_hash`
4. **资产包**：所有资产包统一设置为通用包（`zone_id = 0`），但 `ba_collection_item.zone_id` 是动态的
5. **时间字段**：所有时间字段都是 Unix 时间戳（秒级），除了 `ba_collection_session.start_time` 和 `end_time` 是字符串格式（HH:mm）


<<<<<<< HEAD
=======

>>>>>>> 392e607a6782491114a0aee7408a7d620ecf394f

