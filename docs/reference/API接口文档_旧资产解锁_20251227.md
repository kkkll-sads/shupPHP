# æ—§èµ„äº§è§£é”ç›¸å…³æ¥å£æ–‡æ¡£

**æ›´æ–°æ—¥æœŸï¼š** 2025-12-27  
**ç‰ˆæœ¬ï¼š** v2.0ï¼ˆæ”¯æŒå¯é‡å¤è§£é”ï¼‰

---

## æ¦‚è¿°

æ—§èµ„äº§è§£é”åŠŸèƒ½å…è®¸ç”¨æˆ·å°†æ—§å¹³å°çš„å¾…æ¿€æ´»é‡‘è½¬åŒ–ä¸ºå¯å¯„å”®çš„è—å“èµ„äº§åŒ…ã€‚æœ¬æ¬¡æ›´æ–°å°†è§£é”ä»**ä¸€æ¬¡æ€§**æ”¹ä¸º**å¯é‡å¤è§£é”**ï¼Œå¹¶å°†å¥–åŠ±ä»ä½™é¢æ”¹ä¸ºè—å“ã€‚

### æ ¸å¿ƒå˜åŒ–
- âœ… æ”¯æŒå¤šæ¬¡è§£é”ï¼ˆæ¯3ä¸ªäº¤æ˜“ç›´æ¨è·å¾—1æ¬¡èµ„æ ¼ï¼‰
- âœ… å‘æ”¾è—å“è€Œéä½™é¢ï¼ˆå¿…é¡»å¯„å”®å˜ç°ï¼‰
- âœ… æ—§èµ„äº§åŒ…äº«æœ‰å¯„å”®ä¼˜å…ˆåŒ¹é…æƒ
- âœ… è‡ªåŠ¨æ··å…¥èµ„äº§åŒ…ï¼Œè‡ªç„¶åˆ†å¸ƒ

---

## æ¥å£æ¸…å•

### æ–°å¢æ¥å£
âŒ æ— æ–°å¢æ¥å£ï¼ˆä½¿ç”¨ç°æœ‰æ¥å£ï¼Œå¢åŠ è¿”å›å­—æ®µï¼‰

### æ›´æ–°æ¥å£

| æ¥å£è·¯å¾„ | æ–¹æ³• | åŠŸèƒ½ | å˜åŒ– |
|---------|------|------|------|
| `/api/Account/checkOldAssetsUnlockStatus` | GET | æŸ¥è¯¢è§£é”çŠ¶æ€ | ğŸ”„ è¿”å›å­—æ®µå¢åŠ  |
| `/api/Account/unlockOldAssets` | POST | æ‰§è¡Œè§£é”æ“ä½œ | ğŸ”„ è¿”å›å­—æ®µå˜åŒ– |

### ç›¸å…³æ¥å£ï¼ˆæ— å˜åŒ–ï¼‰

| æ¥å£è·¯å¾„ | æ–¹æ³• | åŠŸèƒ½ | è¯´æ˜ |
|---------|------|------|------|
| `/api/CollectionItem/consign` | POST | æäº¤å¯„å”® | å†…éƒ¨å¢åŠ æ—§èµ„äº§åŒ…è¯†åˆ«å’Œæ··å…¥é€»è¾‘ |
| `/api/Account/getInfo` | GET | è·å–ç”¨æˆ·ä¿¡æ¯ | è¿”å›å¾…æ¿€æ´»é‡‘å­—æ®µ |

---

## æ¥å£è¯¦æƒ…

### 1. æŸ¥è¯¢è§£é”çŠ¶æ€

**æ¥å£åœ°å€ï¼š** `GET /api/Account/checkOldAssetsUnlockStatus`

**åŠŸèƒ½è¯´æ˜ï¼š** æŸ¥è¯¢ç”¨æˆ·çš„æ—§èµ„äº§è§£é”æ¡ä»¶å’ŒçŠ¶æ€ï¼ŒåŒ…æ‹¬å·²è§£é”æ¬¡æ•°ã€å¯ç”¨èµ„æ ¼ç­‰ã€‚

#### è¯·æ±‚å‚æ•°
æ— éœ€å‚æ•°ï¼ˆç™»å½•åè‡ªåŠ¨è¯†åˆ«ç”¨æˆ·ï¼‰

#### è¯·æ±‚ç¤ºä¾‹
```http
GET /api/Account/checkOldAssetsUnlockStatus HTTP/1.1
Authorization: Bearer {token}
```

#### å“åº”å‚æ•°

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|-------|------|------|
| `code` | int | çŠ¶æ€ç ï¼ˆ1=æˆåŠŸï¼‰ |
| `msg` | string | æç¤ºä¿¡æ¯ |
| `data` | object | è¿”å›æ•°æ® |

##### data å­—æ®µè¯´æ˜

| å­—æ®µå | ç±»å‹ | è¯´æ˜ | ğŸ†•/ğŸ”„ |
|-------|------|------|------|
| `unlock_status` | int | è§£é”çŠ¶æ€ï¼ˆ0=æœªè§£é”ï¼Œ1=å·²è§£é”ï¼Œå…¼å®¹æ—§ç‰ˆï¼‰ | - |
| `unlocked_count` | int | å·²è§£é”æ¬¡æ•° | ğŸ†• |
| `available_quota` | int | å¯ç”¨è§£é”èµ„æ ¼ï¼ˆå‰©ä½™å¯è§£é”æ¬¡æ•°ï¼‰ | ğŸ†• |
| `required_gold` | float | æ¯æ¬¡è§£é”éœ€è¦çš„å¾…æ¿€æ´»é‡‘ï¼ˆ1000.00ï¼‰ | - |
| `current_gold` | float | å½“å‰å¾…æ¿€æ´»é‡‘ä½™é¢ | - |
| `can_unlock` | boolean | æ˜¯å¦å¯ä»¥è§£é” | ğŸ”„ |
| `unlock_conditions` | object | è§£é”æ¡ä»¶è¯¦æƒ… | ğŸ”„ |

##### unlock_conditions å¯¹è±¡

| å­—æ®µå | ç±»å‹ | è¯´æ˜ | ğŸ†•/ğŸ”„ |
|-------|------|------|------|
| `has_transaction` | boolean | æ˜¯å¦å®Œæˆè¿‡äº¤æ˜“ | - |
| `transaction_count` | int | äº¤æ˜“æ¬¡æ•° | - |
| `direct_referrals_count` | int | ç›´æ¨ç”¨æˆ·æ€»æ•° | - |
| `qualified_referrals` | int | æœ‰äº¤æ˜“è®°å½•çš„ç›´æ¨ç”¨æˆ·æ•° | - |
| `unlocked_count` | int | å·²è§£é”æ¬¡æ•° | ğŸ†• |
| `available_quota` | int | å¯ç”¨è§£é”èµ„æ ¼ | ğŸ†• |
| `is_qualified` | boolean | æ˜¯å¦æ»¡è¶³è§£é”æ¡ä»¶ | ğŸ”„ |
| `messages` | array | çŠ¶æ€è¯´æ˜ä¿¡æ¯åˆ—è¡¨ | ğŸ”„ |

#### å“åº”ç¤ºä¾‹

```json
{
    "code": 1,
    "msg": "æŸ¥è¯¢æˆåŠŸ",
    "data": {
        "unlock_status": 1,
        "unlocked_count": 2,
        "available_quota": 1,
        "required_gold": 1000.00,
        "current_gold": 3500.00,
        "can_unlock": true,
        "unlock_conditions": {
            "has_transaction": true,
            "transaction_count": 15,
            "direct_referrals_count": 12,
            "qualified_referrals": 9,
            "unlocked_count": 2,
            "available_quota": 1,
            "is_qualified": true,
            "messages": [
                "âœ“ å·²å®Œæˆäº¤æ˜“ï¼ˆ15ç¬”ï¼‰",
                "ç›´æ¨ç”¨æˆ·æ€»æ•°ï¼š12ä¸ª",
                "âœ“ æœ‰äº¤æ˜“è®°å½•çš„ç›´æ¨ç”¨æˆ·ï¼š9ä¸ª",
                "å·²è§£é”æ¬¡æ•°ï¼š2æ¬¡",
                "å¯è·å¾—èµ„æ ¼ï¼š3æ¬¡ï¼ˆæ¯3ä¸ªäº¤æ˜“ç›´æ¨=1æ¬¡ï¼‰",
                "âœ“ å‰©ä½™å¯ç”¨èµ„æ ¼ï¼š1æ¬¡"
            ]
        }
    }
}
```

#### è§£é”æ¡ä»¶è¯´æ˜

ç”¨æˆ·éœ€åŒæ—¶æ»¡è¶³ä»¥ä¸‹æ¡ä»¶æ‰èƒ½è§£é”ï¼š

1. **èº«ä»½è¦æ±‚**ï¼šç”¨æˆ·è‡ªèº«å¿…é¡»æ˜¯äº¤æ˜“ç”¨æˆ·ï¼ˆ`has_transaction = true`ï¼‰
2. **èµ„é‡‘è¦æ±‚**ï¼š`current_gold` â‰¥ 1000.00
3. **æ¨å¹¿è¦æ±‚**ï¼š`available_quota` > 0
   - è®¡ç®—å…¬å¼ï¼š`floor(qualified_referrals / 3) - unlocked_count`
   - æ¯3ä¸ªæœ‰äº¤æ˜“è®°å½•çš„ç›´æ¨ç”¨æˆ·è·å¾—1æ¬¡è§£é”èµ„æ ¼

---

### 2. æ‰§è¡Œè§£é”æ“ä½œ

**æ¥å£åœ°å€ï¼š** `POST /api/Account/unlockOldAssets`

**åŠŸèƒ½è¯´æ˜ï¼š** æ‰§è¡Œæ—§èµ„äº§è§£é”æ“ä½œï¼Œæ¶ˆè€—å¾…æ¿€æ´»é‡‘ï¼Œå‘æ”¾æ—§èµ„äº§åŒ…è—å“å’Œå¯„å”®åˆ¸ã€‚

#### è¯·æ±‚å‚æ•°
æ— éœ€å‚æ•°ï¼ˆç™»å½•åè‡ªåŠ¨è¯†åˆ«ç”¨æˆ·ï¼‰

#### è¯·æ±‚ç¤ºä¾‹
```http
POST /api/Account/unlockOldAssets HTTP/1.1
Authorization: Bearer {token}
Content-Type: application/json
```

#### å“åº”å‚æ•°

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|-------|------|------|
| `code` | int | çŠ¶æ€ç ï¼ˆ1=æˆåŠŸï¼‰ |
| `msg` | string | æç¤ºä¿¡æ¯ |
| `data` | object | è¿”å›æ•°æ® |

##### data å­—æ®µè¯´æ˜

| å­—æ®µå | ç±»å‹ | è¯´æ˜ | ğŸ†•/ğŸ”„/âŒ |
|-------|------|------|---------|
| `unlock_count` | int | å½“å‰è§£é”æ¬¡æ•°ï¼ˆç´¯è®¡ï¼‰ | ğŸ†• |
| `consumed_gold` | float | æ¶ˆè€—çš„å¾…æ¿€æ´»é‡‘ï¼ˆ1000.00ï¼‰ | - |
| `reward_item_id` | int | è·å¾—çš„è—å“ID | ğŸ†• |
| `reward_item_title` | string | è·å¾—çš„è—å“åç§°ï¼ˆ"æ—§èµ„äº§åŒ…"ï¼‰ | ğŸ†• |
| `reward_item_price` | float | è—å“ä»·å€¼ï¼ˆ1000.00ï¼‰ | ğŸ†• |
| `user_collection_id` | int | ç”¨æˆ·è—å“è®°å½•ID | ğŸ†• |
| `reward_consignment_coupon` | int | è·å¾—çš„å¯„å”®åˆ¸æ•°é‡ï¼ˆ1ï¼‰ | - |
| `remaining_quota` | int | å‰©ä½™å¯ç”¨è§£é”èµ„æ ¼ | ğŸ†• |
| `unlock_conditions` | object | æœ¬æ¬¡è§£é”æ—¶çš„æ¡ä»¶è¯¦æƒ… | - |
| `message` | string | å‹å¥½æç¤ºä¿¡æ¯ | ğŸ†• |
| ~~`reward_equity_package`~~ | ~~float~~ | ~~æƒç›Šèµ„äº§åŒ…ä»·å€¼~~ | âŒ å·²ç§»é™¤ |

#### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”ï¼š**
```json
{
    "code": 1,
    "msg": "æ—§èµ„äº§è§£é”æˆåŠŸ",
    "data": {
        "unlock_count": 3,
        "consumed_gold": 1000.00,
        "reward_item_id": 1234,
        "reward_item_title": "æ—§èµ„äº§åŒ…",
        "reward_item_price": 1000.00,
        "user_collection_id": 5678,
        "reward_consignment_coupon": 1,
        "remaining_quota": 0,
        "unlock_conditions": {
            "has_transaction": true,
            "transaction_count": 15,
            "direct_referrals_count": 12,
            "qualified_referrals": 9,
            "unlocked_count": 2,
            "available_quota": 1,
            "is_qualified": true,
            "messages": [...]
        },
        "message": "å·²å‘æ”¾æ—§èµ„äº§åŒ…ï¼ˆä»·å€¼1000å…ƒï¼‰å’Œå¯„å”®åˆ¸x1ï¼Œè¯·å‰å¾€"æˆ‘çš„è—å“"å¯„å”®å˜ç°"
    }
}
```

**å¤±è´¥å“åº”ï¼š**
```json
{
    "code": 0,
    "msg": "è§£é”å¤±è´¥ï¼šè§£é”æ¡ä»¶ä¸æ»¡è¶³ï¼šæš‚æ— å¯ç”¨è§£é”èµ„æ ¼ï¼ˆéœ€è¦æ¯3ä¸ªäº¤æ˜“ç›´æ¨è·å¾—1æ¬¡èµ„æ ¼ï¼‰",
    "data": []
}
```

#### é”™è¯¯ç è¯´æ˜

| é”™è¯¯ä¿¡æ¯ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|---------|------|---------|
| `è¯·å…ˆç™»å½•` | æœªç™»å½• | å…ˆè°ƒç”¨ç™»å½•æ¥å£ |
| `ç”¨æˆ·ä¸å­˜åœ¨` | ç”¨æˆ·æ•°æ®å¼‚å¸¸ | è”ç³»ç®¡ç†å‘˜ |
| `è§£é”æ¡ä»¶ä¸æ»¡è¶³ï¼šæš‚æ— å¯ç”¨è§£é”èµ„æ ¼` | å¯ç”¨èµ„æ ¼ä¸º0 | æ¨å¹¿æ›´å¤šäº¤æ˜“ç”¨æˆ· |
| `å¾…æ¿€æ´»é‡‘ä¸è¶³` | `current_gold` < 1000 | ç­‰å¾…å¹³å°å‘æ”¾å¾…æ¿€æ´»é‡‘ |
| `ç³»ç»Ÿé…ç½®é”™è¯¯ï¼šæ—§èµ„äº§åŒ…æ¨¡æ¿ä¸å­˜åœ¨` | åå°æœªé…ç½®è—å“æ¨¡æ¿ | è”ç³»ç®¡ç†å‘˜é…ç½® |
| `å‘æ”¾æ—§èµ„äº§åŒ…å¤±è´¥` | æ•°æ®åº“æ’å…¥å¤±è´¥ | è”ç³»ç®¡ç†å‘˜ |
| `å‘æ”¾å¯„å”®åˆ¸å¤±è´¥` | å¯„å”®åˆ¸ç”Ÿæˆå¤±è´¥ | è”ç³»ç®¡ç†å‘˜ |

---

## ä¸šåŠ¡æµç¨‹

### å®Œæ•´æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. ç”¨æˆ·æ»¡è¶³æ¡ä»¶ï¼ˆæ¯3ä¸ªäº¤æ˜“ç›´æ¨=1æ¬¡èµ„æ ¼ï¼‰     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. è°ƒç”¨ checkOldAssetsUnlockStatus æŸ¥è¯¢çŠ¶æ€ â”‚
â”‚     - æŸ¥çœ‹å¯ç”¨èµ„æ ¼ï¼ˆavailable_quotaï¼‰         â”‚
â”‚     - æŸ¥çœ‹å¾…æ¿€æ´»é‡‘ä½™é¢ï¼ˆcurrent_goldï¼‰        â”‚
â”‚     - ç¡®è®¤å¯ä»¥è§£é”ï¼ˆcan_unlock = trueï¼‰       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. è°ƒç”¨ unlockOldAssets æ‰§è¡Œè§£é”            â”‚
â”‚     - æ‰£é™¤ 1000 å¾…æ¿€æ´»é‡‘                     â”‚
â”‚     - è§£é”æ¬¡æ•° +1                            â”‚
â”‚     - å‘æ”¾æ—§èµ„äº§åŒ…è—å“ï¼ˆuser_collectionï¼‰     â”‚
â”‚     - å‘æ”¾å¯„å”®åˆ¸ x1                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. ç”¨æˆ·æŸ¥çœ‹"æˆ‘çš„è—å“"                       â”‚
â”‚     - çœ‹åˆ°æ–°å¢çš„æ—§èµ„äº§åŒ…                     â”‚
â”‚     - æ ‡è®°ä¸ºå¯å¯„å”®çŠ¶æ€                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. è°ƒç”¨ /api/CollectionItem/consign å¯„å”®   â”‚
â”‚     - ç³»ç»Ÿæ£€æµ‹åˆ° is_old_asset_package=1      â”‚
â”‚     - è‡ªåŠ¨æ··å…¥å¯¹åº”åœºæ¬¡ä»·æ ¼åˆ†åŒºçš„èµ„äº§åŒ…        â”‚
â”‚     - å¦‚æ— å¯ç”¨èµ„äº§åŒ…ï¼Œè‡ªåŠ¨åˆ›å»ºæ–°èµ„äº§åŒ…        â”‚
â”‚     - æ‰£é™¤ç¡®æƒé‡‘å’Œå¯„å”®åˆ¸                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  6. ç³»ç»Ÿæ’®åˆï¼ˆç›²ç›’é¢„çº¦ï¼‰                     â”‚
â”‚     - æ—§èµ„äº§åŒ…äº«æœ‰æœ€é«˜åŒ¹é…ä¼˜å…ˆçº§              â”‚
â”‚     - ä¹°å®¶ä¸­ç­¾åè‡ªåŠ¨æˆäº¤                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  7. æ”¶ç›Šå‘æ”¾                                 â”‚
â”‚     - 50% æœ¬é‡‘ â†’ withdrawable_moneyï¼ˆ500å…ƒï¼‰ â”‚
â”‚     - 50% æœ¬é‡‘ â†’ scoreï¼ˆ500åˆ†ï¼‰              â”‚
â”‚     - æ— å¢å€¼åˆ©æ¶¦                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å‰ç«¯å®ç°å»ºè®®

#### 1. è§£é”çŠ¶æ€é¡µé¢

```javascript
// æŸ¥è¯¢è§£é”çŠ¶æ€
async function fetchUnlockStatus() {
    const response = await axios.get('/api/Account/checkOldAssetsUnlockStatus');
    if (response.data.code === 1) {
        const data = response.data.data;
        
        // æ˜¾ç¤ºä¿¡æ¯
        console.log('å·²è§£é”æ¬¡æ•°:', data.unlocked_count);
        console.log('å¯ç”¨èµ„æ ¼:', data.available_quota);
        console.log('å¾…æ¿€æ´»é‡‘:', data.current_gold);
        console.log('æ˜¯å¦å¯è§£é”:', data.can_unlock);
        
        // æ˜¾ç¤ºè¯¦ç»†æ¡ä»¶
        data.unlock_conditions.messages.forEach(msg => {
            console.log(msg);
        });
        
        // åˆ¤æ–­æŒ‰é’®çŠ¶æ€
        if (data.can_unlock) {
            // å¯ç”¨è§£é”æŒ‰é’®
            enableUnlockButton();
        } else {
            // ç¦ç”¨æŒ‰é’®ï¼Œæ˜¾ç¤ºåŸå› 
            disableUnlockButton(data.unlock_conditions.messages);
        }
    }
}
```

#### 2. æ‰§è¡Œè§£é”

```javascript
// æ‰§è¡Œè§£é”
async function doUnlock() {
    // äºŒæ¬¡ç¡®è®¤
    if (!confirm('ç¡®è®¤æ¶ˆè€—1000å¾…æ¿€æ´»é‡‘è§£é”æ—§èµ„äº§åŒ…ï¼Ÿ')) {
        return;
    }
    
    const response = await axios.post('/api/Account/unlockOldAssets');
    if (response.data.code === 1) {
        const data = response.data.data;
        
        // æ˜¾ç¤ºæˆåŠŸä¿¡æ¯
        showSuccess(data.message);
        
        // æ˜¾ç¤ºè·å¾—çš„è—å“
        console.log('è§£é”æ¬¡æ•°:', data.unlock_count);
        console.log('è·å¾—è—å“:', data.reward_item_title);
        console.log('è—å“ID:', data.user_collection_id);
        console.log('å‰©ä½™èµ„æ ¼:', data.remaining_quota);
        
        // è·³è½¬åˆ°æˆ‘çš„è—å“
        setTimeout(() => {
            router.push('/my-collections');
        }, 2000);
    } else {
        // æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
        showError(response.data.msg);
    }
}
```

#### 3. æ˜¾ç¤ºè§£é”è¿›åº¦

```vue
<template>
  <div class="unlock-status">
    <div class="progress-info">
      <h3>è§£é”è¿›åº¦</h3>
      <p>å·²è§£é”ï¼š{{ unlockStatus.unlocked_count }} æ¬¡</p>
      <p>å¯ç”¨èµ„æ ¼ï¼š{{ unlockStatus.available_quota }} æ¬¡</p>
      <p>å¾…æ¿€æ´»é‡‘ï¼šÂ¥{{ unlockStatus.current_gold }}</p>
    </div>
    
    <div class="conditions">
      <h4>è§£é”æ¡ä»¶</h4>
      <ul>
        <li v-for="msg in unlockStatus.unlock_conditions?.messages" :key="msg">
          {{ msg }}
        </li>
      </ul>
    </div>
    
    <button 
      :disabled="!unlockStatus.can_unlock"
      @click="doUnlock"
      class="unlock-btn"
    >
      {{ unlockStatus.can_unlock ? 'ç«‹å³è§£é”' : 'æ¡ä»¶ä¸æ»¡è¶³' }}
    </button>
    
    <p class="hint">
      æ¯æ¬¡è§£é”æ¶ˆè€—1000å¾…æ¿€æ´»é‡‘ï¼Œè·å¾—ä»·å€¼1000å…ƒçš„æ—§èµ„äº§åŒ…å’Œ1å¼ å¯„å”®åˆ¸
    </p>
  </div>
</template>
```

---

## æ³¨æ„äº‹é¡¹

### 1. è§£é”èµ„æ ¼è®¡ç®—
- å¯ç”¨èµ„æ ¼ = floor(æœ‰æ•ˆç›´æ¨æ•° / 3) - å·²è§£é”æ¬¡æ•°
- æœ‰æ•ˆç›´æ¨ï¼šå¿…é¡»æ˜¯æœ‰äº¤æ˜“è®°å½•çš„ä¸€çº§ç›´æ¨ç”¨æˆ·
- ç¤ºä¾‹ï¼š9ä¸ªäº¤æ˜“ç›´æ¨ â†’ 3æ¬¡èµ„æ ¼ï¼Œå·²è§£é”2æ¬¡ â†’ å‰©ä½™1æ¬¡

### 2. å¾…æ¿€æ´»é‡‘æ¥æº
- ç”±å¹³å°ç®¡ç†å‘˜é€šè¿‡åå°äººå·¥å‘æ”¾
- å‘æ”¾ä¾æ®ï¼šæ—§å¹³å°èµ„äº§å‡­è¯å®¡æ ¸é€šè¿‡
- ç”¨æˆ·æ— æ³•é€šè¿‡å…¶ä»–é€”å¾„è·å¾—å¾…æ¿€æ´»é‡‘

### 3. æ—§èµ„äº§åŒ…ç‰¹æ€§
- æ ‡è®°ä¸º `is_old_asset_package=1`
- å¯„å”®æ—¶è‡ªåŠ¨æ··å…¥å¯¹åº”åœºæ¬¡ä»·æ ¼åˆ†åŒºçš„èµ„äº§åŒ…
- æ’®åˆæ—¶äº«æœ‰æœ€é«˜ä¼˜å…ˆçº§
- å–å‡ºåæ”¶ç›Šï¼š50%å¯æç° + 50%æ¶ˆè´¹é‡‘ï¼Œæ— å¢å€¼åˆ©æ¶¦

### 4. å¯„å”®åˆ¸ä½¿ç”¨
- è§£é”æ—¶è‡ªåŠ¨å‘æ”¾å¯¹åº”åœºæ¬¡å’Œä»·æ ¼åˆ†åŒºçš„å¯„å”®åˆ¸
- æœ‰æ•ˆæœŸ30å¤©
- å¯„å”®æ—¶éœ€è¦å¯„å”®åˆ¸å’Œç¡®æƒé‡‘

### 5. å…¼å®¹æ€§
- ä¿ç•™ `unlock_status` å­—æ®µç”¨äºå‘ä¸‹å…¼å®¹
- æ—§å®¢æˆ·ç«¯å¯ä»¥æ­£å¸¸è°ƒç”¨ï¼Œåªæ˜¯æ— æ³•çœ‹åˆ°æ–°å¢å­—æ®µ
- å»ºè®®å‰ç«¯å°½å¿«å‡çº§ä»¥æ”¯æŒå¤šæ¬¡è§£é”åŠŸèƒ½

---

## æµ‹è¯•ç”¨ä¾‹

### ç”¨ä¾‹1ï¼šé¦–æ¬¡è§£é”
**å‰ç½®æ¡ä»¶ï¼š**
- ç”¨æˆ·æœ‰1ç¬”ä»¥ä¸Šäº¤æ˜“è®°å½•
- æœ‰3ä¸ªäº¤æ˜“ç›´æ¨ç”¨æˆ·
- å¾…æ¿€æ´»é‡‘ â‰¥ 1000
- ä»æœªè§£é”è¿‡

**æ“ä½œæ­¥éª¤ï¼š**
1. è°ƒç”¨ `checkOldAssetsUnlockStatus`
2. ç¡®è®¤ `can_unlock = true`
3. è°ƒç”¨ `unlockOldAssets`

**é¢„æœŸç»“æœï¼š**
- è§£é”æˆåŠŸ
- `unlock_count = 1`
- `remaining_quota = 0`
- ç”Ÿæˆ 1 æ¡ `user_collection` è®°å½•
- è·å¾— 1 å¼ å¯„å”®åˆ¸

### ç”¨ä¾‹2ï¼šå¤šæ¬¡è§£é”
**å‰ç½®æ¡ä»¶ï¼š**
- ç”¨æˆ·æœ‰1ç¬”ä»¥ä¸Šäº¤æ˜“è®°å½•
- æœ‰9ä¸ªäº¤æ˜“ç›´æ¨ç”¨æˆ·
- å¾…æ¿€æ´»é‡‘ â‰¥ 3000
- å·²è§£é”è¿‡2æ¬¡

**æ“ä½œæ­¥éª¤ï¼š**
1. è°ƒç”¨ `checkOldAssetsUnlockStatus`
2. ç¡®è®¤ `available_quota = 1`ï¼ˆ9/3 - 2 = 1ï¼‰
3. è°ƒç”¨ `unlockOldAssets`

**é¢„æœŸç»“æœï¼š**
- è§£é”æˆåŠŸ
- `unlock_count = 3`
- `remaining_quota = 0`
- å¾…æ¿€æ´»é‡‘å‡å°‘1000

### ç”¨ä¾‹3ï¼šèµ„æ ¼ä¸è¶³
**å‰ç½®æ¡ä»¶ï¼š**
- ç”¨æˆ·æœ‰5ä¸ªäº¤æ˜“ç›´æ¨
- å·²è§£é”è¿‡1æ¬¡

**æ“ä½œæ­¥éª¤ï¼š**
1. è°ƒç”¨ `checkOldAssetsUnlockStatus`

**é¢„æœŸç»“æœï¼š**
- `available_quota = 0`ï¼ˆ5/3 - 1 = 0ï¼‰
- `can_unlock = false`
- æç¤ºéœ€è¦æ›´å¤šäº¤æ˜“ç›´æ¨

### ç”¨ä¾‹4ï¼šå¾…æ¿€æ´»é‡‘ä¸è¶³
**å‰ç½®æ¡ä»¶ï¼š**
- ç”¨æˆ·æœ‰å¯ç”¨èµ„æ ¼
- å¾…æ¿€æ´»é‡‘ < 1000

**æ“ä½œæ­¥éª¤ï¼š**
1. è°ƒç”¨ `unlockOldAssets`

**é¢„æœŸç»“æœï¼š**
- è§£é”å¤±è´¥
- æç¤º"å¾…æ¿€æ´»é‡‘ä¸è¶³"

---

## å¸¸è§é—®é¢˜

### Q1ï¼šä¸ºä»€ä¹ˆä¸ç›´æ¥å‘æ”¾ä½™é¢è€Œæ˜¯å‘æ”¾è—å“ï¼Ÿ
**Aï¼š** ä¸ºäº†ç¬¦åˆå¹³å°èµ„äº§æµè½¬è§„åˆ™ï¼Œæ—§èµ„äº§å¿…é¡»é€šè¿‡å¯„å”®å˜ç°ï¼Œç¡®ä¿èµ„äº§æµè½¬çš„å¯è¿½æº¯æ€§å’Œåˆè§„æ€§ã€‚

### Q2ï¼šæ—§èµ„äº§åŒ…å–å‡ºåä¸ºä»€ä¹ˆæ²¡æœ‰åˆ©æ¶¦ï¼Ÿ
**Aï¼š** æ ¹æ®"æ—§èµ„äº§æ— åˆ©æ¶¦"åŸåˆ™ï¼Œæ—§èµ„äº§åŒ…å”®ä»·çš„100%éƒ½æ˜¯æœ¬é‡‘ï¼ŒæŒ‰50/50åˆ†é…åˆ°å¯æç°ä½™é¢å’Œæ¶ˆè´¹é‡‘ã€‚

### Q3ï¼šæ—§èµ„äº§åŒ…åœ¨å¯„å”®æ—¶å¦‚ä½•ä¿è¯ä¸è¢«è¯†åˆ«ï¼Ÿ
**Aï¼š** ç³»ç»Ÿä¼šè‡ªåŠ¨å°†æ—§èµ„äº§åŒ…éšæœºæ··å…¥å¯¹åº”åœºæ¬¡å’Œä»·æ ¼åˆ†åŒºçš„èµ„äº§åŒ…ä¸­ï¼Œå¤–è§‚ä¸æ™®é€šè—å“æ— å¼‚ã€‚

### Q4ï¼šå¦‚æœä»·æ ¼åˆ†åŒºæ²¡æœ‰èµ„äº§åŒ…æ€ä¹ˆåŠï¼Ÿ
**Aï¼š** ç³»ç»Ÿä¼šè‡ªåŠ¨åŸºäºåœºæ¬¡çš„ç°æœ‰èµ„äº§åŒ…åˆ›å»ºæ–°çš„è¯¥ä»·æ ¼åˆ†åŒºèµ„äº§åŒ…ï¼›å¦‚æœåœºæ¬¡ä¹Ÿæ²¡æœ‰èµ„äº§åŒ…ï¼Œä¼šåˆ›å»ºé»˜è®¤èµ„äº§åŒ…ã€‚

### Q5ï¼šè§£é”æ¬¡æ•°æœ‰ä¸Šé™å—ï¼Ÿ
**Aï¼š** æ²¡æœ‰ä¸Šé™ï¼Œåªè¦æ»¡è¶³æ¡ä»¶ï¼ˆæ¯3ä¸ªäº¤æ˜“ç›´æ¨=1æ¬¡èµ„æ ¼ï¼‰ä¸”å¾…æ¿€æ´»é‡‘å……è¶³ï¼Œå¯ä»¥æ— é™æ¬¡è§£é”ã€‚

---

## æ›´æ–°å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | å˜æ›´å†…å®¹ |
|------|------|---------|
| v2.0 | 2025-12-27 | æ”¯æŒå¯é‡å¤è§£é”ï¼Œå‘æ”¾è—å“è€Œéä½™é¢ |
| v1.0 | 2025-12-20 | åˆå§‹ç‰ˆæœ¬ï¼Œä¸€æ¬¡æ€§è§£é”å‘æ”¾ä½™é¢ |

---

**æ–‡æ¡£ç»´æŠ¤ï¼š** æŠ€æœ¯å›¢é˜Ÿ  
**è”ç³»æ–¹å¼ï¼š** tech@example.com


